the_whole_shebang():
- add(wait):
  - wait
- closing():
  - add(sto, b, a, sto, worm, worm, b):
    - sto b a sto worm worm b
  - add(sto, worm, b, a, sto, wait):
    - sto worm b a sto wait
  - add(d, worm, d, c, c, b):
    - d worm d c c b
  - add(sto, worm, b, a, sto, wait):
    - sto worm b a sto wait
  - add(c, c, b, sto, b, a, sto):
    - c c b sto b a sto
  - more_pistons(0):
    - add(c):
      - c
  - extend(1):
    - add(b):
      - b
    - add(a):
      - a
- add(stop):
  - stop
- opening():
  - add(a):
    - a
  - retract(1):
    - pull(-1):
      - add(b):
        - b
    - row_high(0, True):
      - full_extend(0, True):
        - extend(0, True):
          - add(a):
            - a
        - extra_pulses(0, True):
      - retract(0):
        - pull(-2):
        - shift_pistons(0):
          - add(c, b):
            - c b
        - row_high(-1, True):
          - full_extend(-1, True):
            - extend(-1, True):
              - add(b):
                - b
            - extra_pulses(-1, True):
          - retract(-1):
  - add(sto):
    - sto
  - full_row(2):
    - more_pistons(1):
      - add(d):
        - d
    - row_high(2):
      - full_extend(2, False):
        - extend(2, False):
          - add(b):
            - b
          - more_obs(needs_parity=True):
            - add(bobs, bobs):
              - bobs bobs
          - extend(-1):
            - add(b):
              - b
        - extra_pulses(2, False):
          - add(b):
            - b
      - retract(2):
        - less_obs():
          - add(sto, sto):
            - sto sto
        - pull(0):
          - more_pistons(0):
            - add(c):
              - c
          - full_extend(0):
            - extend(0, False):
              - add(a):
                - a
            - extra_pulses(0, False):
          - retract(-3):
          - full_row(-2):
          - shift_pistons(0):
            - add(c, b):
              - c b
        - shift_pistons(1):
          - add(d, c):
            - d c
        - row_high(1, True):
          - full_extend(1, True):
            - extend(1, True):
              - add(a):
                - a
            - extra_pulses(1, True):
          - retract(1):
            - pull(-1):
              - add(b):
                - b
            - row_high(0, True):
              - full_extend(0, True):
                - extend(0, True):
                  - add(a):
                    - a
                - extra_pulses(0, True):
              - retract(0):
                - pull(-2):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
                - row_high(-1, True):
                  - full_extend(-1, True):
                    - extend(-1, True):
                      - add(b):
                        - b
                    - extra_pulses(-1, True):
                  - retract(-1):
  - storage_moves(a, b, sto):
  - full_row(3):
    - more_pistons(1):
      - add(d):
        - d
    - row_high(3):
      - full_extend(3, False):
        - extend(3, False):
          - add(b):
            - b
          - more_obs(needs_parity=True):
            - add(bobs, bobs):
              - bobs bobs
          - more_pistons(0):
            - add(c):
              - c
          - extend(0):
            - add(a):
              - a
        - extra_pulses(3, False):
          - add(a):
            - a
      - retract(3):
        - retract(0, no_recurse_first=False):
          - pull(-2):
          - shift_pistons(0):
            - add(c, b):
              - c b
          - row_high(-1, True):
            - full_extend(-1, True):
              - extend(-1, True):
                - add(b):
                  - b
              - extra_pulses(-1, True):
            - retract(-1):
        - less_obs():
          - add(sto, sto):
            - sto sto
        - pull(1):
          - more_pistons(0):
            - add(c):
              - c
          - full_extend(1):
            - extend(1, False):
              - add(b):
                - b
              - add(a):
                - a
            - extra_pulses(1, False):
          - retract(-2):
          - full_row(-1):
            - row_high(-1):
              - full_extend(-1, False):
                - extend(-1, False):
                  - add(b):
                    - b
                - extra_pulses(-1, False):
              - retract(-1):
          - shift_pistons(0):
            - add(c, b):
              - c b
        - row_high(2, True):
          - full_extend(2, True):
            - extend(2, True):
              - more_obs(needs_parity=False):
                - add(bobs, bobs):
                  - bobs bobs
              - extend(-1):
                - add(b):
                  - b
            - extra_pulses(2, True):
              - add(b):
                - b
          - retract(2):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - pull(0):
              - more_pistons(0):
                - add(c):
                  - c
              - full_extend(0):
                - extend(0, False):
                  - add(a):
                    - a
                - extra_pulses(0, False):
              - retract(-3):
              - full_row(-2):
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - shift_pistons(1):
              - add(d, c):
                - d c
            - row_high(1, True):
              - full_extend(1, True):
                - extend(1, True):
                  - add(a):
                    - a
                - extra_pulses(1, True):
              - retract(1):
                - pull(-1):
                  - add(b):
                    - b
                - row_high(0, True):
                  - full_extend(0, True):
                    - extend(0, True):
                      - add(a):
                        - a
                    - extra_pulses(0, True):
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
  - storage_moves(a, sto):
  - full_row(4):
    - more_pistons(2):
      - add(e):
        - e
    - row_high(4):
      - full_extend(4, False):
        - extend(4, False):
          - add(b):
            - b
          - more_obs(needs_parity=True):
            - add(bobs, bobs):
              - bobs bobs
          - more_pistons(0):
            - add(c):
              - c
          - extend(1):
            - add(b):
              - b
            - add(a):
              - a
        - extra_pulses(4, False):
          - add(a):
            - a
      - retract(4):
        - retract(1, no_recurse_first=False):
          - pull(-1):
            - add(b):
              - b
          - row_high(0, True):
            - full_extend(0, True):
              - extend(0, True):
                - add(a):
                  - a
              - extra_pulses(0, True):
            - retract(0):
              - pull(-2):
              - shift_pistons(0):
                - add(c, b):
                  - c b
              - row_high(-1, True):
                - full_extend(-1, True):
                  - extend(-1, True):
                    - add(b):
                      - b
                  - extra_pulses(-1, True):
                - retract(-1):
        - less_obs():
          - add(sto, sto):
            - sto sto
        - pull(2):
          - more_pistons(1):
            - add(d):
              - d
          - full_extend(2):
            - extend(2, False):
              - add(b):
                - b
              - more_obs(needs_parity=True):
                - add(bobs, bobs):
                  - bobs bobs
              - extend(-1):
                - add(b):
                  - b
            - extra_pulses(2, False):
              - add(b):
                - b
          - retract(-1):
          - less_obs():
            - add(sto, sto):
              - sto sto
          - full_row(0):
            - more_pistons(0):
              - add(c):
                - c
            - row_high(0):
              - full_extend(0, False):
                - extend(0, False):
                  - add(a):
                    - a
                - extra_pulses(0, False):
              - retract(0):
                - pull(-2):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
                - row_high(-1, True):
                  - full_extend(-1, True):
                    - extend(-1, True):
                      - add(b):
                        - b
                    - extra_pulses(-1, True):
                  - retract(-1):
          - shift_pistons(1):
            - add(d, c):
              - d c
          - shift_pistons(0):
            - add(c, b):
              - c b
        - shift_pistons(2):
          - add(e, d):
            - e d
        - row_high(3, True):
          - full_extend(3, True):
            - extend(3, True):
              - more_obs(needs_parity=False):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(0):
                - add(c):
                  - c
              - extend(0):
                - add(a):
                  - a
            - extra_pulses(3, True):
              - add(a):
                - a
          - retract(3):
            - retract(0, no_recurse_first=False):
              - pull(-2):
              - shift_pistons(0):
                - add(c, b):
                  - c b
              - row_high(-1, True):
                - full_extend(-1, True):
                  - extend(-1, True):
                    - add(b):
                      - b
                  - extra_pulses(-1, True):
                - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - pull(1):
              - more_pistons(0):
                - add(c):
                  - c
              - full_extend(1):
                - extend(1, False):
                  - add(b):
                    - b
                  - add(a):
                    - a
                - extra_pulses(1, False):
              - retract(-2):
              - full_row(-1):
                - row_high(-1):
                  - full_extend(-1, False):
                    - extend(-1, False):
                      - add(b):
                        - b
                    - extra_pulses(-1, False):
                  - retract(-1):
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - row_high(2, True):
              - full_extend(2, True):
                - extend(2, True):
                  - more_obs(needs_parity=False):
                    - add(bobs, bobs):
                      - bobs bobs
                  - extend(-1):
                    - add(b):
                      - b
                - extra_pulses(2, True):
                  - add(b):
                    - b
              - retract(2):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(0):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - full_extend(0):
                    - extend(0, False):
                      - add(a):
                        - a
                    - extra_pulses(0, False):
                  - retract(-3):
                  - full_row(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - shift_pistons(1):
                  - add(d, c):
                    - d c
                - row_high(1, True):
                  - full_extend(1, True):
                    - extend(1, True):
                      - add(a):
                        - a
                    - extra_pulses(1, True):
                  - retract(1):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
  - storage_moves(a, sto):
  - full_row(5):
    - more_pistons(2):
      - add(e):
        - e
    - row_high(5):
      - full_extend(5, False):
        - extend(5, False):
          - add(b):
            - b
          - more_obs(needs_parity=True):
            - add(bobs, bobs):
              - bobs bobs
          - more_pistons(1):
            - add(d):
              - d
          - extend(2):
            - add(b):
              - b
            - more_obs(needs_parity=True):
              - add(bobs, sto, bobs, bobs, a, bobs):
                - bobs sto bobs bobs a bobs
            - extend(-1):
              - add(b):
                - b
        - extra_pulses(5, False):
          - add(b, b, b, b, b):
            - b b b b b
      - retract(5):
        - retract(2, no_recurse_first=False):
          - less_obs():
            - add(sto, sto):
              - sto sto
          - pull(0):
            - more_pistons(0):
              - add(c):
                - c
            - full_extend(0):
              - extend(0, False):
                - add(a):
                  - a
              - extra_pulses(0, False):
            - retract(-3):
            - full_row(-2):
            - shift_pistons(0):
              - add(c, b):
                - c b
          - shift_pistons(1):
            - add(d, c):
              - d c
          - row_high(1, True):
            - full_extend(1, True):
              - extend(1, True):
                - add(a):
                  - a
              - extra_pulses(1, True):
            - retract(1):
              - pull(-1):
                - add(b):
                  - b
              - row_high(0, True):
                - full_extend(0, True):
                  - extend(0, True):
                    - add(a):
                      - a
                  - extra_pulses(0, True):
                - retract(0):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
        - less_obs():
          - add(sto, sto):
            - sto sto
        - pull(3):
          - more_pistons(1):
            - add(d):
              - d
          - full_extend(3):
            - extend(3, False):
              - add(b):
                - b
              - more_obs(needs_parity=True):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(0):
                - add(c):
                  - c
              - extend(0):
                - add(a):
                  - a
            - extra_pulses(3, False):
              - add(a):
                - a
          - retract(0):
            - pull(-2):
            - shift_pistons(0):
              - add(c, b):
                - c b
            - row_high(-1, True):
              - full_extend(-1, True):
                - extend(-1, True):
                  - add(b):
                    - b
                - extra_pulses(-1, True):
              - retract(-1):
          - less_obs():
            - add(sto, sto):
              - sto sto
          - full_row(1):
            - more_pistons(0):
              - add(c):
                - c
            - row_high(1):
              - full_extend(1, False):
                - extend(1, False):
                  - add(b):
                    - b
                  - add(a):
                    - a
                - extra_pulses(1, False):
              - retract(1):
                - pull(-1):
                  - add(b):
                    - b
                - row_high(0, True):
                  - full_extend(0, True):
                    - extend(0, True):
                      - add(a):
                        - a
                    - extra_pulses(0, True):
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
          - shift_pistons(1):
            - add(d, c):
              - d c
          - shift_pistons(0):
            - add(c, b):
              - c b
        - row_high(4, True):
          - full_extend(4, True):
            - extend(4, True):
              - more_obs(needs_parity=False):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(0):
                - add(c):
                  - c
              - extend(1):
                - add(b):
                  - b
                - add(a):
                  - a
            - extra_pulses(4, True):
              - add(a):
                - a
          - retract(4):
            - retract(1, no_recurse_first=False):
              - pull(-1):
                - add(b):
                  - b
              - row_high(0, True):
                - full_extend(0, True):
                  - extend(0, True):
                    - add(a):
                      - a
                  - extra_pulses(0, True):
                - retract(0):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - pull(2):
              - more_pistons(1):
                - add(d):
                  - d
              - full_extend(2):
                - extend(2, False):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(bobs, bobs):
                      - bobs bobs
                  - extend(-1):
                    - add(b):
                      - b
                - extra_pulses(2, False):
                  - add(b):
                    - b
              - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - full_row(0):
                - more_pistons(0):
                  - add(c):
                    - c
                - row_high(0):
                  - full_extend(0, False):
                    - extend(0, False):
                      - add(a):
                        - a
                    - extra_pulses(0, False):
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
              - shift_pistons(1):
                - add(d, c):
                  - d c
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - shift_pistons(2):
              - add(e, d):
                - e d
            - row_high(3, True):
              - full_extend(3, True):
                - extend(3, True):
                  - more_obs(needs_parity=False):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(0):
                    - add(c):
                      - c
                  - extend(0):
                    - add(a):
                      - a
                - extra_pulses(3, True):
                  - add(a):
                    - a
              - retract(3):
                - retract(0, no_recurse_first=False):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(1):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - full_extend(1):
                    - extend(1, False):
                      - add(b):
                        - b
                      - add(a):
                        - a
                    - extra_pulses(1, False):
                  - retract(-2):
                  - full_row(-1):
                    - row_high(-1):
                      - full_extend(-1, False):
                        - extend(-1, False):
                          - add(b):
                            - b
                        - extra_pulses(-1, False):
                      - retract(-1):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - row_high(2, True):
                  - full_extend(2, True):
                    - extend(2, True):
                      - more_obs(needs_parity=False):
                        - add(bobs, bobs):
                          - bobs bobs
                      - extend(-1):
                        - add(b):
                          - b
                    - extra_pulses(2, True):
                      - add(b):
                        - b
                  - retract(2):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(0):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - full_extend(0):
                        - extend(0, False):
                          - add(a):
                            - a
                        - extra_pulses(0, False):
                      - retract(-3):
                      - full_row(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - shift_pistons(1):
                      - add(d, c):
                        - d c
                    - row_high(1, True):
                      - full_extend(1, True):
                        - extend(1, True):
                          - add(a):
                            - a
                        - extra_pulses(1, True):
                      - retract(1):
                        - pull(-1):
                          - add(b):
                            - b
                        - row_high(0, True):
                          - full_extend(0, True):
                            - extend(0, True):
                              - add(a):
                                - a
                            - extra_pulses(0, True):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
  - storage_moves(a, sto):
  - full_row(6):
    - more_pistons(3):
      - add(e, fold1):
        - e fold1
    - row_high(6):
      - full_extend(6, False):
        - extend(6, False):
          - add(b):
            - b
          - more_obs(needs_parity=True):
            - add(bobs, bobs):
              - bobs bobs
          - more_pistons(1):
            - add(d):
              - d
          - extend(3):
            - add(b):
              - b
            - more_obs(needs_parity=True):
              - add(bobs, sto, bobs, bobs, a, bobs):
                - bobs sto bobs bobs a bobs
            - more_pistons(0):
              - add(c):
                - c
            - extend(0):
              - add(a):
                - a
        - extra_pulses(6, False):
          - add(a, a, a, a, a, a, a):
            - a a a a a a a
      - retract(6):
        - retract(3, no_recurse_first=False):
          - retract(0, no_recurse_first=False):
            - pull(-2):
            - shift_pistons(0):
              - add(c, b):
                - c b
            - row_high(-1, True):
              - full_extend(-1, True):
                - extend(-1, True):
                  - add(b):
                    - b
                - extra_pulses(-1, True):
              - retract(-1):
          - less_obs():
            - add(sto, sto):
              - sto sto
          - pull(1):
            - more_pistons(0):
              - add(c):
                - c
            - full_extend(1):
              - extend(1, False):
                - add(b):
                  - b
                - add(a):
                  - a
              - extra_pulses(1, False):
            - retract(-2):
            - full_row(-1):
              - row_high(-1):
                - full_extend(-1, False):
                  - extend(-1, False):
                    - add(b):
                      - b
                  - extra_pulses(-1, False):
                - retract(-1):
            - shift_pistons(0):
              - add(c, b):
                - c b
          - row_high(2, True):
            - full_extend(2, True):
              - extend(2, True):
                - more_obs(needs_parity=False):
                  - add(bobs, a, bobs):
                    - bobs a bobs
                - extend(-1):
                  - add(b):
                    - b
              - extra_pulses(2, True):
                - add(b):
                  - b
            - retract(2):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - pull(0):
                - more_pistons(0):
                  - add(c):
                    - c
                - full_extend(0):
                  - extend(0, False):
                    - add(a):
                      - a
                  - extra_pulses(0, False):
                - retract(-3):
                - full_row(-2):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
              - shift_pistons(1):
                - add(d, c):
                  - d c
              - row_high(1, True):
                - full_extend(1, True):
                  - extend(1, True):
                    - add(a):
                      - a
                  - extra_pulses(1, True):
                - retract(1):
                  - pull(-1):
                    - add(b):
                      - b
                  - row_high(0, True):
                    - full_extend(0, True):
                      - extend(0, True):
                        - add(a):
                          - a
                      - extra_pulses(0, True):
                    - retract(0):
                      - pull(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                      - row_high(-1, True):
                        - full_extend(-1, True):
                          - extend(-1, True):
                            - add(b):
                              - b
                          - extra_pulses(-1, True):
                        - retract(-1):
        - less_obs():
          - add(sto, sto):
            - sto sto
        - pull(4):
          - more_pistons(2):
            - add(e):
              - e
          - full_extend(4):
            - extend(4, False):
              - add(b):
                - b
              - more_obs(needs_parity=True):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(0):
                - add(c):
                  - c
              - extend(1):
                - add(b):
                  - b
                - add(a):
                  - a
            - extra_pulses(4, False):
              - add(a):
                - a
          - retract(1):
            - pull(-1):
              - add(b):
                - b
            - row_high(0, True):
              - full_extend(0, True):
                - extend(0, True):
                  - add(a):
                    - a
                - extra_pulses(0, True):
              - retract(0):
                - pull(-2):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
                - row_high(-1, True):
                  - full_extend(-1, True):
                    - extend(-1, True):
                      - add(b):
                        - b
                    - extra_pulses(-1, True):
                  - retract(-1):
          - less_obs():
            - add(sto, sto):
              - sto sto
          - full_row(2):
            - more_pistons(1):
              - add(d):
                - d
            - row_high(2):
              - full_extend(2, False):
                - extend(2, False):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(bobs, bobs):
                      - bobs bobs
                  - extend(-1):
                    - add(b):
                      - b
                - extra_pulses(2, False):
                  - add(b):
                    - b
              - retract(2):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(0):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - full_extend(0):
                    - extend(0, False):
                      - add(a):
                        - a
                    - extra_pulses(0, False):
                  - retract(-3):
                  - full_row(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - shift_pistons(1):
                  - add(d, c):
                    - d c
                - row_high(1, True):
                  - full_extend(1, True):
                    - extend(1, True):
                      - add(a):
                        - a
                    - extra_pulses(1, True):
                  - retract(1):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
          - shift_pistons(2):
            - add(e, d):
              - e d
          - shift_pistons(1):
            - add(d, c):
              - d c
          - shift_pistons(0):
            - add(c, b):
              - c b
        - shift_pistons(3):
          - add(fold1):
            - fold1
        - row_high(5, True):
          - full_extend(5, True):
            - extend(5, True):
              - more_obs(needs_parity=False):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(1):
                - add(d):
                  - d
              - extend(2):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - extend(-1):
                  - add(b):
                    - b
            - extra_pulses(5, True):
              - add(b, b, b):
                - b b b
          - retract(5):
            - retract(2, no_recurse_first=False):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - pull(0):
                - more_pistons(0):
                  - add(c):
                    - c
                - full_extend(0):
                  - extend(0, False):
                    - add(a):
                      - a
                  - extra_pulses(0, False):
                - retract(-3):
                - full_row(-2):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
              - shift_pistons(1):
                - add(d, c):
                  - d c
              - row_high(1, True):
                - full_extend(1, True):
                  - extend(1, True):
                    - add(a):
                      - a
                  - extra_pulses(1, True):
                - retract(1):
                  - pull(-1):
                    - add(b):
                      - b
                  - row_high(0, True):
                    - full_extend(0, True):
                      - extend(0, True):
                        - add(a):
                          - a
                      - extra_pulses(0, True):
                    - retract(0):
                      - pull(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                      - row_high(-1, True):
                        - full_extend(-1, True):
                          - extend(-1, True):
                            - add(b):
                              - b
                          - extra_pulses(-1, True):
                        - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - pull(3):
              - more_pistons(1):
                - add(d):
                  - d
              - full_extend(3):
                - extend(3, False):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(0):
                    - add(c):
                      - c
                  - extend(0):
                    - add(a):
                      - a
                - extra_pulses(3, False):
                  - add(a):
                    - a
              - retract(0):
                - pull(-2):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
                - row_high(-1, True):
                  - full_extend(-1, True):
                    - extend(-1, True):
                      - add(b):
                        - b
                    - extra_pulses(-1, True):
                  - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - full_row(1):
                - more_pistons(0):
                  - add(c):
                    - c
                - row_high(1):
                  - full_extend(1, False):
                    - extend(1, False):
                      - add(b):
                        - b
                      - add(a):
                        - a
                    - extra_pulses(1, False):
                  - retract(1):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
              - shift_pistons(1):
                - add(d, c):
                  - d c
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - row_high(4, True):
              - full_extend(4, True):
                - extend(4, True):
                  - more_obs(needs_parity=False):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(0):
                    - add(c):
                      - c
                  - extend(1):
                    - add(b):
                      - b
                    - add(a):
                      - a
                - extra_pulses(4, True):
                  - add(a):
                    - a
              - retract(4):
                - retract(1, no_recurse_first=False):
                  - pull(-1):
                    - add(b):
                      - b
                  - row_high(0, True):
                    - full_extend(0, True):
                      - extend(0, True):
                        - add(a):
                          - a
                      - extra_pulses(0, True):
                    - retract(0):
                      - pull(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                      - row_high(-1, True):
                        - full_extend(-1, True):
                          - extend(-1, True):
                            - add(b):
                              - b
                          - extra_pulses(-1, True):
                        - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(2):
                  - more_pistons(1):
                    - add(d):
                      - d
                  - full_extend(2):
                    - extend(2, False):
                      - add(b):
                        - b
                      - more_obs(needs_parity=True):
                        - add(bobs, bobs):
                          - bobs bobs
                      - extend(-1):
                        - add(b):
                          - b
                    - extra_pulses(2, False):
                      - add(b):
                        - b
                  - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - full_row(0):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - row_high(0):
                      - full_extend(0, False):
                        - extend(0, False):
                          - add(a):
                            - a
                        - extra_pulses(0, False):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - shift_pistons(2):
                  - add(e, d):
                    - e d
                - row_high(3, True):
                  - full_extend(3, True):
                    - extend(3, True):
                      - more_obs(needs_parity=False):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(0):
                        - add(c):
                          - c
                      - extend(0):
                        - add(a):
                          - a
                    - extra_pulses(3, True):
                      - add(a):
                        - a
                  - retract(3):
                    - retract(0, no_recurse_first=False):
                      - pull(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                      - row_high(-1, True):
                        - full_extend(-1, True):
                          - extend(-1, True):
                            - add(b):
                              - b
                          - extra_pulses(-1, True):
                        - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(1):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - full_extend(1):
                        - extend(1, False):
                          - add(b):
                            - b
                          - add(a):
                            - a
                        - extra_pulses(1, False):
                      - retract(-2):
                      - full_row(-1):
                        - row_high(-1):
                          - full_extend(-1, False):
                            - extend(-1, False):
                              - add(b):
                                - b
                            - extra_pulses(-1, False):
                          - retract(-1):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - row_high(2, True):
                      - full_extend(2, True):
                        - extend(2, True):
                          - more_obs(needs_parity=False):
                            - add(bobs, bobs):
                              - bobs bobs
                          - extend(-1):
                            - add(b):
                              - b
                        - extra_pulses(2, True):
                          - add(b):
                            - b
                      - retract(2):
                        - less_obs():
                          - add(sto, sto):
                            - sto sto
                        - pull(0):
                          - more_pistons(0):
                            - add(c):
                              - c
                          - full_extend(0):
                            - extend(0, False):
                              - add(a):
                                - a
                            - extra_pulses(0, False):
                          - retract(-3):
                          - full_row(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                        - shift_pistons(1):
                          - add(d, c):
                            - d c
                        - row_high(1, True):
                          - full_extend(1, True):
                            - extend(1, True):
                              - add(a):
                                - a
                            - extra_pulses(1, True):
                          - retract(1):
                            - pull(-1):
                              - add(b):
                                - b
                            - row_high(0, True):
                              - full_extend(0, True):
                                - extend(0, True):
                                  - add(a):
                                    - a
                                - extra_pulses(0, True):
                              - retract(0):
                                - pull(-2):
                                - shift_pistons(0):
                                  - add(c, b):
                                    - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True):
                                    - extend(-1, True):
                                      - add(b):
                                        - b
                                    - extra_pulses(-1, True):
                                  - retract(-1):
  - storage_moves(a, sto):
  - full_row(7):
    - more_pistons(3):
      - add(e, fold1):
        - e fold1
    - row_high(7):
      - full_extend(7, False):
        - extend(7, False):
          - add(b):
            - b
          - more_obs(needs_parity=True):
            - add(bobs, bobs):
              - bobs bobs
          - more_pistons(2):
            - add(e):
              - e
          - extend(4):
            - add(b):
              - b
            - more_obs(needs_parity=True):
              - add(bobs, sto, bobs, bobs, a, bobs):
                - bobs sto bobs bobs a bobs
            - more_pistons(0):
              - add(c):
                - c
            - extend(1):
              - add(b):
                - b
              - add(a):
                - a
        - extra_pulses(7, False):
          - add(a, a, a, a, a, a, a):
            - a a a a a a a
      - retract(7):
        - retract(4, no_recurse_first=False):
          - retract(1, no_recurse_first=False):
            - pull(-1):
              - add(b):
                - b
            - row_high(0, True):
              - full_extend(0, True):
                - extend(0, True):
                  - add(a):
                    - a
                - extra_pulses(0, True):
              - retract(0):
                - pull(-2):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
                - row_high(-1, True):
                  - full_extend(-1, True):
                    - extend(-1, True):
                      - add(b):
                        - b
                    - extra_pulses(-1, True):
                  - retract(-1):
          - less_obs():
            - add(sto, sto):
              - sto sto
          - pull(2):
            - more_pistons(1):
              - add(d):
                - d
            - full_extend(2):
              - extend(2, False):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - extend(-1):
                  - add(b):
                    - b
              - extra_pulses(2, False):
                - add(b):
                  - b
            - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - full_row(0):
              - more_pistons(0):
                - add(c):
                  - c
              - row_high(0):
                - full_extend(0, False):
                  - extend(0, False):
                    - add(a):
                      - a
                  - extra_pulses(0, False):
                - retract(0):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
            - shift_pistons(1):
              - add(d, c):
                - d c
            - shift_pistons(0):
              - add(c, b):
                - c b
          - shift_pistons(2):
            - add(e, d):
              - e d
          - row_high(3, True):
            - full_extend(3, True):
              - extend(3, True):
                - more_obs(needs_parity=False):
                  - add(bobs, a, bobs):
                    - bobs a bobs
                - more_pistons(0):
                  - add(c):
                    - c
                - extend(0):
                  - add(a):
                    - a
              - extra_pulses(3, True):
                - add(a):
                  - a
            - retract(3):
              - retract(0, no_recurse_first=False):
                - pull(-2):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
                - row_high(-1, True):
                  - full_extend(-1, True):
                    - extend(-1, True):
                      - add(b):
                        - b
                    - extra_pulses(-1, True):
                  - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - pull(1):
                - more_pistons(0):
                  - add(c):
                    - c
                - full_extend(1):
                  - extend(1, False):
                    - add(b):
                      - b
                    - add(a):
                      - a
                  - extra_pulses(1, False):
                - retract(-2):
                - full_row(-1):
                  - row_high(-1):
                    - full_extend(-1, False):
                      - extend(-1, False):
                        - add(b):
                          - b
                      - extra_pulses(-1, False):
                    - retract(-1):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
              - row_high(2, True):
                - full_extend(2, True):
                  - extend(2, True):
                    - more_obs(needs_parity=False):
                      - add(bobs, a, bobs):
                        - bobs a bobs
                    - extend(-1):
                      - add(b):
                        - b
                  - extra_pulses(2, True):
                    - add(b):
                      - b
                - retract(2):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(0):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - full_extend(0):
                      - extend(0, False):
                        - add(a):
                          - a
                      - extra_pulses(0, False):
                    - retract(-3):
                    - full_row(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - row_high(1, True):
                    - full_extend(1, True):
                      - extend(1, True):
                        - add(a):
                          - a
                      - extra_pulses(1, True):
                    - retract(1):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
        - less_obs():
          - add(sto, sto):
            - sto sto
        - pull(5):
          - more_pistons(2):
            - add(e):
              - e
          - full_extend(5):
            - extend(5, False):
              - add(b):
                - b
              - more_obs(needs_parity=True):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(1):
                - add(d):
                  - d
              - extend(2):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - extend(-1):
                  - add(b):
                    - b
            - extra_pulses(5, False):
              - add(b, b, b, b, b):
                - b b b b b
          - retract(2):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - pull(0):
              - more_pistons(0):
                - add(c):
                  - c
              - full_extend(0):
                - extend(0, False):
                  - add(a):
                    - a
                - extra_pulses(0, False):
              - retract(-3):
              - full_row(-2):
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - shift_pistons(1):
              - add(d, c):
                - d c
            - row_high(1, True):
              - full_extend(1, True):
                - extend(1, True):
                  - add(a):
                    - a
                - extra_pulses(1, True):
              - retract(1):
                - pull(-1):
                  - add(b):
                    - b
                - row_high(0, True):
                  - full_extend(0, True):
                    - extend(0, True):
                      - add(a):
                        - a
                    - extra_pulses(0, True):
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
          - less_obs():
            - add(sto, sto):
              - sto sto
          - full_row(3):
            - more_pistons(1):
              - add(d):
                - d
            - row_high(3):
              - full_extend(3, False):
                - extend(3, False):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(0):
                    - add(c):
                      - c
                  - extend(0):
                    - add(a):
                      - a
                - extra_pulses(3, False):
                  - add(a):
                    - a
              - retract(3):
                - retract(0, no_recurse_first=False):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(1):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - full_extend(1):
                    - extend(1, False):
                      - add(b):
                        - b
                      - add(a):
                        - a
                    - extra_pulses(1, False):
                  - retract(-2):
                  - full_row(-1):
                    - row_high(-1):
                      - full_extend(-1, False):
                        - extend(-1, False):
                          - add(b):
                            - b
                        - extra_pulses(-1, False):
                      - retract(-1):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - row_high(2, True):
                  - full_extend(2, True):
                    - extend(2, True):
                      - more_obs(needs_parity=False):
                        - add(bobs, bobs):
                          - bobs bobs
                      - extend(-1):
                        - add(b):
                          - b
                    - extra_pulses(2, True):
                      - add(b):
                        - b
                  - retract(2):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(0):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - full_extend(0):
                        - extend(0, False):
                          - add(a):
                            - a
                        - extra_pulses(0, False):
                      - retract(-3):
                      - full_row(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - shift_pistons(1):
                      - add(d, c):
                        - d c
                    - row_high(1, True):
                      - full_extend(1, True):
                        - extend(1, True):
                          - add(a):
                            - a
                        - extra_pulses(1, True):
                      - retract(1):
                        - pull(-1):
                          - add(b):
                            - b
                        - row_high(0, True):
                          - full_extend(0, True):
                            - extend(0, True):
                              - add(a):
                                - a
                            - extra_pulses(0, True):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
          - shift_pistons(2):
            - add(e, d):
              - e d
          - shift_pistons(1):
            - add(d, c):
              - d c
          - shift_pistons(0):
            - add(c, b):
              - c b
        - row_high(6, True):
          - full_extend(6, True):
            - extend(6, True):
              - more_obs(needs_parity=False):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(1):
                - add(d):
                  - d
              - extend(3):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - more_pistons(0):
                  - add(c):
                    - c
                - extend(0):
                  - add(a):
                    - a
            - extra_pulses(6, True):
              - add(a, a, a):
                - a a a
          - retract(6):
            - retract(3, no_recurse_first=False):
              - retract(0, no_recurse_first=False):
                - pull(-2):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
                - row_high(-1, True):
                  - full_extend(-1, True):
                    - extend(-1, True):
                      - add(b):
                        - b
                    - extra_pulses(-1, True):
                  - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - pull(1):
                - more_pistons(0):
                  - add(c):
                    - c
                - full_extend(1):
                  - extend(1, False):
                    - add(b):
                      - b
                    - add(a):
                      - a
                  - extra_pulses(1, False):
                - retract(-2):
                - full_row(-1):
                  - row_high(-1):
                    - full_extend(-1, False):
                      - extend(-1, False):
                        - add(b):
                          - b
                      - extra_pulses(-1, False):
                    - retract(-1):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
              - row_high(2, True):
                - full_extend(2, True):
                  - extend(2, True):
                    - more_obs(needs_parity=False):
                      - add(bobs, a, bobs):
                        - bobs a bobs
                    - extend(-1):
                      - add(b):
                        - b
                  - extra_pulses(2, True):
                    - add(b):
                      - b
                - retract(2):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(0):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - full_extend(0):
                      - extend(0, False):
                        - add(a):
                          - a
                      - extra_pulses(0, False):
                    - retract(-3):
                    - full_row(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - row_high(1, True):
                    - full_extend(1, True):
                      - extend(1, True):
                        - add(a):
                          - a
                      - extra_pulses(1, True):
                    - retract(1):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - pull(4):
              - more_pistons(2):
                - add(e):
                  - e
              - full_extend(4):
                - extend(4, False):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(0):
                    - add(c):
                      - c
                  - extend(1):
                    - add(b):
                      - b
                    - add(a):
                      - a
                - extra_pulses(4, False):
                  - add(a):
                    - a
              - retract(1):
                - pull(-1):
                  - add(b):
                    - b
                - row_high(0, True):
                  - full_extend(0, True):
                    - extend(0, True):
                      - add(a):
                        - a
                    - extra_pulses(0, True):
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - full_row(2):
                - more_pistons(1):
                  - add(d):
                    - d
                - row_high(2):
                  - full_extend(2, False):
                    - extend(2, False):
                      - add(b):
                        - b
                      - more_obs(needs_parity=True):
                        - add(bobs, bobs):
                          - bobs bobs
                      - extend(-1):
                        - add(b):
                          - b
                    - extra_pulses(2, False):
                      - add(b):
                        - b
                  - retract(2):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(0):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - full_extend(0):
                        - extend(0, False):
                          - add(a):
                            - a
                        - extra_pulses(0, False):
                      - retract(-3):
                      - full_row(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - shift_pistons(1):
                      - add(d, c):
                        - d c
                    - row_high(1, True):
                      - full_extend(1, True):
                        - extend(1, True):
                          - add(a):
                            - a
                        - extra_pulses(1, True):
                      - retract(1):
                        - pull(-1):
                          - add(b):
                            - b
                        - row_high(0, True):
                          - full_extend(0, True):
                            - extend(0, True):
                              - add(a):
                                - a
                            - extra_pulses(0, True):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
              - shift_pistons(2):
                - add(e, d):
                  - e d
              - shift_pistons(1):
                - add(d, c):
                  - d c
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - shift_pistons(3):
              - add(fold1):
                - fold1
            - row_high(5, True):
              - full_extend(5, True):
                - extend(5, True):
                  - more_obs(needs_parity=False):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(1):
                    - add(d):
                      - d
                  - extend(2):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - extend(-1):
                      - add(b):
                        - b
                - extra_pulses(5, True):
                  - add(b, b, b):
                    - b b b
              - retract(5):
                - retract(2, no_recurse_first=False):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(0):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - full_extend(0):
                      - extend(0, False):
                        - add(a):
                          - a
                      - extra_pulses(0, False):
                    - retract(-3):
                    - full_row(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - row_high(1, True):
                    - full_extend(1, True):
                      - extend(1, True):
                        - add(a):
                          - a
                      - extra_pulses(1, True):
                    - retract(1):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(3):
                  - more_pistons(1):
                    - add(d):
                      - d
                  - full_extend(3):
                    - extend(3, False):
                      - add(b):
                        - b
                      - more_obs(needs_parity=True):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(0):
                        - add(c):
                          - c
                      - extend(0):
                        - add(a):
                          - a
                    - extra_pulses(3, False):
                      - add(a):
                        - a
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - full_row(1):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - row_high(1):
                      - full_extend(1, False):
                        - extend(1, False):
                          - add(b):
                            - b
                          - add(a):
                            - a
                        - extra_pulses(1, False):
                      - retract(1):
                        - pull(-1):
                          - add(b):
                            - b
                        - row_high(0, True):
                          - full_extend(0, True):
                            - extend(0, True):
                              - add(a):
                                - a
                            - extra_pulses(0, True):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - row_high(4, True):
                  - full_extend(4, True):
                    - extend(4, True):
                      - more_obs(needs_parity=False):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(0):
                        - add(c):
                          - c
                      - extend(1):
                        - add(b):
                          - b
                        - add(a):
                          - a
                    - extra_pulses(4, True):
                      - add(a):
                        - a
                  - retract(4):
                    - retract(1, no_recurse_first=False):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(2):
                      - more_pistons(1):
                        - add(d):
                          - d
                      - full_extend(2):
                        - extend(2, False):
                          - add(b):
                            - b
                          - more_obs(needs_parity=True):
                            - add(bobs, bobs):
                              - bobs bobs
                          - extend(-1):
                            - add(b):
                              - b
                        - extra_pulses(2, False):
                          - add(b):
                            - b
                      - retract(-1):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - full_row(0):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - row_high(0):
                          - full_extend(0, False):
                            - extend(0, False):
                              - add(a):
                                - a
                            - extra_pulses(0, False):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
                      - shift_pistons(1):
                        - add(d, c):
                          - d c
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - shift_pistons(2):
                      - add(e, d):
                        - e d
                    - row_high(3, True):
                      - full_extend(3, True):
                        - extend(3, True):
                          - more_obs(needs_parity=False):
                            - add(bobs, bobs):
                              - bobs bobs
                          - more_pistons(0):
                            - add(c):
                              - c
                          - extend(0):
                            - add(a):
                              - a
                        - extra_pulses(3, True):
                          - add(a):
                            - a
                      - retract(3):
                        - retract(0, no_recurse_first=False):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                        - less_obs():
                          - add(sto, sto):
                            - sto sto
                        - pull(1):
                          - more_pistons(0):
                            - add(c):
                              - c
                          - full_extend(1):
                            - extend(1, False):
                              - add(b):
                                - b
                              - add(a):
                                - a
                            - extra_pulses(1, False):
                          - retract(-2):
                          - full_row(-1):
                            - row_high(-1):
                              - full_extend(-1, False):
                                - extend(-1, False):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, False):
                              - retract(-1):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                        - row_high(2, True):
                          - full_extend(2, True):
                            - extend(2, True):
                              - more_obs(needs_parity=False):
                                - add(bobs, bobs):
                                  - bobs bobs
                              - extend(-1):
                                - add(b):
                                  - b
                            - extra_pulses(2, True):
                              - add(b):
                                - b
                          - retract(2):
                            - less_obs():
                              - add(sto, sto):
                                - sto sto
                            - pull(0):
                              - more_pistons(0):
                                - add(c):
                                  - c
                              - full_extend(0):
                                - extend(0, False):
                                  - add(a):
                                    - a
                                - extra_pulses(0, False):
                              - retract(-3):
                              - full_row(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                            - shift_pistons(1):
                              - add(d, c):
                                - d c
                            - row_high(1, True):
                              - full_extend(1, True):
                                - extend(1, True):
                                  - add(a):
                                    - a
                                - extra_pulses(1, True):
                              - retract(1):
                                - pull(-1):
                                  - add(b):
                                    - b
                                - row_high(0, True):
                                  - full_extend(0, True):
                                    - extend(0, True):
                                      - add(a):
                                        - a
                                    - extra_pulses(0, True):
                                  - retract(0):
                                    - pull(-2):
                                    - shift_pistons(0):
                                      - add(c, b):
                                        - c b
                                    - row_high(-1, True):
                                      - full_extend(-1, True):
                                        - extend(-1, True):
                                          - add(b):
                                            - b
                                        - extra_pulses(-1, True):
                                      - retract(-1):
  - jank_7():
    - storage_moves(a, worm, b, a, sto, worm, wait, wait, wait, wait, wait):
  - full_row(8):
    - more_pistons(4):
      - add(e, fold1):
        - e fold1
    - row_high(8):
      - full_extend(8, False):
        - extend(8, False):
          - add(b):
            - b
          - more_obs(needs_parity=True):
            - add(bobs, bobs):
              - bobs bobs
          - more_pistons(2):
            - add(d, fold2):
              - d fold2
          - extend(5):
            - add(b):
              - b
            - more_obs(needs_parity=True):
              - add(bobs, sto, bobs, bobs, a, bobs):
                - bobs sto bobs bobs a bobs
            - more_pistons(1):
              - add(d):
                - d
            - extend(2):
              - add(b):
                - b
              - more_obs(needs_parity=True):
                - add(sto):
                  - sto
              - extend(-1):
                - add(b):
                  - b
        - extra_pulses(8, False):
          - add(a, a, a, a, a, a, a, a):
            - a a a a a a a a
      - retract(8):
        - retract(5, no_recurse_first=False):
          - retract(2, no_recurse_first=False):
            - less_obs():
              - add(b, sto):
                - b sto
            - pull(0):
              - more_pistons(0):
                - add(c):
                  - c
              - full_extend(0):
                - extend(0, False):
                  - add(a):
                    - a
                - extra_pulses(0, False):
              - retract(-3):
              - full_row(-2):
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - shift_pistons(1):
              - add(d, c):
                - d c
            - row_high(1, True):
              - full_extend(1, True):
                - extend(1, True):
                  - add(a):
                    - a
                - extra_pulses(1, True):
              - retract(1):
                - pull(-1):
                  - add(b):
                    - b
                - row_high(0, True):
                  - full_extend(0, True):
                    - extend(0, True):
                      - add(a):
                        - a
                    - extra_pulses(0, True):
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
          - less_obs():
            - add(sto, sto):
              - sto sto
          - pull(3):
            - more_pistons(1):
              - add(d):
                - d
            - full_extend(3):
              - extend(3, False):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - more_pistons(0):
                  - add(c):
                    - c
                - extend(0):
                  - add(a):
                    - a
              - extra_pulses(3, False):
                - add(a):
                  - a
            - retract(0):
              - pull(-2):
              - shift_pistons(0):
                - add(c, b):
                  - c b
              - row_high(-1, True):
                - full_extend(-1, True):
                  - extend(-1, True):
                    - add(b):
                      - b
                  - extra_pulses(-1, True):
                - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - full_row(1):
              - more_pistons(0):
                - add(c):
                  - c
              - row_high(1):
                - full_extend(1, False):
                  - extend(1, False):
                    - add(b):
                      - b
                    - add(a):
                      - a
                  - extra_pulses(1, False):
                - retract(1):
                  - pull(-1):
                    - add(b):
                      - b
                  - row_high(0, True):
                    - full_extend(0, True):
                      - extend(0, True):
                        - add(a):
                          - a
                      - extra_pulses(0, True):
                    - retract(0):
                      - pull(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                      - row_high(-1, True):
                        - full_extend(-1, True):
                          - extend(-1, True):
                            - add(b):
                              - b
                          - extra_pulses(-1, True):
                        - retract(-1):
            - shift_pistons(1):
              - add(d, c):
                - d c
            - shift_pistons(0):
              - add(c, b):
                - c b
          - row_high(4, True):
            - full_extend(4, True):
              - extend(4, True):
                - more_obs(needs_parity=False):
                  - add(bobs, a, bobs):
                    - bobs a bobs
                - more_pistons(0):
                  - add(c):
                    - c
                - extend(1):
                  - add(b):
                    - b
                  - add(a):
                    - a
              - extra_pulses(4, True):
                - add(a):
                  - a
            - retract(4):
              - retract(1, no_recurse_first=False):
                - pull(-1):
                  - add(b):
                    - b
                - row_high(0, True):
                  - full_extend(0, True):
                    - extend(0, True):
                      - add(a):
                        - a
                    - extra_pulses(0, True):
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - pull(2):
                - more_pistons(1):
                  - add(d):
                    - d
                - full_extend(2):
                  - extend(2, False):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - extend(-1):
                      - add(b):
                        - b
                  - extra_pulses(2, False):
                    - add(b):
                      - b
                - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - full_row(0):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - row_high(0):
                    - full_extend(0, False):
                      - extend(0, False):
                        - add(a):
                          - a
                      - extra_pulses(0, False):
                    - retract(0):
                      - pull(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                      - row_high(-1, True):
                        - full_extend(-1, True):
                          - extend(-1, True):
                            - add(b):
                              - b
                          - extra_pulses(-1, True):
                        - retract(-1):
                - shift_pistons(1):
                  - add(d, c):
                    - d c
                - shift_pistons(0):
                  - add(c, b):
                    - c b
              - shift_pistons(2):
                - add(fold2):
                  - fold2
              - row_high(3, True):
                - full_extend(3, True):
                  - extend(3, True):
                    - more_obs(needs_parity=False):
                      - add(bobs, a, bobs):
                        - bobs a bobs
                    - more_pistons(0):
                      - add(c):
                        - c
                    - extend(0):
                      - add(a):
                        - a
                  - extra_pulses(3, True):
                    - add(a):
                      - a
                - retract(3):
                  - retract(0, no_recurse_first=False):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(1):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - full_extend(1):
                      - extend(1, False):
                        - add(b):
                          - b
                        - add(a):
                          - a
                      - extra_pulses(1, False):
                    - retract(-2):
                    - full_row(-1):
                      - row_high(-1):
                        - full_extend(-1, False):
                          - extend(-1, False):
                            - add(b):
                              - b
                          - extra_pulses(-1, False):
                        - retract(-1):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - row_high(2, True):
                    - full_extend(2, True):
                      - extend(2, True):
                        - more_obs(needs_parity=False):
                          - add(bobs, a, bobs):
                            - bobs a bobs
                        - extend(-1):
                          - add(b):
                            - b
                      - extra_pulses(2, True):
                        - add(b):
                          - b
                    - retract(2):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - pull(0):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - full_extend(0):
                          - extend(0, False):
                            - add(a):
                              - a
                          - extra_pulses(0, False):
                        - retract(-3):
                        - full_row(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                      - shift_pistons(1):
                        - add(d, c):
                          - d c
                      - row_high(1, True):
                        - full_extend(1, True):
                          - extend(1, True):
                            - add(a):
                              - a
                          - extra_pulses(1, True):
                        - retract(1):
                          - pull(-1):
                            - add(b):
                              - b
                          - row_high(0, True):
                            - full_extend(0, True):
                              - extend(0, True):
                                - add(a):
                                  - a
                              - extra_pulses(0, True):
                            - retract(0):
                              - pull(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                              - row_high(-1, True):
                                - full_extend(-1, True):
                                  - extend(-1, True):
                                    - add(b):
                                      - b
                                  - extra_pulses(-1, True):
                                - retract(-1):
        - less_obs():
          - add(sto, sto):
            - sto sto
        - pull(6):
          - more_pistons(3):
            - add(e):
              - e
          - full_extend(6):
            - extend(6, False):
              - add(b):
                - b
              - more_obs(needs_parity=True):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(1):
                - add(d):
                  - d
              - extend(3):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - more_pistons(0):
                  - add(c):
                    - c
                - extend(0):
                  - add(a):
                    - a
            - extra_pulses(6, False):
              - add(a, a, a, a, a, a, a):
                - a a a a a a a
          - retract(3):
            - retract(0, no_recurse_first=False):
              - pull(-2):
              - shift_pistons(0):
                - add(c, b):
                  - c b
              - row_high(-1, True):
                - full_extend(-1, True):
                  - extend(-1, True):
                    - add(b):
                      - b
                  - extra_pulses(-1, True):
                - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - pull(1):
              - more_pistons(0):
                - add(c):
                  - c
              - full_extend(1):
                - extend(1, False):
                  - add(b):
                    - b
                  - add(a):
                    - a
                - extra_pulses(1, False):
              - retract(-2):
              - full_row(-1):
                - row_high(-1):
                  - full_extend(-1, False):
                    - extend(-1, False):
                      - add(b):
                        - b
                    - extra_pulses(-1, False):
                  - retract(-1):
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - row_high(2, True):
              - full_extend(2, True):
                - extend(2, True):
                  - more_obs(needs_parity=False):
                    - add(bobs, a, bobs):
                      - bobs a bobs
                  - extend(-1):
                    - add(b):
                      - b
                - extra_pulses(2, True):
                  - add(b):
                    - b
              - retract(2):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(0):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - full_extend(0):
                    - extend(0, False):
                      - add(a):
                        - a
                    - extra_pulses(0, False):
                  - retract(-3):
                  - full_row(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - shift_pistons(1):
                  - add(d, c):
                    - d c
                - row_high(1, True):
                  - full_extend(1, True):
                    - extend(1, True):
                      - add(a):
                        - a
                    - extra_pulses(1, True):
                  - retract(1):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
          - less_obs():
            - add(sto, sto):
              - sto sto
          - full_row(4):
            - more_pistons(2):
              - add(d, fold2):
                - d fold2
            - row_high(4):
              - full_extend(4, False):
                - extend(4, False):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(0):
                    - add(c):
                      - c
                  - extend(1):
                    - add(b):
                      - b
                    - add(a):
                      - a
                - extra_pulses(4, False):
                  - add(a):
                    - a
              - retract(4):
                - retract(1, no_recurse_first=False):
                  - pull(-1):
                    - add(b):
                      - b
                  - row_high(0, True):
                    - full_extend(0, True):
                      - extend(0, True):
                        - add(a):
                          - a
                      - extra_pulses(0, True):
                    - retract(0):
                      - pull(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                      - row_high(-1, True):
                        - full_extend(-1, True):
                          - extend(-1, True):
                            - add(b):
                              - b
                          - extra_pulses(-1, True):
                        - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(2):
                  - more_pistons(1):
                    - add(d):
                      - d
                  - full_extend(2):
                    - extend(2, False):
                      - add(b):
                        - b
                      - more_obs(needs_parity=True):
                        - add(bobs, bobs):
                          - bobs bobs
                      - extend(-1):
                        - add(b):
                          - b
                    - extra_pulses(2, False):
                      - add(b):
                        - b
                  - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - full_row(0):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - row_high(0):
                      - full_extend(0, False):
                        - extend(0, False):
                          - add(a):
                            - a
                        - extra_pulses(0, False):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - shift_pistons(2):
                  - add(fold2):
                    - fold2
                - row_high(3, True):
                  - full_extend(3, True):
                    - extend(3, True):
                      - more_obs(needs_parity=False):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(0):
                        - add(c):
                          - c
                      - extend(0):
                        - add(a):
                          - a
                    - extra_pulses(3, True):
                      - add(a):
                        - a
                  - retract(3):
                    - retract(0, no_recurse_first=False):
                      - pull(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                      - row_high(-1, True):
                        - full_extend(-1, True):
                          - extend(-1, True):
                            - add(b):
                              - b
                          - extra_pulses(-1, True):
                        - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(1):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - full_extend(1):
                        - extend(1, False):
                          - add(b):
                            - b
                          - add(a):
                            - a
                        - extra_pulses(1, False):
                      - retract(-2):
                      - full_row(-1):
                        - row_high(-1):
                          - full_extend(-1, False):
                            - extend(-1, False):
                              - add(b):
                                - b
                            - extra_pulses(-1, False):
                          - retract(-1):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - row_high(2, True):
                      - full_extend(2, True):
                        - extend(2, True):
                          - more_obs(needs_parity=False):
                            - add(bobs, bobs):
                              - bobs bobs
                          - extend(-1):
                            - add(b):
                              - b
                        - extra_pulses(2, True):
                          - add(b):
                            - b
                      - retract(2):
                        - less_obs():
                          - add(sto, sto):
                            - sto sto
                        - pull(0):
                          - more_pistons(0):
                            - add(c):
                              - c
                          - full_extend(0):
                            - extend(0, False):
                              - add(a):
                                - a
                            - extra_pulses(0, False):
                          - retract(-3):
                          - full_row(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                        - shift_pistons(1):
                          - add(d, c):
                            - d c
                        - row_high(1, True):
                          - full_extend(1, True):
                            - extend(1, True):
                              - add(a):
                                - a
                            - extra_pulses(1, True):
                          - retract(1):
                            - pull(-1):
                              - add(b):
                                - b
                            - row_high(0, True):
                              - full_extend(0, True):
                                - extend(0, True):
                                  - add(a):
                                    - a
                                - extra_pulses(0, True):
                              - retract(0):
                                - pull(-2):
                                - shift_pistons(0):
                                  - add(c, b):
                                    - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True):
                                    - extend(-1, True):
                                      - add(b):
                                        - b
                                    - extra_pulses(-1, True):
                                  - retract(-1):
          - shift_pistons(3):
            - add(e, d, fold2):
              - e d fold2
          - shift_pistons(2):
          - shift_pistons(1):
            - add(d, c):
              - d c
          - shift_pistons(0):
            - add(c, b):
              - c b
        - shift_pistons(4):
        - row_high(7, True):
          - full_extend(7, True):
            - extend(7, True):
              - more_obs(needs_parity=False):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(2):
                - add(e):
                  - e
              - extend(4):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - more_pistons(0):
                  - add(c):
                    - c
                - extend(1):
                  - add(b):
                    - b
                  - add(a):
                    - a
            - extra_pulses(7, True):
              - add(a, a, a):
                - a a a
          - retract(7):
            - retract(4, no_recurse_first=False):
              - retract(1, no_recurse_first=False):
                - pull(-1):
                  - add(b):
                    - b
                - row_high(0, True):
                  - full_extend(0, True):
                    - extend(0, True):
                      - add(a):
                        - a
                    - extra_pulses(0, True):
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - pull(2):
                - more_pistons(1):
                  - add(d):
                    - d
                - full_extend(2):
                  - extend(2, False):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - extend(-1):
                      - add(b):
                        - b
                  - extra_pulses(2, False):
                    - add(b):
                      - b
                - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - full_row(0):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - row_high(0):
                    - full_extend(0, False):
                      - extend(0, False):
                        - add(a):
                          - a
                      - extra_pulses(0, False):
                    - retract(0):
                      - pull(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                      - row_high(-1, True):
                        - full_extend(-1, True):
                          - extend(-1, True):
                            - add(b):
                              - b
                          - extra_pulses(-1, True):
                        - retract(-1):
                - shift_pistons(1):
                  - add(d, c):
                    - d c
                - shift_pistons(0):
                  - add(c, b):
                    - c b
              - shift_pistons(2):
                - add(e, d):
                  - e d
              - row_high(3, True):
                - full_extend(3, True):
                  - extend(3, True):
                    - more_obs(needs_parity=False):
                      - add(bobs, a, bobs):
                        - bobs a bobs
                    - more_pistons(0):
                      - add(c):
                        - c
                    - extend(0):
                      - add(a):
                        - a
                  - extra_pulses(3, True):
                    - add(a):
                      - a
                - retract(3):
                  - retract(0, no_recurse_first=False):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(1):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - full_extend(1):
                      - extend(1, False):
                        - add(b):
                          - b
                        - add(a):
                          - a
                      - extra_pulses(1, False):
                    - retract(-2):
                    - full_row(-1):
                      - row_high(-1):
                        - full_extend(-1, False):
                          - extend(-1, False):
                            - add(b):
                              - b
                          - extra_pulses(-1, False):
                        - retract(-1):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - row_high(2, True):
                    - full_extend(2, True):
                      - extend(2, True):
                        - more_obs(needs_parity=False):
                          - add(bobs, a, bobs):
                            - bobs a bobs
                        - extend(-1):
                          - add(b):
                            - b
                      - extra_pulses(2, True):
                        - add(b):
                          - b
                    - retract(2):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - pull(0):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - full_extend(0):
                          - extend(0, False):
                            - add(a):
                              - a
                          - extra_pulses(0, False):
                        - retract(-3):
                        - full_row(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                      - shift_pistons(1):
                        - add(d, c):
                          - d c
                      - row_high(1, True):
                        - full_extend(1, True):
                          - extend(1, True):
                            - add(a):
                              - a
                          - extra_pulses(1, True):
                        - retract(1):
                          - pull(-1):
                            - add(b):
                              - b
                          - row_high(0, True):
                            - full_extend(0, True):
                              - extend(0, True):
                                - add(a):
                                  - a
                              - extra_pulses(0, True):
                            - retract(0):
                              - pull(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                              - row_high(-1, True):
                                - full_extend(-1, True):
                                  - extend(-1, True):
                                    - add(b):
                                      - b
                                  - extra_pulses(-1, True):
                                - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - pull(5):
              - more_pistons(2):
                - add(e):
                  - e
              - full_extend(5):
                - extend(5, False):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(1):
                    - add(d):
                      - d
                  - extend(2):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - extend(-1):
                      - add(b):
                        - b
                - extra_pulses(5, False):
                  - add(b, b, b, b, b):
                    - b b b b b
              - retract(2):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(0):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - full_extend(0):
                    - extend(0, False):
                      - add(a):
                        - a
                    - extra_pulses(0, False):
                  - retract(-3):
                  - full_row(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - shift_pistons(1):
                  - add(d, c):
                    - d c
                - row_high(1, True):
                  - full_extend(1, True):
                    - extend(1, True):
                      - add(a):
                        - a
                    - extra_pulses(1, True):
                  - retract(1):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - full_row(3):
                - more_pistons(1):
                  - add(d):
                    - d
                - row_high(3):
                  - full_extend(3, False):
                    - extend(3, False):
                      - add(b):
                        - b
                      - more_obs(needs_parity=True):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(0):
                        - add(c):
                          - c
                      - extend(0):
                        - add(a):
                          - a
                    - extra_pulses(3, False):
                      - add(a):
                        - a
                  - retract(3):
                    - retract(0, no_recurse_first=False):
                      - pull(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                      - row_high(-1, True):
                        - full_extend(-1, True):
                          - extend(-1, True):
                            - add(b):
                              - b
                          - extra_pulses(-1, True):
                        - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(1):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - full_extend(1):
                        - extend(1, False):
                          - add(b):
                            - b
                          - add(a):
                            - a
                        - extra_pulses(1, False):
                      - retract(-2):
                      - full_row(-1):
                        - row_high(-1):
                          - full_extend(-1, False):
                            - extend(-1, False):
                              - add(b):
                                - b
                            - extra_pulses(-1, False):
                          - retract(-1):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - row_high(2, True):
                      - full_extend(2, True):
                        - extend(2, True):
                          - more_obs(needs_parity=False):
                            - add(bobs, bobs):
                              - bobs bobs
                          - extend(-1):
                            - add(b):
                              - b
                        - extra_pulses(2, True):
                          - add(b):
                            - b
                      - retract(2):
                        - less_obs():
                          - add(sto, sto):
                            - sto sto
                        - pull(0):
                          - more_pistons(0):
                            - add(c):
                              - c
                          - full_extend(0):
                            - extend(0, False):
                              - add(a):
                                - a
                            - extra_pulses(0, False):
                          - retract(-3):
                          - full_row(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                        - shift_pistons(1):
                          - add(d, c):
                            - d c
                        - row_high(1, True):
                          - full_extend(1, True):
                            - extend(1, True):
                              - add(a):
                                - a
                            - extra_pulses(1, True):
                          - retract(1):
                            - pull(-1):
                              - add(b):
                                - b
                            - row_high(0, True):
                              - full_extend(0, True):
                                - extend(0, True):
                                  - add(a):
                                    - a
                                - extra_pulses(0, True):
                              - retract(0):
                                - pull(-2):
                                - shift_pistons(0):
                                  - add(c, b):
                                    - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True):
                                    - extend(-1, True):
                                      - add(b):
                                        - b
                                    - extra_pulses(-1, True):
                                  - retract(-1):
              - shift_pistons(2):
                - add(e, d):
                  - e d
              - shift_pistons(1):
                - add(d, c):
                  - d c
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - row_high(6, True):
              - full_extend(6, True):
                - extend(6, True):
                  - more_obs(needs_parity=False):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(1):
                    - add(d):
                      - d
                  - extend(3):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - more_pistons(0):
                      - add(c):
                        - c
                    - extend(0):
                      - add(a):
                        - a
                - extra_pulses(6, True):
                  - add(a, a, a):
                    - a a a
              - retract(6):
                - retract(3, no_recurse_first=False):
                  - retract(0, no_recurse_first=False):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(1):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - full_extend(1):
                      - extend(1, False):
                        - add(b):
                          - b
                        - add(a):
                          - a
                      - extra_pulses(1, False):
                    - retract(-2):
                    - full_row(-1):
                      - row_high(-1):
                        - full_extend(-1, False):
                          - extend(-1, False):
                            - add(b):
                              - b
                          - extra_pulses(-1, False):
                        - retract(-1):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - row_high(2, True):
                    - full_extend(2, True):
                      - extend(2, True):
                        - more_obs(needs_parity=False):
                          - add(bobs, a, bobs):
                            - bobs a bobs
                        - extend(-1):
                          - add(b):
                            - b
                      - extra_pulses(2, True):
                        - add(b):
                          - b
                    - retract(2):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - pull(0):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - full_extend(0):
                          - extend(0, False):
                            - add(a):
                              - a
                          - extra_pulses(0, False):
                        - retract(-3):
                        - full_row(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                      - shift_pistons(1):
                        - add(d, c):
                          - d c
                      - row_high(1, True):
                        - full_extend(1, True):
                          - extend(1, True):
                            - add(a):
                              - a
                          - extra_pulses(1, True):
                        - retract(1):
                          - pull(-1):
                            - add(b):
                              - b
                          - row_high(0, True):
                            - full_extend(0, True):
                              - extend(0, True):
                                - add(a):
                                  - a
                              - extra_pulses(0, True):
                            - retract(0):
                              - pull(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                              - row_high(-1, True):
                                - full_extend(-1, True):
                                  - extend(-1, True):
                                    - add(b):
                                      - b
                                  - extra_pulses(-1, True):
                                - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(4):
                  - more_pistons(2):
                    - add(e):
                      - e
                  - full_extend(4):
                    - extend(4, False):
                      - add(b):
                        - b
                      - more_obs(needs_parity=True):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(0):
                        - add(c):
                          - c
                      - extend(1):
                        - add(b):
                          - b
                        - add(a):
                          - a
                    - extra_pulses(4, False):
                      - add(a):
                        - a
                  - retract(1):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - full_row(2):
                    - more_pistons(1):
                      - add(d):
                        - d
                    - row_high(2):
                      - full_extend(2, False):
                        - extend(2, False):
                          - add(b):
                            - b
                          - more_obs(needs_parity=True):
                            - add(bobs, bobs):
                              - bobs bobs
                          - extend(-1):
                            - add(b):
                              - b
                        - extra_pulses(2, False):
                          - add(b):
                            - b
                      - retract(2):
                        - less_obs():
                          - add(sto, sto):
                            - sto sto
                        - pull(0):
                          - more_pistons(0):
                            - add(c):
                              - c
                          - full_extend(0):
                            - extend(0, False):
                              - add(a):
                                - a
                            - extra_pulses(0, False):
                          - retract(-3):
                          - full_row(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                        - shift_pistons(1):
                          - add(d, c):
                            - d c
                        - row_high(1, True):
                          - full_extend(1, True):
                            - extend(1, True):
                              - add(a):
                                - a
                            - extra_pulses(1, True):
                          - retract(1):
                            - pull(-1):
                              - add(b):
                                - b
                            - row_high(0, True):
                              - full_extend(0, True):
                                - extend(0, True):
                                  - add(a):
                                    - a
                                - extra_pulses(0, True):
                              - retract(0):
                                - pull(-2):
                                - shift_pistons(0):
                                  - add(c, b):
                                    - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True):
                                    - extend(-1, True):
                                      - add(b):
                                        - b
                                    - extra_pulses(-1, True):
                                  - retract(-1):
                  - shift_pistons(2):
                    - add(e, d):
                      - e d
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - shift_pistons(3):
                  - add(fold1):
                    - fold1
                - row_high(5, True):
                  - full_extend(5, True):
                    - extend(5, True):
                      - more_obs(needs_parity=False):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(1):
                        - add(d):
                          - d
                      - extend(2):
                        - add(b):
                          - b
                        - more_obs(needs_parity=True):
                          - add(bobs, sto, bobs, bobs, a, bobs):
                            - bobs sto bobs bobs a bobs
                        - extend(-1):
                          - add(b):
                            - b
                    - extra_pulses(5, True):
                      - add(b, b, b):
                        - b b b
                  - retract(5):
                    - retract(2, no_recurse_first=False):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - pull(0):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - full_extend(0):
                          - extend(0, False):
                            - add(a):
                              - a
                          - extra_pulses(0, False):
                        - retract(-3):
                        - full_row(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                      - shift_pistons(1):
                        - add(d, c):
                          - d c
                      - row_high(1, True):
                        - full_extend(1, True):
                          - extend(1, True):
                            - add(a):
                              - a
                          - extra_pulses(1, True):
                        - retract(1):
                          - pull(-1):
                            - add(b):
                              - b
                          - row_high(0, True):
                            - full_extend(0, True):
                              - extend(0, True):
                                - add(a):
                                  - a
                              - extra_pulses(0, True):
                            - retract(0):
                              - pull(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                              - row_high(-1, True):
                                - full_extend(-1, True):
                                  - extend(-1, True):
                                    - add(b):
                                      - b
                                  - extra_pulses(-1, True):
                                - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(3):
                      - more_pistons(1):
                        - add(d):
                          - d
                      - full_extend(3):
                        - extend(3, False):
                          - add(b):
                            - b
                          - more_obs(needs_parity=True):
                            - add(bobs, bobs):
                              - bobs bobs
                          - more_pistons(0):
                            - add(c):
                              - c
                          - extend(0):
                            - add(a):
                              - a
                        - extra_pulses(3, False):
                          - add(a):
                            - a
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - full_row(1):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - row_high(1):
                          - full_extend(1, False):
                            - extend(1, False):
                              - add(b):
                                - b
                              - add(a):
                                - a
                            - extra_pulses(1, False):
                          - retract(1):
                            - pull(-1):
                              - add(b):
                                - b
                            - row_high(0, True):
                              - full_extend(0, True):
                                - extend(0, True):
                                  - add(a):
                                    - a
                                - extra_pulses(0, True):
                              - retract(0):
                                - pull(-2):
                                - shift_pistons(0):
                                  - add(c, b):
                                    - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True):
                                    - extend(-1, True):
                                      - add(b):
                                        - b
                                    - extra_pulses(-1, True):
                                  - retract(-1):
                      - shift_pistons(1):
                        - add(d, c):
                          - d c
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - row_high(4, True):
                      - full_extend(4, True):
                        - extend(4, True):
                          - more_obs(needs_parity=False):
                            - add(bobs, bobs):
                              - bobs bobs
                          - more_pistons(0):
                            - add(c):
                              - c
                          - extend(1):
                            - add(b):
                              - b
                            - add(a):
                              - a
                        - extra_pulses(4, True):
                          - add(a):
                            - a
                      - retract(4):
                        - retract(1, no_recurse_first=False):
                          - pull(-1):
                            - add(b):
                              - b
                          - row_high(0, True):
                            - full_extend(0, True):
                              - extend(0, True):
                                - add(a):
                                  - a
                              - extra_pulses(0, True):
                            - retract(0):
                              - pull(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                              - row_high(-1, True):
                                - full_extend(-1, True):
                                  - extend(-1, True):
                                    - add(b):
                                      - b
                                  - extra_pulses(-1, True):
                                - retract(-1):
                        - less_obs():
                          - add(sto, sto):
                            - sto sto
                        - pull(2):
                          - more_pistons(1):
                            - add(d):
                              - d
                          - full_extend(2):
                            - extend(2, False):
                              - add(b):
                                - b
                              - more_obs(needs_parity=True):
                                - add(bobs, bobs):
                                  - bobs bobs
                              - extend(-1):
                                - add(b):
                                  - b
                            - extra_pulses(2, False):
                              - add(b):
                                - b
                          - retract(-1):
                          - less_obs():
                            - add(sto, sto):
                              - sto sto
                          - full_row(0):
                            - more_pistons(0):
                              - add(c):
                                - c
                            - row_high(0):
                              - full_extend(0, False):
                                - extend(0, False):
                                  - add(a):
                                    - a
                                - extra_pulses(0, False):
                              - retract(0):
                                - pull(-2):
                                - shift_pistons(0):
                                  - add(c, b):
                                    - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True):
                                    - extend(-1, True):
                                      - add(b):
                                        - b
                                    - extra_pulses(-1, True):
                                  - retract(-1):
                          - shift_pistons(1):
                            - add(d, c):
                              - d c
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                        - shift_pistons(2):
                          - add(e, d):
                            - e d
                        - row_high(3, True):
                          - full_extend(3, True):
                            - extend(3, True):
                              - more_obs(needs_parity=False):
                                - add(bobs, bobs):
                                  - bobs bobs
                              - more_pistons(0):
                                - add(c):
                                  - c
                              - extend(0):
                                - add(a):
                                  - a
                            - extra_pulses(3, True):
                              - add(a):
                                - a
                          - retract(3):
                            - retract(0, no_recurse_first=False):
                              - pull(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                              - row_high(-1, True):
                                - full_extend(-1, True):
                                  - extend(-1, True):
                                    - add(b):
                                      - b
                                  - extra_pulses(-1, True):
                                - retract(-1):
                            - less_obs():
                              - add(sto, sto):
                                - sto sto
                            - pull(1):
                              - more_pistons(0):
                                - add(c):
                                  - c
                              - full_extend(1):
                                - extend(1, False):
                                  - add(b):
                                    - b
                                  - add(a):
                                    - a
                                - extra_pulses(1, False):
                              - retract(-2):
                              - full_row(-1):
                                - row_high(-1):
                                  - full_extend(-1, False):
                                    - extend(-1, False):
                                      - add(b):
                                        - b
                                    - extra_pulses(-1, False):
                                  - retract(-1):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                            - row_high(2, True):
                              - full_extend(2, True):
                                - extend(2, True):
                                  - more_obs(needs_parity=False):
                                    - add(bobs, bobs):
                                      - bobs bobs
                                  - extend(-1):
                                    - add(b):
                                      - b
                                - extra_pulses(2, True):
                                  - add(b):
                                    - b
                              - retract(2):
                                - less_obs():
                                  - add(sto, sto):
                                    - sto sto
                                - pull(0):
                                  - more_pistons(0):
                                    - add(c):
                                      - c
                                  - full_extend(0):
                                    - extend(0, False):
                                      - add(a):
                                        - a
                                    - extra_pulses(0, False):
                                  - retract(-3):
                                  - full_row(-2):
                                  - shift_pistons(0):
                                    - add(c, b):
                                      - c b
                                - shift_pistons(1):
                                  - add(d, c):
                                    - d c
                                - row_high(1, True):
                                  - full_extend(1, True):
                                    - extend(1, True):
                                      - add(a):
                                        - a
                                    - extra_pulses(1, True):
                                  - retract(1):
                                    - pull(-1):
                                      - add(b):
                                        - b
                                    - row_high(0, True):
                                      - full_extend(0, True):
                                        - extend(0, True):
                                          - add(a):
                                            - a
                                        - extra_pulses(0, True):
                                      - retract(0):
                                        - pull(-2):
                                        - shift_pistons(0):
                                          - add(c, b):
                                            - c b
                                        - row_high(-1, True):
                                          - full_extend(-1, True):
                                            - extend(-1, True):
                                              - add(b):
                                                - b
                                            - extra_pulses(-1, True):
                                          - retract(-1):
  - storage_moves(a, sto):
  - full_row(9):
    - more_pistons(4):
      - add(e, fold1):
        - e fold1
    - row_high(9):
      - full_extend(9, False):
        - extend(9, False):
          - add(b):
            - b
          - more_obs():
            - add(bobs, bobs):
              - bobs bobs
          - more_pistons(3):
            - add(e):
              - e
          - add(b, sto, b):
            - b sto b
          - more_obs(True):
            - add(bobs, sto, bobs, bobs, a, bobs):
              - bobs sto bobs bobs a bobs
          - more_pistons(1):
            - add(d):
              - d
          - add(b):
            - b
          - more_obs():
            - add(sto):
              - sto
          - add(b):
            - b
        - extra_pulses(9, False):
          - add(a, a, a, a, a, a, a, a):
            - a a a a a a a a
      - retract(9):
        - retract(2):
          - less_obs():
            - add(b, sto):
              - b sto
          - pull(0):
            - more_pistons(0):
              - add(c):
                - c
            - full_extend(0):
              - extend(0, False):
                - add(a):
                  - a
              - extra_pulses(0, False):
            - retract(-3):
            - full_row(-2):
            - shift_pistons(0):
              - add(c, b):
                - c b
          - shift_pistons(1):
            - add(d, c):
              - d c
          - row_high(1, True):
            - full_extend(1, True):
              - extend(1, True):
                - add(a):
                  - a
              - extra_pulses(1, True):
            - retract(1):
              - pull(-1):
                - add(b):
                  - b
              - row_high(0, True):
                - full_extend(0, True):
                  - extend(0, True):
                    - add(a):
                      - a
                  - extra_pulses(0, True):
                - retract(0):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
        - less_obs():
          - add(sto, sto):
            - sto sto
        - full_row(3):
          - more_pistons(1):
            - add(d):
              - d
          - row_high(3):
            - full_extend(3, False):
              - extend(3, False):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - more_pistons(0):
                  - add(c):
                    - c
                - extend(0):
                  - add(a):
                    - a
              - extra_pulses(3, False):
                - add(a):
                  - a
            - retract(3):
              - retract(0, no_recurse_first=False):
                - pull(-2):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
                - row_high(-1, True):
                  - full_extend(-1, True):
                    - extend(-1, True):
                      - add(b):
                        - b
                    - extra_pulses(-1, True):
                  - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - pull(1):
                - more_pistons(0):
                  - add(c):
                    - c
                - full_extend(1):
                  - extend(1, False):
                    - add(b):
                      - b
                    - add(a):
                      - a
                  - extra_pulses(1, False):
                - retract(-2):
                - full_row(-1):
                  - row_high(-1):
                    - full_extend(-1, False):
                      - extend(-1, False):
                        - add(b):
                          - b
                      - extra_pulses(-1, False):
                    - retract(-1):
                - shift_pistons(0):
                  - add(c, b):
                    - c b
              - row_high(2, True):
                - full_extend(2, True):
                  - extend(2, True):
                    - more_obs(needs_parity=False):
                      - add(bobs, a, bobs):
                        - bobs a bobs
                    - extend(-1):
                      - add(b):
                        - b
                  - extra_pulses(2, True):
                    - add(b):
                      - b
                - retract(2):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(0):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - full_extend(0):
                      - extend(0, False):
                        - add(a):
                          - a
                      - extra_pulses(0, False):
                    - retract(-3):
                    - full_row(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - row_high(1, True):
                    - full_extend(1, True):
                      - extend(1, True):
                        - add(a):
                          - a
                      - extra_pulses(1, True):
                    - retract(1):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
        - storage_moves(a, b, sto):
        - retract(6, no_recurse_first=True):
          - pull(4):
            - more_pistons(2):
              - add(d, fold2):
                - d fold2
            - full_extend(4):
              - extend(4, False):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - more_pistons(0):
                  - add(c):
                    - c
                - extend(1):
                  - add(b):
                    - b
                  - add(a):
                    - a
              - extra_pulses(4, False):
                - add(a):
                  - a
            - retract(1):
              - pull(-1):
                - add(b):
                  - b
              - row_high(0, True):
                - full_extend(0, True):
                  - extend(0, True):
                    - add(a):
                      - a
                  - extra_pulses(0, True):
                - retract(0):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - full_row(2):
              - more_pistons(1):
                - add(d):
                  - d
              - row_high(2):
                - full_extend(2, False):
                  - extend(2, False):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - extend(-1):
                      - add(b):
                        - b
                  - extra_pulses(2, False):
                    - add(b):
                      - b
                - retract(2):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(0):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - full_extend(0):
                      - extend(0, False):
                        - add(a):
                          - a
                      - extra_pulses(0, False):
                    - retract(-3):
                    - full_row(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - row_high(1, True):
                    - full_extend(1, True):
                      - extend(1, True):
                        - add(a):
                          - a
                      - extra_pulses(1, True):
                    - retract(1):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
            - shift_pistons(2):
              - add(fold2):
                - fold2
            - shift_pistons(1):
              - add(d, c):
                - d c
            - shift_pistons(0):
              - add(c, b):
                - c b
          - shift_pistons(3):
            - add(e, d, fold2):
              - e d fold2
          - row_high(5, True):
            - full_extend(5, True):
              - extend(5, True):
                - more_obs(needs_parity=False):
                  - add(bobs, a, bobs):
                    - bobs a bobs
                - more_pistons(1):
                  - add(d):
                    - d
                - extend(2):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(sto):
                      - sto
                  - extend(-1):
                    - add(b):
                      - b
              - extra_pulses(5, True):
                - add(a, a):
                  - a a
            - retract(5):
              - retract(2, no_recurse_first=False):
                - less_obs():
                  - add(b, sto):
                    - b sto
                - pull(0):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - full_extend(0):
                    - extend(0, False):
                      - add(a):
                        - a
                    - extra_pulses(0, False):
                  - retract(-3):
                  - full_row(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - shift_pistons(1):
                  - add(d, c):
                    - d c
                - row_high(1, True):
                  - full_extend(1, True):
                    - extend(1, True):
                      - add(a):
                        - a
                    - extra_pulses(1, True):
                  - retract(1):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - pull(3):
                - more_pistons(1):
                  - add(d):
                    - d
                - full_extend(3):
                  - extend(3, False):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - more_pistons(0):
                      - add(c):
                        - c
                    - extend(0):
                      - add(a):
                        - a
                  - extra_pulses(3, False):
                    - add(a):
                      - a
                - retract(0):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - full_row(1):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - row_high(1):
                    - full_extend(1, False):
                      - extend(1, False):
                        - add(b):
                          - b
                        - add(a):
                          - a
                      - extra_pulses(1, False):
                    - retract(1):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                - shift_pistons(1):
                  - add(d, c):
                    - d c
                - shift_pistons(0):
                  - add(c, b):
                    - c b
              - row_high(4, True):
                - full_extend(4, True):
                  - extend(4, True):
                    - more_obs(needs_parity=False):
                      - add(bobs, a, bobs):
                        - bobs a bobs
                    - more_pistons(0):
                      - add(c):
                        - c
                    - extend(1):
                      - add(b):
                        - b
                      - add(a):
                        - a
                  - extra_pulses(4, True):
                    - add(a):
                      - a
                - retract(4):
                  - retract(1, no_recurse_first=False):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(2):
                    - more_pistons(1):
                      - add(d):
                        - d
                    - full_extend(2):
                      - extend(2, False):
                        - add(b):
                          - b
                        - more_obs(needs_parity=True):
                          - add(bobs, sto, bobs, bobs, a, bobs):
                            - bobs sto bobs bobs a bobs
                        - extend(-1):
                          - add(b):
                            - b
                      - extra_pulses(2, False):
                        - add(b):
                          - b
                    - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - full_row(0):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - row_high(0):
                        - full_extend(0, False):
                          - extend(0, False):
                            - add(a):
                              - a
                          - extra_pulses(0, False):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                    - shift_pistons(1):
                      - add(d, c):
                        - d c
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - shift_pistons(2):
                    - add(fold2):
                      - fold2
                  - row_high(3, True):
                    - full_extend(3, True):
                      - extend(3, True):
                        - more_obs(needs_parity=False):
                          - add(bobs, a, bobs):
                            - bobs a bobs
                        - more_pistons(0):
                          - add(c):
                            - c
                        - extend(0):
                          - add(a):
                            - a
                      - extra_pulses(3, True):
                        - add(a):
                          - a
                    - retract(3):
                      - retract(0, no_recurse_first=False):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - pull(1):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - full_extend(1):
                          - extend(1, False):
                            - add(b):
                              - b
                            - add(a):
                              - a
                          - extra_pulses(1, False):
                        - retract(-2):
                        - full_row(-1):
                          - row_high(-1):
                            - full_extend(-1, False):
                              - extend(-1, False):
                                - add(b):
                                  - b
                              - extra_pulses(-1, False):
                            - retract(-1):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                      - row_high(2, True):
                        - full_extend(2, True):
                          - extend(2, True):
                            - more_obs(needs_parity=False):
                              - add(bobs, a, bobs):
                                - bobs a bobs
                            - extend(-1):
                              - add(b):
                                - b
                          - extra_pulses(2, True):
                            - add(b):
                              - b
                        - retract(2):
                          - less_obs():
                            - add(sto, sto):
                              - sto sto
                          - pull(0):
                            - more_pistons(0):
                              - add(c):
                                - c
                            - full_extend(0):
                              - extend(0, False):
                                - add(a):
                                  - a
                              - extra_pulses(0, False):
                            - retract(-3):
                            - full_row(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                          - shift_pistons(1):
                            - add(d, c):
                              - d c
                          - row_high(1, True):
                            - full_extend(1, True):
                              - extend(1, True):
                                - add(a):
                                  - a
                              - extra_pulses(1, True):
                            - retract(1):
                              - pull(-1):
                                - add(b):
                                  - b
                              - row_high(0, True):
                                - full_extend(0, True):
                                  - extend(0, True):
                                    - add(a):
                                      - a
                                  - extra_pulses(0, True):
                                - retract(0):
                                  - pull(-2):
                                  - shift_pistons(0):
                                    - add(c, b):
                                      - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True):
                                      - extend(-1, True):
                                        - add(b):
                                          - b
                                      - extra_pulses(-1, True):
                                    - retract(-1):
        - less_obs():
          - add(sto, sto):
            - sto sto
        - pull(7):
          - more_pistons(3):
            - add(e):
              - e
          - full_extend(7):
            - extend(7, False):
              - add(b):
                - b
              - more_obs(needs_parity=True):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(2):
                - add(d, fold2):
                  - d fold2
              - extend(4):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - more_pistons(0):
                  - add(c):
                    - c
                - extend(1):
                  - add(b):
                    - b
                  - add(a):
                    - a
            - extra_pulses(7, False):
              - add(a, a, a, a, a, a, a):
                - a a a a a a a
          - retract(4):
            - retract(1, no_recurse_first=False):
              - pull(-1):
                - add(b):
                  - b
              - row_high(0, True):
                - full_extend(0, True):
                  - extend(0, True):
                    - add(a):
                      - a
                  - extra_pulses(0, True):
                - retract(0):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - pull(2):
              - more_pistons(1):
                - add(d):
                  - d
              - full_extend(2):
                - extend(2, False):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(bobs, sto, bobs, bobs, a, bobs):
                      - bobs sto bobs bobs a bobs
                  - extend(-1):
                    - add(b):
                      - b
                - extra_pulses(2, False):
                  - add(b):
                    - b
              - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - full_row(0):
                - more_pistons(0):
                  - add(c):
                    - c
                - row_high(0):
                  - full_extend(0, False):
                    - extend(0, False):
                      - add(a):
                        - a
                    - extra_pulses(0, False):
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
              - shift_pistons(1):
                - add(d, c):
                  - d c
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - shift_pistons(2):
              - add(fold2):
                - fold2
            - row_high(3, True):
              - full_extend(3, True):
                - extend(3, True):
                  - more_obs(needs_parity=False):
                    - add(bobs, a, bobs):
                      - bobs a bobs
                  - more_pistons(0):
                    - add(c):
                      - c
                  - extend(0):
                    - add(a):
                      - a
                - extra_pulses(3, True):
                  - add(a):
                    - a
              - retract(3):
                - retract(0, no_recurse_first=False):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(1):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - full_extend(1):
                    - extend(1, False):
                      - add(b):
                        - b
                      - add(a):
                        - a
                    - extra_pulses(1, False):
                  - retract(-2):
                  - full_row(-1):
                    - row_high(-1):
                      - full_extend(-1, False):
                        - extend(-1, False):
                          - add(b):
                            - b
                        - extra_pulses(-1, False):
                      - retract(-1):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - row_high(2, True):
                  - full_extend(2, True):
                    - extend(2, True):
                      - more_obs(needs_parity=False):
                        - add(bobs, a, bobs):
                          - bobs a bobs
                      - extend(-1):
                        - add(b):
                          - b
                    - extra_pulses(2, True):
                      - add(b):
                        - b
                  - retract(2):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(0):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - full_extend(0):
                        - extend(0, False):
                          - add(a):
                            - a
                        - extra_pulses(0, False):
                      - retract(-3):
                      - full_row(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - shift_pistons(1):
                      - add(d, c):
                        - d c
                    - row_high(1, True):
                      - full_extend(1, True):
                        - extend(1, True):
                          - add(a):
                            - a
                        - extra_pulses(1, True):
                      - retract(1):
                        - pull(-1):
                          - add(b):
                            - b
                        - row_high(0, True):
                          - full_extend(0, True):
                            - extend(0, True):
                              - add(a):
                                - a
                            - extra_pulses(0, True):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
          - less_obs():
            - add(sto, sto):
              - sto sto
          - full_row(5):
            - more_pistons(2):
              - add(d, fold2):
                - d fold2
            - row_high(5):
              - full_extend(5, False):
                - extend(5, False):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(1):
                    - add(d):
                      - d
                  - extend(2):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - extend(-1):
                      - add(b):
                        - b
                - extra_pulses(5, False):
                  - add(b, b, b, b, b):
                    - b b b b b
              - retract(5):
                - retract(2, no_recurse_first=False):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(0):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - full_extend(0):
                      - extend(0, False):
                        - add(a):
                          - a
                      - extra_pulses(0, False):
                    - retract(-3):
                    - full_row(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - row_high(1, True):
                    - full_extend(1, True):
                      - extend(1, True):
                        - add(a):
                          - a
                      - extra_pulses(1, True):
                    - retract(1):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(3):
                  - more_pistons(1):
                    - add(d):
                      - d
                  - full_extend(3):
                    - extend(3, False):
                      - add(b):
                        - b
                      - more_obs(needs_parity=True):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(0):
                        - add(c):
                          - c
                      - extend(0):
                        - add(a):
                          - a
                    - extra_pulses(3, False):
                      - add(a):
                        - a
                  - retract(0):
                    - pull(-2):
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                    - row_high(-1, True):
                      - full_extend(-1, True):
                        - extend(-1, True):
                          - add(b):
                            - b
                        - extra_pulses(-1, True):
                      - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - full_row(1):
                    - more_pistons(0):
                      - add(c):
                        - c
                    - row_high(1):
                      - full_extend(1, False):
                        - extend(1, False):
                          - add(b):
                            - b
                          - add(a):
                            - a
                        - extra_pulses(1, False):
                      - retract(1):
                        - pull(-1):
                          - add(b):
                            - b
                        - row_high(0, True):
                          - full_extend(0, True):
                            - extend(0, True):
                              - add(a):
                                - a
                            - extra_pulses(0, True):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - row_high(4, True):
                  - full_extend(4, True):
                    - extend(4, True):
                      - more_obs(needs_parity=False):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(0):
                        - add(c):
                          - c
                      - extend(1):
                        - add(b):
                          - b
                        - add(a):
                          - a
                    - extra_pulses(4, True):
                      - add(a):
                        - a
                  - retract(4):
                    - retract(1, no_recurse_first=False):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(2):
                      - more_pistons(1):
                        - add(d):
                          - d
                      - full_extend(2):
                        - extend(2, False):
                          - add(b):
                            - b
                          - more_obs(needs_parity=True):
                            - add(bobs, bobs):
                              - bobs bobs
                          - extend(-1):
                            - add(b):
                              - b
                        - extra_pulses(2, False):
                          - add(b):
                            - b
                      - retract(-1):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - full_row(0):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - row_high(0):
                          - full_extend(0, False):
                            - extend(0, False):
                              - add(a):
                                - a
                            - extra_pulses(0, False):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
                      - shift_pistons(1):
                        - add(d, c):
                          - d c
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - shift_pistons(2):
                      - add(fold2):
                        - fold2
                    - row_high(3, True):
                      - full_extend(3, True):
                        - extend(3, True):
                          - more_obs(needs_parity=False):
                            - add(bobs, bobs):
                              - bobs bobs
                          - more_pistons(0):
                            - add(c):
                              - c
                          - extend(0):
                            - add(a):
                              - a
                        - extra_pulses(3, True):
                          - add(a):
                            - a
                      - retract(3):
                        - retract(0, no_recurse_first=False):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                        - less_obs():
                          - add(sto, sto):
                            - sto sto
                        - pull(1):
                          - more_pistons(0):
                            - add(c):
                              - c
                          - full_extend(1):
                            - extend(1, False):
                              - add(b):
                                - b
                              - add(a):
                                - a
                            - extra_pulses(1, False):
                          - retract(-2):
                          - full_row(-1):
                            - row_high(-1):
                              - full_extend(-1, False):
                                - extend(-1, False):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, False):
                              - retract(-1):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                        - row_high(2, True):
                          - full_extend(2, True):
                            - extend(2, True):
                              - more_obs(needs_parity=False):
                                - add(bobs, bobs):
                                  - bobs bobs
                              - extend(-1):
                                - add(b):
                                  - b
                            - extra_pulses(2, True):
                              - add(b):
                                - b
                          - retract(2):
                            - less_obs():
                              - add(sto, sto):
                                - sto sto
                            - pull(0):
                              - more_pistons(0):
                                - add(c):
                                  - c
                              - full_extend(0):
                                - extend(0, False):
                                  - add(a):
                                    - a
                                - extra_pulses(0, False):
                              - retract(-3):
                              - full_row(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                            - shift_pistons(1):
                              - add(d, c):
                                - d c
                            - row_high(1, True):
                              - full_extend(1, True):
                                - extend(1, True):
                                  - add(a):
                                    - a
                                - extra_pulses(1, True):
                              - retract(1):
                                - pull(-1):
                                  - add(b):
                                    - b
                                - row_high(0, True):
                                  - full_extend(0, True):
                                    - extend(0, True):
                                      - add(a):
                                        - a
                                    - extra_pulses(0, True):
                                  - retract(0):
                                    - pull(-2):
                                    - shift_pistons(0):
                                      - add(c, b):
                                        - c b
                                    - row_high(-1, True):
                                      - full_extend(-1, True):
                                        - extend(-1, True):
                                          - add(b):
                                            - b
                                        - extra_pulses(-1, True):
                                      - retract(-1):
          - shift_pistons(3):
            - add(e, d, fold2):
              - e d fold2
          - shift_pistons(2):
          - shift_pistons(1):
            - add(d, c):
              - d c
          - shift_pistons(0):
            - add(c, b):
              - c b
        - row_high(8, True):
          - full_extend(8, True):
            - extend(8, True):
              - more_obs(needs_parity=False):
                - add(bobs, bobs):
                  - bobs bobs
              - more_pistons(2):
                - add(d, fold2):
                  - d fold2
              - extend(5):
                - add(b):
                  - b
                - more_obs(needs_parity=True):
                  - add(bobs, sto, bobs, bobs, a, bobs):
                    - bobs sto bobs bobs a bobs
                - more_pistons(1):
                  - add(d):
                    - d
                - extend(2):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(sto):
                      - sto
                  - extend(-1):
                    - add(b):
                      - b
            - extra_pulses(8, True):
              - add(a, a, a, a):
                - a a a a
          - retract(8):
            - retract(5, no_recurse_first=False):
              - retract(2, no_recurse_first=False):
                - less_obs():
                  - add(b, sto):
                    - b sto
                - pull(0):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - full_extend(0):
                    - extend(0, False):
                      - add(a):
                        - a
                    - extra_pulses(0, False):
                  - retract(-3):
                  - full_row(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - shift_pistons(1):
                  - add(d, c):
                    - d c
                - row_high(1, True):
                  - full_extend(1, True):
                    - extend(1, True):
                      - add(a):
                        - a
                    - extra_pulses(1, True):
                  - retract(1):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - pull(3):
                - more_pistons(1):
                  - add(d):
                    - d
                - full_extend(3):
                  - extend(3, False):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - more_pistons(0):
                      - add(c):
                        - c
                    - extend(0):
                      - add(a):
                        - a
                  - extra_pulses(3, False):
                    - add(a):
                      - a
                - retract(0):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - full_row(1):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - row_high(1):
                    - full_extend(1, False):
                      - extend(1, False):
                        - add(b):
                          - b
                        - add(a):
                          - a
                      - extra_pulses(1, False):
                    - retract(1):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                - shift_pistons(1):
                  - add(d, c):
                    - d c
                - shift_pistons(0):
                  - add(c, b):
                    - c b
              - row_high(4, True):
                - full_extend(4, True):
                  - extend(4, True):
                    - more_obs(needs_parity=False):
                      - add(bobs, a, bobs):
                        - bobs a bobs
                    - more_pistons(0):
                      - add(c):
                        - c
                    - extend(1):
                      - add(b):
                        - b
                      - add(a):
                        - a
                  - extra_pulses(4, True):
                    - add(a):
                      - a
                - retract(4):
                  - retract(1, no_recurse_first=False):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(2):
                    - more_pistons(1):
                      - add(d):
                        - d
                    - full_extend(2):
                      - extend(2, False):
                        - add(b):
                          - b
                        - more_obs(needs_parity=True):
                          - add(bobs, sto, bobs, bobs, a, bobs):
                            - bobs sto bobs bobs a bobs
                        - extend(-1):
                          - add(b):
                            - b
                      - extra_pulses(2, False):
                        - add(b):
                          - b
                    - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - full_row(0):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - row_high(0):
                        - full_extend(0, False):
                          - extend(0, False):
                            - add(a):
                              - a
                          - extra_pulses(0, False):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                    - shift_pistons(1):
                      - add(d, c):
                        - d c
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - shift_pistons(2):
                    - add(fold2):
                      - fold2
                  - row_high(3, True):
                    - full_extend(3, True):
                      - extend(3, True):
                        - more_obs(needs_parity=False):
                          - add(bobs, a, bobs):
                            - bobs a bobs
                        - more_pistons(0):
                          - add(c):
                            - c
                        - extend(0):
                          - add(a):
                            - a
                      - extra_pulses(3, True):
                        - add(a):
                          - a
                    - retract(3):
                      - retract(0, no_recurse_first=False):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - pull(1):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - full_extend(1):
                          - extend(1, False):
                            - add(b):
                              - b
                            - add(a):
                              - a
                          - extra_pulses(1, False):
                        - retract(-2):
                        - full_row(-1):
                          - row_high(-1):
                            - full_extend(-1, False):
                              - extend(-1, False):
                                - add(b):
                                  - b
                              - extra_pulses(-1, False):
                            - retract(-1):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                      - row_high(2, True):
                        - full_extend(2, True):
                          - extend(2, True):
                            - more_obs(needs_parity=False):
                              - add(bobs, a, bobs):
                                - bobs a bobs
                            - extend(-1):
                              - add(b):
                                - b
                          - extra_pulses(2, True):
                            - add(b):
                              - b
                        - retract(2):
                          - less_obs():
                            - add(sto, sto):
                              - sto sto
                          - pull(0):
                            - more_pistons(0):
                              - add(c):
                                - c
                            - full_extend(0):
                              - extend(0, False):
                                - add(a):
                                  - a
                              - extra_pulses(0, False):
                            - retract(-3):
                            - full_row(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                          - shift_pistons(1):
                            - add(d, c):
                              - d c
                          - row_high(1, True):
                            - full_extend(1, True):
                              - extend(1, True):
                                - add(a):
                                  - a
                              - extra_pulses(1, True):
                            - retract(1):
                              - pull(-1):
                                - add(b):
                                  - b
                              - row_high(0, True):
                                - full_extend(0, True):
                                  - extend(0, True):
                                    - add(a):
                                      - a
                                  - extra_pulses(0, True):
                                - retract(0):
                                  - pull(-2):
                                  - shift_pistons(0):
                                    - add(c, b):
                                      - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True):
                                      - extend(-1, True):
                                        - add(b):
                                          - b
                                      - extra_pulses(-1, True):
                                    - retract(-1):
            - less_obs():
              - add(sto, sto):
                - sto sto
            - pull(6):
              - more_pistons(3):
                - add(e):
                  - e
              - full_extend(6):
                - extend(6, False):
                  - add(b):
                    - b
                  - more_obs(needs_parity=True):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(1):
                    - add(d):
                      - d
                  - extend(3):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - more_pistons(0):
                      - add(c):
                        - c
                    - extend(0):
                      - add(a):
                        - a
                - extra_pulses(6, False):
                  - add(a, a, a, a, a, a, a):
                    - a a a a a a a
              - retract(3):
                - retract(0, no_recurse_first=False):
                  - pull(-2):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                  - row_high(-1, True):
                    - full_extend(-1, True):
                      - extend(-1, True):
                        - add(b):
                          - b
                      - extra_pulses(-1, True):
                    - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(1):
                  - more_pistons(0):
                    - add(c):
                      - c
                  - full_extend(1):
                    - extend(1, False):
                      - add(b):
                        - b
                      - add(a):
                        - a
                    - extra_pulses(1, False):
                  - retract(-2):
                  - full_row(-1):
                    - row_high(-1):
                      - full_extend(-1, False):
                        - extend(-1, False):
                          - add(b):
                            - b
                        - extra_pulses(-1, False):
                      - retract(-1):
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - row_high(2, True):
                  - full_extend(2, True):
                    - extend(2, True):
                      - more_obs(needs_parity=False):
                        - add(bobs, a, bobs):
                          - bobs a bobs
                      - extend(-1):
                        - add(b):
                          - b
                    - extra_pulses(2, True):
                      - add(b):
                        - b
                  - retract(2):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(0):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - full_extend(0):
                        - extend(0, False):
                          - add(a):
                            - a
                        - extra_pulses(0, False):
                      - retract(-3):
                      - full_row(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - shift_pistons(1):
                      - add(d, c):
                        - d c
                    - row_high(1, True):
                      - full_extend(1, True):
                        - extend(1, True):
                          - add(a):
                            - a
                        - extra_pulses(1, True):
                      - retract(1):
                        - pull(-1):
                          - add(b):
                            - b
                        - row_high(0, True):
                          - full_extend(0, True):
                            - extend(0, True):
                              - add(a):
                                - a
                            - extra_pulses(0, True):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
              - less_obs():
                - add(sto, sto):
                  - sto sto
              - full_row(4):
                - more_pistons(2):
                  - add(d, fold2):
                    - d fold2
                - row_high(4):
                  - full_extend(4, False):
                    - extend(4, False):
                      - add(b):
                        - b
                      - more_obs(needs_parity=True):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(0):
                        - add(c):
                          - c
                      - extend(1):
                        - add(b):
                          - b
                        - add(a):
                          - a
                    - extra_pulses(4, False):
                      - add(a):
                        - a
                  - retract(4):
                    - retract(1, no_recurse_first=False):
                      - pull(-1):
                        - add(b):
                          - b
                      - row_high(0, True):
                        - full_extend(0, True):
                          - extend(0, True):
                            - add(a):
                              - a
                          - extra_pulses(0, True):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(2):
                      - more_pistons(1):
                        - add(d):
                          - d
                      - full_extend(2):
                        - extend(2, False):
                          - add(b):
                            - b
                          - more_obs(needs_parity=True):
                            - add(bobs, bobs):
                              - bobs bobs
                          - extend(-1):
                            - add(b):
                              - b
                        - extra_pulses(2, False):
                          - add(b):
                            - b
                      - retract(-1):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - full_row(0):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - row_high(0):
                          - full_extend(0, False):
                            - extend(0, False):
                              - add(a):
                                - a
                            - extra_pulses(0, False):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
                      - shift_pistons(1):
                        - add(d, c):
                          - d c
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - shift_pistons(2):
                      - add(fold2):
                        - fold2
                    - row_high(3, True):
                      - full_extend(3, True):
                        - extend(3, True):
                          - more_obs(needs_parity=False):
                            - add(bobs, bobs):
                              - bobs bobs
                          - more_pistons(0):
                            - add(c):
                              - c
                          - extend(0):
                            - add(a):
                              - a
                        - extra_pulses(3, True):
                          - add(a):
                            - a
                      - retract(3):
                        - retract(0, no_recurse_first=False):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                        - less_obs():
                          - add(sto, sto):
                            - sto sto
                        - pull(1):
                          - more_pistons(0):
                            - add(c):
                              - c
                          - full_extend(1):
                            - extend(1, False):
                              - add(b):
                                - b
                              - add(a):
                                - a
                            - extra_pulses(1, False):
                          - retract(-2):
                          - full_row(-1):
                            - row_high(-1):
                              - full_extend(-1, False):
                                - extend(-1, False):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, False):
                              - retract(-1):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                        - row_high(2, True):
                          - full_extend(2, True):
                            - extend(2, True):
                              - more_obs(needs_parity=False):
                                - add(bobs, bobs):
                                  - bobs bobs
                              - extend(-1):
                                - add(b):
                                  - b
                            - extra_pulses(2, True):
                              - add(b):
                                - b
                          - retract(2):
                            - less_obs():
                              - add(sto, sto):
                                - sto sto
                            - pull(0):
                              - more_pistons(0):
                                - add(c):
                                  - c
                              - full_extend(0):
                                - extend(0, False):
                                  - add(a):
                                    - a
                                - extra_pulses(0, False):
                              - retract(-3):
                              - full_row(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                            - shift_pistons(1):
                              - add(d, c):
                                - d c
                            - row_high(1, True):
                              - full_extend(1, True):
                                - extend(1, True):
                                  - add(a):
                                    - a
                                - extra_pulses(1, True):
                              - retract(1):
                                - pull(-1):
                                  - add(b):
                                    - b
                                - row_high(0, True):
                                  - full_extend(0, True):
                                    - extend(0, True):
                                      - add(a):
                                        - a
                                    - extra_pulses(0, True):
                                  - retract(0):
                                    - pull(-2):
                                    - shift_pistons(0):
                                      - add(c, b):
                                        - c b
                                    - row_high(-1, True):
                                      - full_extend(-1, True):
                                        - extend(-1, True):
                                          - add(b):
                                            - b
                                        - extra_pulses(-1, True):
                                      - retract(-1):
              - shift_pistons(3):
                - add(e, d, fold2):
                  - e d fold2
              - shift_pistons(2):
              - shift_pistons(1):
                - add(d, c):
                  - d c
              - shift_pistons(0):
                - add(c, b):
                  - c b
            - shift_pistons(4):
            - row_high(7, True):
              - full_extend(7, True):
                - extend(7, True):
                  - more_obs(needs_parity=False):
                    - add(bobs, bobs):
                      - bobs bobs
                  - more_pistons(2):
                    - add(e):
                      - e
                  - extend(4):
                    - add(b):
                      - b
                    - more_obs(needs_parity=True):
                      - add(bobs, sto, bobs, bobs, a, bobs):
                        - bobs sto bobs bobs a bobs
                    - more_pistons(0):
                      - add(c):
                        - c
                    - extend(1):
                      - add(b):
                        - b
                      - add(a):
                        - a
                - extra_pulses(7, True):
                  - add(a, a, a):
                    - a a a
              - retract(7):
                - retract(4, no_recurse_first=False):
                  - retract(1, no_recurse_first=False):
                    - pull(-1):
                      - add(b):
                        - b
                    - row_high(0, True):
                      - full_extend(0, True):
                        - extend(0, True):
                          - add(a):
                            - a
                        - extra_pulses(0, True):
                      - retract(0):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - pull(2):
                    - more_pistons(1):
                      - add(d):
                        - d
                    - full_extend(2):
                      - extend(2, False):
                        - add(b):
                          - b
                        - more_obs(needs_parity=True):
                          - add(bobs, sto, bobs, bobs, a, bobs):
                            - bobs sto bobs bobs a bobs
                        - extend(-1):
                          - add(b):
                            - b
                      - extra_pulses(2, False):
                        - add(b):
                          - b
                    - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - full_row(0):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - row_high(0):
                        - full_extend(0, False):
                          - extend(0, False):
                            - add(a):
                              - a
                          - extra_pulses(0, False):
                        - retract(0):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                    - shift_pistons(1):
                      - add(d, c):
                        - d c
                    - shift_pistons(0):
                      - add(c, b):
                        - c b
                  - shift_pistons(2):
                    - add(e, d):
                      - e d
                  - row_high(3, True):
                    - full_extend(3, True):
                      - extend(3, True):
                        - more_obs(needs_parity=False):
                          - add(bobs, a, bobs):
                            - bobs a bobs
                        - more_pistons(0):
                          - add(c):
                            - c
                        - extend(0):
                          - add(a):
                            - a
                      - extra_pulses(3, True):
                        - add(a):
                          - a
                    - retract(3):
                      - retract(0, no_recurse_first=False):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - pull(1):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - full_extend(1):
                          - extend(1, False):
                            - add(b):
                              - b
                            - add(a):
                              - a
                          - extra_pulses(1, False):
                        - retract(-2):
                        - full_row(-1):
                          - row_high(-1):
                            - full_extend(-1, False):
                              - extend(-1, False):
                                - add(b):
                                  - b
                              - extra_pulses(-1, False):
                            - retract(-1):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                      - row_high(2, True):
                        - full_extend(2, True):
                          - extend(2, True):
                            - more_obs(needs_parity=False):
                              - add(bobs, a, bobs):
                                - bobs a bobs
                            - extend(-1):
                              - add(b):
                                - b
                          - extra_pulses(2, True):
                            - add(b):
                              - b
                        - retract(2):
                          - less_obs():
                            - add(sto, sto):
                              - sto sto
                          - pull(0):
                            - more_pistons(0):
                              - add(c):
                                - c
                            - full_extend(0):
                              - extend(0, False):
                                - add(a):
                                  - a
                              - extra_pulses(0, False):
                            - retract(-3):
                            - full_row(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                          - shift_pistons(1):
                            - add(d, c):
                              - d c
                          - row_high(1, True):
                            - full_extend(1, True):
                              - extend(1, True):
                                - add(a):
                                  - a
                              - extra_pulses(1, True):
                            - retract(1):
                              - pull(-1):
                                - add(b):
                                  - b
                              - row_high(0, True):
                                - full_extend(0, True):
                                  - extend(0, True):
                                    - add(a):
                                      - a
                                  - extra_pulses(0, True):
                                - retract(0):
                                  - pull(-2):
                                  - shift_pistons(0):
                                    - add(c, b):
                                      - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True):
                                      - extend(-1, True):
                                        - add(b):
                                          - b
                                      - extra_pulses(-1, True):
                                    - retract(-1):
                - less_obs():
                  - add(sto, sto):
                    - sto sto
                - pull(5):
                  - more_pistons(2):
                    - add(e):
                      - e
                  - full_extend(5):
                    - extend(5, False):
                      - add(b):
                        - b
                      - more_obs(needs_parity=True):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(1):
                        - add(d):
                          - d
                      - extend(2):
                        - add(b):
                          - b
                        - more_obs(needs_parity=True):
                          - add(bobs, sto, bobs, bobs, a, bobs):
                            - bobs sto bobs bobs a bobs
                        - extend(-1):
                          - add(b):
                            - b
                    - extra_pulses(5, False):
                      - add(b, b, b, b, b):
                        - b b b b b
                  - retract(2):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(0):
                      - more_pistons(0):
                        - add(c):
                          - c
                      - full_extend(0):
                        - extend(0, False):
                          - add(a):
                            - a
                        - extra_pulses(0, False):
                      - retract(-3):
                      - full_row(-2):
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - shift_pistons(1):
                      - add(d, c):
                        - d c
                    - row_high(1, True):
                      - full_extend(1, True):
                        - extend(1, True):
                          - add(a):
                            - a
                        - extra_pulses(1, True):
                      - retract(1):
                        - pull(-1):
                          - add(b):
                            - b
                        - row_high(0, True):
                          - full_extend(0, True):
                            - extend(0, True):
                              - add(a):
                                - a
                            - extra_pulses(0, True):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
                  - less_obs():
                    - add(sto, sto):
                      - sto sto
                  - full_row(3):
                    - more_pistons(1):
                      - add(d):
                        - d
                    - row_high(3):
                      - full_extend(3, False):
                        - extend(3, False):
                          - add(b):
                            - b
                          - more_obs(needs_parity=True):
                            - add(bobs, bobs):
                              - bobs bobs
                          - more_pistons(0):
                            - add(c):
                              - c
                          - extend(0):
                            - add(a):
                              - a
                        - extra_pulses(3, False):
                          - add(a):
                            - a
                      - retract(3):
                        - retract(0, no_recurse_first=False):
                          - pull(-2):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                          - row_high(-1, True):
                            - full_extend(-1, True):
                              - extend(-1, True):
                                - add(b):
                                  - b
                              - extra_pulses(-1, True):
                            - retract(-1):
                        - less_obs():
                          - add(sto, sto):
                            - sto sto
                        - pull(1):
                          - more_pistons(0):
                            - add(c):
                              - c
                          - full_extend(1):
                            - extend(1, False):
                              - add(b):
                                - b
                              - add(a):
                                - a
                            - extra_pulses(1, False):
                          - retract(-2):
                          - full_row(-1):
                            - row_high(-1):
                              - full_extend(-1, False):
                                - extend(-1, False):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, False):
                              - retract(-1):
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                        - row_high(2, True):
                          - full_extend(2, True):
                            - extend(2, True):
                              - more_obs(needs_parity=False):
                                - add(bobs, bobs):
                                  - bobs bobs
                              - extend(-1):
                                - add(b):
                                  - b
                            - extra_pulses(2, True):
                              - add(b):
                                - b
                          - retract(2):
                            - less_obs():
                              - add(sto, sto):
                                - sto sto
                            - pull(0):
                              - more_pistons(0):
                                - add(c):
                                  - c
                              - full_extend(0):
                                - extend(0, False):
                                  - add(a):
                                    - a
                                - extra_pulses(0, False):
                              - retract(-3):
                              - full_row(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                            - shift_pistons(1):
                              - add(d, c):
                                - d c
                            - row_high(1, True):
                              - full_extend(1, True):
                                - extend(1, True):
                                  - add(a):
                                    - a
                                - extra_pulses(1, True):
                              - retract(1):
                                - pull(-1):
                                  - add(b):
                                    - b
                                - row_high(0, True):
                                  - full_extend(0, True):
                                    - extend(0, True):
                                      - add(a):
                                        - a
                                    - extra_pulses(0, True):
                                  - retract(0):
                                    - pull(-2):
                                    - shift_pistons(0):
                                      - add(c, b):
                                        - c b
                                    - row_high(-1, True):
                                      - full_extend(-1, True):
                                        - extend(-1, True):
                                          - add(b):
                                            - b
                                        - extra_pulses(-1, True):
                                      - retract(-1):
                  - shift_pistons(2):
                    - add(e, d):
                      - e d
                  - shift_pistons(1):
                    - add(d, c):
                      - d c
                  - shift_pistons(0):
                    - add(c, b):
                      - c b
                - row_high(6, True):
                  - full_extend(6, True):
                    - extend(6, True):
                      - more_obs(needs_parity=False):
                        - add(bobs, bobs):
                          - bobs bobs
                      - more_pistons(1):
                        - add(d):
                          - d
                      - extend(3):
                        - add(b):
                          - b
                        - more_obs(needs_parity=True):
                          - add(bobs, sto, bobs, bobs, a, bobs):
                            - bobs sto bobs bobs a bobs
                        - more_pistons(0):
                          - add(c):
                            - c
                        - extend(0):
                          - add(a):
                            - a
                    - extra_pulses(6, True):
                      - add(a, a, a):
                        - a a a
                  - retract(6):
                    - retract(3, no_recurse_first=False):
                      - retract(0, no_recurse_first=False):
                        - pull(-2):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                        - row_high(-1, True):
                          - full_extend(-1, True):
                            - extend(-1, True):
                              - add(b):
                                - b
                            - extra_pulses(-1, True):
                          - retract(-1):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - pull(1):
                        - more_pistons(0):
                          - add(c):
                            - c
                        - full_extend(1):
                          - extend(1, False):
                            - add(b):
                              - b
                            - add(a):
                              - a
                          - extra_pulses(1, False):
                        - retract(-2):
                        - full_row(-1):
                          - row_high(-1):
                            - full_extend(-1, False):
                              - extend(-1, False):
                                - add(b):
                                  - b
                              - extra_pulses(-1, False):
                            - retract(-1):
                        - shift_pistons(0):
                          - add(c, b):
                            - c b
                      - row_high(2, True):
                        - full_extend(2, True):
                          - extend(2, True):
                            - more_obs(needs_parity=False):
                              - add(bobs, a, bobs):
                                - bobs a bobs
                            - extend(-1):
                              - add(b):
                                - b
                          - extra_pulses(2, True):
                            - add(b):
                              - b
                        - retract(2):
                          - less_obs():
                            - add(sto, sto):
                              - sto sto
                          - pull(0):
                            - more_pistons(0):
                              - add(c):
                                - c
                            - full_extend(0):
                              - extend(0, False):
                                - add(a):
                                  - a
                              - extra_pulses(0, False):
                            - retract(-3):
                            - full_row(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                          - shift_pistons(1):
                            - add(d, c):
                              - d c
                          - row_high(1, True):
                            - full_extend(1, True):
                              - extend(1, True):
                                - add(a):
                                  - a
                              - extra_pulses(1, True):
                            - retract(1):
                              - pull(-1):
                                - add(b):
                                  - b
                              - row_high(0, True):
                                - full_extend(0, True):
                                  - extend(0, True):
                                    - add(a):
                                      - a
                                  - extra_pulses(0, True):
                                - retract(0):
                                  - pull(-2):
                                  - shift_pistons(0):
                                    - add(c, b):
                                      - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True):
                                      - extend(-1, True):
                                        - add(b):
                                          - b
                                      - extra_pulses(-1, True):
                                    - retract(-1):
                    - less_obs():
                      - add(sto, sto):
                        - sto sto
                    - pull(4):
                      - more_pistons(2):
                        - add(e):
                          - e
                      - full_extend(4):
                        - extend(4, False):
                          - add(b):
                            - b
                          - more_obs(needs_parity=True):
                            - add(bobs, bobs):
                              - bobs bobs
                          - more_pistons(0):
                            - add(c):
                              - c
                          - extend(1):
                            - add(b):
                              - b
                            - add(a):
                              - a
                        - extra_pulses(4, False):
                          - add(a):
                            - a
                      - retract(1):
                        - pull(-1):
                          - add(b):
                            - b
                        - row_high(0, True):
                          - full_extend(0, True):
                            - extend(0, True):
                              - add(a):
                                - a
                            - extra_pulses(0, True):
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
                      - less_obs():
                        - add(sto, sto):
                          - sto sto
                      - full_row(2):
                        - more_pistons(1):
                          - add(d):
                            - d
                        - row_high(2):
                          - full_extend(2, False):
                            - extend(2, False):
                              - add(b):
                                - b
                              - more_obs(needs_parity=True):
                                - add(bobs, bobs):
                                  - bobs bobs
                              - extend(-1):
                                - add(b):
                                  - b
                            - extra_pulses(2, False):
                              - add(b):
                                - b
                          - retract(2):
                            - less_obs():
                              - add(sto, sto):
                                - sto sto
                            - pull(0):
                              - more_pistons(0):
                                - add(c):
                                  - c
                              - full_extend(0):
                                - extend(0, False):
                                  - add(a):
                                    - a
                                - extra_pulses(0, False):
                              - retract(-3):
                              - full_row(-2):
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                            - shift_pistons(1):
                              - add(d, c):
                                - d c
                            - row_high(1, True):
                              - full_extend(1, True):
                                - extend(1, True):
                                  - add(a):
                                    - a
                                - extra_pulses(1, True):
                              - retract(1):
                                - pull(-1):
                                  - add(b):
                                    - b
                                - row_high(0, True):
                                  - full_extend(0, True):
                                    - extend(0, True):
                                      - add(a):
                                        - a
                                    - extra_pulses(0, True):
                                  - retract(0):
                                    - pull(-2):
                                    - shift_pistons(0):
                                      - add(c, b):
                                        - c b
                                    - row_high(-1, True):
                                      - full_extend(-1, True):
                                        - extend(-1, True):
                                          - add(b):
                                            - b
                                        - extra_pulses(-1, True):
                                      - retract(-1):
                      - shift_pistons(2):
                        - add(e, d):
                          - e d
                      - shift_pistons(1):
                        - add(d, c):
                          - d c
                      - shift_pistons(0):
                        - add(c, b):
                          - c b
                    - shift_pistons(3):
                      - add(fold1):
                        - fold1
                    - row_high(5, True):
                      - full_extend(5, True):
                        - extend(5, True):
                          - more_obs(needs_parity=False):
                            - add(bobs, bobs):
                              - bobs bobs
                          - more_pistons(1):
                            - add(d):
                              - d
                          - extend(2):
                            - add(b):
                              - b
                            - more_obs(needs_parity=True):
                              - add(bobs, sto, bobs, bobs, a, bobs):
                                - bobs sto bobs bobs a bobs
                            - extend(-1):
                              - add(b):
                                - b
                        - extra_pulses(5, True):
                          - add(b, b, b):
                            - b b b
                      - retract(5):
                        - retract(2, no_recurse_first=False):
                          - less_obs():
                            - add(sto, sto):
                              - sto sto
                          - pull(0):
                            - more_pistons(0):
                              - add(c):
                                - c
                            - full_extend(0):
                              - extend(0, False):
                                - add(a):
                                  - a
                              - extra_pulses(0, False):
                            - retract(-3):
                            - full_row(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                          - shift_pistons(1):
                            - add(d, c):
                              - d c
                          - row_high(1, True):
                            - full_extend(1, True):
                              - extend(1, True):
                                - add(a):
                                  - a
                              - extra_pulses(1, True):
                            - retract(1):
                              - pull(-1):
                                - add(b):
                                  - b
                              - row_high(0, True):
                                - full_extend(0, True):
                                  - extend(0, True):
                                    - add(a):
                                      - a
                                  - extra_pulses(0, True):
                                - retract(0):
                                  - pull(-2):
                                  - shift_pistons(0):
                                    - add(c, b):
                                      - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True):
                                      - extend(-1, True):
                                        - add(b):
                                          - b
                                      - extra_pulses(-1, True):
                                    - retract(-1):
                        - less_obs():
                          - add(sto, sto):
                            - sto sto
                        - pull(3):
                          - more_pistons(1):
                            - add(d):
                              - d
                          - full_extend(3):
                            - extend(3, False):
                              - add(b):
                                - b
                              - more_obs(needs_parity=True):
                                - add(bobs, bobs):
                                  - bobs bobs
                              - more_pistons(0):
                                - add(c):
                                  - c
                              - extend(0):
                                - add(a):
                                  - a
                            - extra_pulses(3, False):
                              - add(a):
                                - a
                          - retract(0):
                            - pull(-2):
                            - shift_pistons(0):
                              - add(c, b):
                                - c b
                            - row_high(-1, True):
                              - full_extend(-1, True):
                                - extend(-1, True):
                                  - add(b):
                                    - b
                                - extra_pulses(-1, True):
                              - retract(-1):
                          - less_obs():
                            - add(sto, sto):
                              - sto sto
                          - full_row(1):
                            - more_pistons(0):
                              - add(c):
                                - c
                            - row_high(1):
                              - full_extend(1, False):
                                - extend(1, False):
                                  - add(b):
                                    - b
                                  - add(a):
                                    - a
                                - extra_pulses(1, False):
                              - retract(1):
                                - pull(-1):
                                  - add(b):
                                    - b
                                - row_high(0, True):
                                  - full_extend(0, True):
                                    - extend(0, True):
                                      - add(a):
                                        - a
                                    - extra_pulses(0, True):
                                  - retract(0):
                                    - pull(-2):
                                    - shift_pistons(0):
                                      - add(c, b):
                                        - c b
                                    - row_high(-1, True):
                                      - full_extend(-1, True):
                                        - extend(-1, True):
                                          - add(b):
                                            - b
                                        - extra_pulses(-1, True):
                                      - retract(-1):
                          - shift_pistons(1):
                            - add(d, c):
                              - d c
                          - shift_pistons(0):
                            - add(c, b):
                              - c b
                        - row_high(4, True):
                          - full_extend(4, True):
                            - extend(4, True):
                              - more_obs(needs_parity=False):
                                - add(bobs, bobs):
                                  - bobs bobs
                              - more_pistons(0):
                                - add(c):
                                  - c
                              - extend(1):
                                - add(b):
                                  - b
                                - add(a):
                                  - a
                            - extra_pulses(4, True):
                              - add(a):
                                - a
                          - retract(4):
                            - retract(1, no_recurse_first=False):
                              - pull(-1):
                                - add(b):
                                  - b
                              - row_high(0, True):
                                - full_extend(0, True):
                                  - extend(0, True):
                                    - add(a):
                                      - a
                                  - extra_pulses(0, True):
                                - retract(0):
                                  - pull(-2):
                                  - shift_pistons(0):
                                    - add(c, b):
                                      - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True):
                                      - extend(-1, True):
                                        - add(b):
                                          - b
                                      - extra_pulses(-1, True):
                                    - retract(-1):
                            - less_obs():
                              - add(sto, sto):
                                - sto sto
                            - pull(2):
                              - more_pistons(1):
                                - add(d):
                                  - d
                              - full_extend(2):
                                - extend(2, False):
                                  - add(b):
                                    - b
                                  - more_obs(needs_parity=True):
                                    - add(bobs, bobs):
                                      - bobs bobs
                                  - extend(-1):
                                    - add(b):
                                      - b
                                - extra_pulses(2, False):
                                  - add(b):
                                    - b
                              - retract(-1):
                              - less_obs():
                                - add(sto, sto):
                                  - sto sto
                              - full_row(0):
                                - more_pistons(0):
                                  - add(c):
                                    - c
                                - row_high(0):
                                  - full_extend(0, False):
                                    - extend(0, False):
                                      - add(a):
                                        - a
                                    - extra_pulses(0, False):
                                  - retract(0):
                                    - pull(-2):
                                    - shift_pistons(0):
                                      - add(c, b):
                                        - c b
                                    - row_high(-1, True):
                                      - full_extend(-1, True):
                                        - extend(-1, True):
                                          - add(b):
                                            - b
                                        - extra_pulses(-1, True):
                                      - retract(-1):
                              - shift_pistons(1):
                                - add(d, c):
                                  - d c
                              - shift_pistons(0):
                                - add(c, b):
                                  - c b
                            - shift_pistons(2):
                              - add(e, d):
                                - e d
                            - row_high(3, True):
                              - full_extend(3, True):
                                - extend(3, True):
                                  - more_obs(needs_parity=False):
                                    - add(bobs, bobs):
                                      - bobs bobs
                                  - more_pistons(0):
                                    - add(c):
                                      - c
                                  - extend(0):
                                    - add(a):
                                      - a
                                - extra_pulses(3, True):
                                  - add(a):
                                    - a
                              - retract(3):
                                - retract(0, no_recurse_first=False):
                                  - pull(-2):
                                  - shift_pistons(0):
                                    - add(c, b):
                                      - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True):
                                      - extend(-1, True):
                                        - add(b):
                                          - b
                                      - extra_pulses(-1, True):
                                    - retract(-1):
                                - less_obs():
                                  - add(sto, sto):
                                    - sto sto
                                - pull(1):
                                  - more_pistons(0):
                                    - add(c):
                                      - c
                                  - full_extend(1):
                                    - extend(1, False):
                                      - add(b):
                                        - b
                                      - add(a):
                                        - a
                                    - extra_pulses(1, False):
                                  - retract(-2):
                                  - full_row(-1):
                                    - row_high(-1):
                                      - full_extend(-1, False):
                                        - extend(-1, False):
                                          - add(b):
                                            - b
                                        - extra_pulses(-1, False):
                                      - retract(-1):
                                  - shift_pistons(0):
                                    - add(c, b):
                                      - c b
                                - row_high(2, True):
                                  - full_extend(2, True):
                                    - extend(2, True):
                                      - more_obs(needs_parity=False):
                                        - add(bobs, bobs):
                                          - bobs bobs
                                      - extend(-1):
                                        - add(b):
                                          - b
                                    - extra_pulses(2, True):
                                      - add(b):
                                        - b
                                  - retract(2):
                                    - less_obs():
                                      - add(sto, sto):
                                        - sto sto
                                    - pull(0):
                                      - more_pistons(0):
                                        - add(c):
                                          - c
                                      - full_extend(0):
                                        - extend(0, False):
                                          - add(a):
                                            - a
                                        - extra_pulses(0, False):
                                      - retract(-3):
                                      - full_row(-2):
                                      - shift_pistons(0):
                                        - add(c, b):
                                          - c b
                                    - shift_pistons(1):
                                      - add(d, c):
                                        - d c
                                    - row_high(1, True):
                                      - full_extend(1, True):
                                        - extend(1, True):
                                          - add(a):
                                            - a
                                        - extra_pulses(1, True):
                                      - retract(1):
                                        - pull(-1):
                                          - add(b):
                                            - b
                                        - row_high(0, True):
                                          - full_extend(0, True):
                                            - extend(0, True):
                                              - add(a):
                                                - a
                                            - extra_pulses(0, True):
                                          - retract(0):
                                            - pull(-2):
                                            - shift_pistons(0):
                                              - add(c, b):
                                                - c b
                                            - row_high(-1, True):
                                              - full_extend(-1, True):
                                                - extend(-1, True):
                                                  - add(b):
                                                    - b
                                                - extra_pulses(-1, True):
                                              - retract(-1):