- opening():
  - full_row(10):
    - more_pistons(5):
      - f
    - row_high(10):
      - full_extend(10, False, no_row_2_opt=True):
        - extend(10, False, no_row_2_opt=True):
          - bsto b
          - more_obs():
            - obs obs
          - more_pistons(3):
            - e
          - bsto b
          - more_obs():
            - obs a obs
          - worm fold
          - more_pistons(1):
            - d
          - b
          - more_obs():
            - bsto
          - b
        - extra_pulses(10, False):
          - a a a a a a a a
      - retract(10):
        - retract(2):
          - less_obs():
            - bsto
          - pull(0):
            - more_pistons(0):
              - c
            - full_extend(0, no_row_2_opt=True):
              - extend(0, False, no_row_2_opt=True):
                - a
            - shift_pistons(0):
              - c b
          - shift_pistons(1):
            - d c
          - row_high(1, True):
            - full_extend(1, True, no_row_2_opt=True):
              - extend(1, True, no_row_2_opt=True):
                - a
            - retract(1):
              - pull(-1):
                - b
              - row_high(0, True):
                - full_extend(0, True, no_row_2_opt=True):
                  - extend(0, True, no_row_2_opt=True):
                    - a
                - retract(0):
                  - shift_pistons(0):
                    - c b
                  - row_high(-1, True):
                    - full_extend(-1, True, no_row_2_opt=True):
                      - extend(-1, True, no_row_2_opt=True):
                        - b
        - less_obs():
          - bsto
          - b bsto
        - full_row(3):
          - more_pistons(1):
            - d
          - row_high(3):
            - full_extend(3, False, no_row_2_opt=True):
              - extend(3, False, no_row_2_opt=True):
                - b
                - more_obs(needs_parity=True):
                  - obs a obs
                - more_pistons(0):
                  - c
                - extend(0):
                  - a
              - extra_pulses(3, False):
                - a
            - retract(3):
              - retract(0, no_recurse_first=False):
                - shift_pistons(0):
                  - c b
                - row_high(-1, True):
                  - full_extend(-1, True, no_row_2_opt=True):
                    - extend(-1, True, no_row_2_opt=True):
                      - b
              - less_obs():
                - bsto
                - b bsto
              - pull(1):
                - more_pistons(0):
                  - c
                - full_extend(1, no_row_2_opt=True):
                  - extend(1, False, no_row_2_opt=True):
                    - b
                    - a
                - full_row(-1):
                  - row_high(-1):
                    - full_extend(-1, False, no_row_2_opt=True):
                      - extend(-1, False, no_row_2_opt=True):
                        - b
                - shift_pistons(0):
                  - c b
              - row_high(2, True):
                - full_extend(2, True, no_row_2_opt=True):
                  - extend(2, True, no_row_2_opt=True):
                    - more_obs(needs_parity=False):
                      - obs a obs
                    - extend(-1):
                      - b
                  - extra_pulses(2, True):
                    - b
                - retract(2):
                  - less_obs():
                    - bsto
                    - b bsto
                  - pull(0):
                    - more_pistons(0):
                      - c
                    - full_extend(0, no_row_2_opt=True):
                      - extend(0, False, no_row_2_opt=True):
                        - a
                    - shift_pistons(0):
                      - c b
                  - shift_pistons(1):
                    - d c
                  - row_high(1, True):
                    - full_extend(1, True, no_row_2_opt=True):
                      - extend(1, True, no_row_2_opt=True):
                        - a
                    - retract(1):
                      - pull(-1):
                        - b
                      - row_high(0, True):
                        - full_extend(0, True, no_row_2_opt=True):
                          - extend(0, True, no_row_2_opt=True):
                            - a
                        - retract(0):
                          - shift_pistons(0):
                            - c b
                          - row_high(-1, True):
                            - full_extend(-1, True, no_row_2_opt=True):
                              - extend(-1, True, no_row_2_opt=True):
                                - b
        - storage_moves(a, b, bsto):
          - -b
          - a b bsto
        - retract(6, no_recurse_first=True):
          - pull(4):
            - more_pistons(2):
              - d
              - wait
              - fold fold
            - full_extend(4, no_row_2_opt=True):
              - extend(4, False, no_row_2_opt=True):
                - b
                - more_obs(needs_parity=True):
                  - obs a obs
                - more_pistons(0):
                  - c
                - extend(1):
                  - b
                  - a
              - extra_pulses(4, False):
                - a
            - retract(1):
              - pull(-1):
                - b
              - row_high(0, True):
                - full_extend(0, True, no_row_2_opt=True):
                  - extend(0, True, no_row_2_opt=True):
                    - a
                - retract(0):
                  - shift_pistons(0):
                    - c b
                  - row_high(-1, True):
                    - full_extend(-1, True, no_row_2_opt=True):
                      - extend(-1, True, no_row_2_opt=True):
                        - b
            - less_obs():
              - bsto
              - b bsto
            - full_row(2):
              - more_pistons(1):
                - d
              - row_high(2):
                - full_extend(2, False, no_row_2_opt=True):
                  - extend(2, False, no_row_2_opt=True):
                    - b
                    - more_obs(needs_parity=True):
                      - obs a obs
                    - extend(-1):
                      - b
                  - extra_pulses(2, False):
                    - b
                - retract(2):
                  - less_obs():
                    - bsto
                    - b bsto
                  - pull(0):
                    - more_pistons(0):
                      - c
                    - full_extend(0, no_row_2_opt=True):
                      - extend(0, False, no_row_2_opt=True):
                        - a
                    - shift_pistons(0):
                      - c b
                  - shift_pistons(1):
                    - d c
                  - row_high(1, True):
                    - full_extend(1, True, no_row_2_opt=True):
                      - extend(1, True, no_row_2_opt=True):
                        - a
                    - retract(1):
                      - pull(-1):
                        - b
                      - row_high(0, True):
                        - full_extend(0, True, no_row_2_opt=True):
                          - extend(0, True, no_row_2_opt=True):
                            - a
                        - retract(0):
                          - shift_pistons(0):
                            - c b
                          - row_high(-1, True):
                            - full_extend(-1, True, no_row_2_opt=True):
                              - extend(-1, True, no_row_2_opt=True):
                                - b
            - shift_pistons(2):
              - wait
              - fold fold
            - shift_pistons(1):
              - d c
            - shift_pistons(0):
              - c b
          - shift_pistons(3):
            - e d
            - wait
            - fold fold
          - row_high(5, True):
            - full_extend(5, True, no_row_2_opt=True):
              - extend(5, True, no_row_2_opt=True):
                - more_obs(needs_parity=False):
                  - obs a obs
                - more_pistons(1):
                  - d
                - extend(2):
                  - bsto b
              - extra_pulses(5, True):
                - a a
            - retract(5):
              - retract(2, no_recurse_first=False):
                - less_obs():
                  - bsto
                - pull(0):
                  - more_pistons(0):
                    - c
                  - full_extend(0, no_row_2_opt=True):
                    - extend(0, False, no_row_2_opt=True):
                      - a
                  - shift_pistons(0):
                    - c b
                - shift_pistons(1):
                  - d c
                - row_high(1, True):
                  - full_extend(1, True, no_row_2_opt=True):
                    - extend(1, True, no_row_2_opt=True):
                      - a
                  - retract(1):
                    - pull(-1):
                      - b
                    - row_high(0, True):
                      - full_extend(0, True, no_row_2_opt=True):
                        - extend(0, True, no_row_2_opt=True):
                          - a
                      - retract(0):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
              - less_obs():
                - bsto
                - b bsto
              - pull(3):
                - more_pistons(1):
                  - d
                - full_extend(3, no_row_2_opt=True):
                  - extend(3, False, no_row_2_opt=True):
                    - b
                    - more_obs(needs_parity=True):
                      - obs a obs
                    - more_pistons(0):
                      - c
                    - extend(0):
                      - a
                  - extra_pulses(3, False):
                    - a
                - retract(0):
                  - shift_pistons(0):
                    - c b
                  - row_high(-1, True):
                    - full_extend(-1, True, no_row_2_opt=True):
                      - extend(-1, True, no_row_2_opt=True):
                        - b
                - less_obs():
                  - bsto
                  - b bsto
                - full_row(1):
                  - more_pistons(0):
                    - c
                  - row_high(1):
                    - full_extend(1, False, no_row_2_opt=True):
                      - extend(1, False, no_row_2_opt=True):
                        - b
                        - a
                    - retract(1):
                      - pull(-1):
                        - b
                      - row_high(0, True):
                        - full_extend(0, True, no_row_2_opt=True):
                          - extend(0, True, no_row_2_opt=True):
                            - a
                        - retract(0):
                          - shift_pistons(0):
                            - c b
                          - row_high(-1, True):
                            - full_extend(-1, True, no_row_2_opt=True):
                              - extend(-1, True, no_row_2_opt=True):
                                - b
                - shift_pistons(1):
                  - d c
                - shift_pistons(0):
                  - c b
              - row_high(4, True):
                - full_extend(4, True, no_row_2_opt=True):
                  - extend(4, True, no_row_2_opt=True):
                    - more_obs(needs_parity=False):
                      - obs a obs
                    - more_pistons(0):
                      - c
                    - extend(1):
                      - b
                      - a
                  - extra_pulses(4, True):
                    - a
                - retract(4):
                  - retract(1, no_recurse_first=False):
                    - pull(-1):
                      - b
                    - row_high(0, True):
                      - full_extend(0, True, no_row_2_opt=True):
                        - extend(0, True, no_row_2_opt=True):
                          - a
                      - retract(0):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - pull(2):
                    - more_pistons(1):
                      - d
                    - full_extend(2, no_row_2_opt=True):
                      - extend(2, False, no_row_2_opt=True):
                        - b
                        - more_obs(needs_parity=True):
                          - obs a obs
                        - extend(-1):
                          - b
                      - extra_pulses(2, False):
                        - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - full_row(0):
                      - more_pistons(0):
                        - c
                      - row_high(0):
                        - full_extend(0, False, no_row_2_opt=True):
                          - extend(0, False, no_row_2_opt=True):
                            - a
                        - retract(0):
                          - shift_pistons(0):
                            - c b
                          - row_high(-1, True):
                            - full_extend(-1, True, no_row_2_opt=True):
                              - extend(-1, True, no_row_2_opt=True):
                                - b
                    - shift_pistons(1):
                      - d c
                    - shift_pistons(0):
                      - c b
                  - shift_pistons(2):
                    - wait
                    - fold fold
                  - row_high(3, True):
                    - full_extend(3, True, no_row_2_opt=True):
                      - extend(3, True, no_row_2_opt=True):
                        - more_obs(needs_parity=False):
                          - obs a obs
                        - more_pistons(0):
                          - c
                        - extend(0):
                          - a
                      - extra_pulses(3, True):
                        - a
                    - retract(3):
                      - retract(0, no_recurse_first=False):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
                      - less_obs():
                        - bsto
                        - b bsto
                      - pull(1):
                        - more_pistons(0):
                          - c
                        - full_extend(1, no_row_2_opt=True):
                          - extend(1, False, no_row_2_opt=True):
                            - b
                            - a
                        - full_row(-1):
                          - row_high(-1):
                            - full_extend(-1, False, no_row_2_opt=True):
                              - extend(-1, False, no_row_2_opt=True):
                                - b
                        - shift_pistons(0):
                          - c b
                      - row_high(2, True):
                        - full_extend(2, True, no_row_2_opt=True):
                          - extend(2, True, no_row_2_opt=True):
                            - more_obs(needs_parity=False):
                              - obs a obs
                            - extend(-1):
                              - b
                          - extra_pulses(2, True):
                            - b
                        - retract(2):
                          - less_obs():
                            - bsto
                            - b bsto
                          - pull(0):
                            - more_pistons(0):
                              - c
                            - full_extend(0, no_row_2_opt=True):
                              - extend(0, False, no_row_2_opt=True):
                                - a
                            - shift_pistons(0):
                              - c b
                          - shift_pistons(1):
                            - d c
                          - row_high(1, True):
                            - full_extend(1, True, no_row_2_opt=True):
                              - extend(1, True, no_row_2_opt=True):
                                - a
                            - retract(1):
                              - pull(-1):
                                - b
                              - row_high(0, True):
                                - full_extend(0, True, no_row_2_opt=True):
                                  - extend(0, True, no_row_2_opt=True):
                                    - a
                                - retract(0):
                                  - shift_pistons(0):
                                    - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True, no_row_2_opt=True):
                                      - extend(-1, True, no_row_2_opt=True):
                                        - b
        - less_obs():
          - bsto
          - b bsto
        - full_row(7):
          - more_pistons(3):
            - e
          - row_high(7):
            - full_extend(7, False, no_row_2_opt=True):
              - extend(7, False, no_row_2_opt=True):
                - b
                - more_obs(needs_parity=True):
                  - obs obs
                - more_pistons(2):
                  - d
                  - wait
                  - fold fold
                - extend(4):
                  - b
                  - more_obs(needs_parity=True):
                    - obs a obs
                  - more_pistons(0):
                    - c
                  - extend(1):
                    - b
                    - a
              - extra_pulses(7, False):
                - a a a a a a a
            - retract(7):
              - retract(4, no_recurse_first=False):
                - retract(1, no_recurse_first=False):
                  - pull(-1):
                    - b
                  - row_high(0, True):
                    - full_extend(0, True, no_row_2_opt=True):
                      - extend(0, True, no_row_2_opt=True):
                        - a
                    - retract(0):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                - less_obs():
                  - bsto
                  - b bsto
                - pull(2):
                  - more_pistons(1):
                    - d
                  - full_extend(2, no_row_2_opt=True):
                    - extend(2, False, no_row_2_opt=True):
                      - b
                      - more_obs(needs_parity=True):
                        - obs a obs
                      - extend(-1):
                        - b
                    - extra_pulses(2, False):
                      - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - full_row(0):
                    - more_pistons(0):
                      - c
                    - row_high(0):
                      - full_extend(0, False, no_row_2_opt=True):
                        - extend(0, False, no_row_2_opt=True):
                          - a
                      - retract(0):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
                  - shift_pistons(1):
                    - d c
                  - shift_pistons(0):
                    - c b
                - shift_pistons(2):
                  - wait
                  - fold fold
                - row_high(3, True):
                  - full_extend(3, True, no_row_2_opt=True):
                    - extend(3, True, no_row_2_opt=True):
                      - more_obs(needs_parity=False):
                        - obs a obs
                      - more_pistons(0):
                        - c
                      - extend(0):
                        - a
                    - extra_pulses(3, True):
                      - a
                  - retract(3):
                    - retract(0, no_recurse_first=False):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - pull(1):
                      - more_pistons(0):
                        - c
                      - full_extend(1, no_row_2_opt=True):
                        - extend(1, False, no_row_2_opt=True):
                          - b
                          - a
                      - full_row(-1):
                        - row_high(-1):
                          - full_extend(-1, False, no_row_2_opt=True):
                            - extend(-1, False, no_row_2_opt=True):
                              - b
                      - shift_pistons(0):
                        - c b
                    - row_high(2, True):
                      - full_extend(2, True, no_row_2_opt=True):
                        - extend(2, True, no_row_2_opt=True):
                          - more_obs(needs_parity=False):
                            - obs a obs
                          - extend(-1):
                            - b
                        - extra_pulses(2, True):
                          - b
                      - retract(2):
                        - less_obs():
                          - bsto
                          - b bsto
                        - pull(0):
                          - more_pistons(0):
                            - c
                          - full_extend(0, no_row_2_opt=True):
                            - extend(0, False, no_row_2_opt=True):
                              - a
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(1):
                          - d c
                        - row_high(1, True):
                          - full_extend(1, True, no_row_2_opt=True):
                            - extend(1, True, no_row_2_opt=True):
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
              - less_obs():
                - bsto
                - b bsto
              - pull(5):
                - more_pistons(2):
                  - d
                  - wait
                  - fold fold
                - full_extend(5, no_row_2_opt=True):
                  - extend(5, False, no_row_2_opt=True):
                    - b
                    - more_obs(needs_parity=True):
                      - obs obs
                    - more_pistons(1):
                      - d
                    - extend(2):
                      - bsto b
                  - extra_pulses(5, False):
                    - a a
                - retract(2):
                  - less_obs():
                    - bsto
                  - pull(0):
                    - more_pistons(0):
                      - c
                    - full_extend(0, no_row_2_opt=True):
                      - extend(0, False, no_row_2_opt=True):
                        - a
                    - shift_pistons(0):
                      - c b
                  - shift_pistons(1):
                    - d c
                  - row_high(1, True):
                    - full_extend(1, True, no_row_2_opt=True):
                      - extend(1, True, no_row_2_opt=True):
                        - a
                    - retract(1):
                      - pull(-1):
                        - b
                      - row_high(0, True):
                        - full_extend(0, True, no_row_2_opt=True):
                          - extend(0, True, no_row_2_opt=True):
                            - a
                        - retract(0):
                          - shift_pistons(0):
                            - c b
                          - row_high(-1, True):
                            - full_extend(-1, True, no_row_2_opt=True):
                              - extend(-1, True, no_row_2_opt=True):
                                - b
                - less_obs():
                  - bsto
                  - b bsto
                - full_row(3):
                  - more_pistons(1):
                    - d
                  - row_high(3):
                    - full_extend(3, False, no_row_2_opt=True):
                      - extend(3, False, no_row_2_opt=True):
                        - b
                        - more_obs(needs_parity=True):
                          - obs obs
                        - more_pistons(0):
                          - c
                        - extend(0):
                          - a
                      - extra_pulses(3, False):
                        - a
                    - retract(3):
                      - retract(0, no_recurse_first=False):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
                      - less_obs():
                        - bsto
                        - b bsto
                      - pull(1):
                        - more_pistons(0):
                          - c
                        - full_extend(1, no_row_2_opt=True):
                          - extend(1, False, no_row_2_opt=True):
                            - b
                            - a
                        - full_row(-1):
                          - row_high(-1):
                            - full_extend(-1, False, no_row_2_opt=True):
                              - extend(-1, False, no_row_2_opt=True):
                                - b
                        - shift_pistons(0):
                          - c b
                      - row_high(2, True):
                        - full_extend(2, True, no_row_2_opt=True):
                          - extend(2, True, no_row_2_opt=True):
                            - more_obs(needs_parity=False):
                              - obs obs
                            - extend(-1):
                              - b
                          - extra_pulses(2, True):
                            - b
                        - retract(2):
                          - less_obs():
                            - bsto
                            - b bsto
                          - pull(0):
                            - more_pistons(0):
                              - c
                            - full_extend(0, no_row_2_opt=True):
                              - extend(0, False, no_row_2_opt=True):
                                - a
                            - shift_pistons(0):
                              - c b
                          - shift_pistons(1):
                            - d c
                          - row_high(1, True):
                            - full_extend(1, True, no_row_2_opt=True):
                              - extend(1, True, no_row_2_opt=True):
                                - a
                            - retract(1):
                              - pull(-1):
                                - b
                              - row_high(0, True):
                                - full_extend(0, True, no_row_2_opt=True):
                                  - extend(0, True, no_row_2_opt=True):
                                    - a
                                - retract(0):
                                  - shift_pistons(0):
                                    - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True, no_row_2_opt=True):
                                      - extend(-1, True, no_row_2_opt=True):
                                        - b
                - shift_pistons(2):
                  - wait
                  - fold fold
                - shift_pistons(1):
                  - d c
                - shift_pistons(0):
                  - c b
              - row_high(6, True):
                - full_extend(6, True, no_row_2_opt=True):
                  - extend(6, True, no_row_2_opt=True):
                    - more_obs(needs_parity=False):
                      - obs obs
                    - more_pistons(1):
                      - d
                    - extend(3):
                      - b
                      - more_obs(needs_parity=True):
                        - obs a obs
                      - more_pistons(0):
                        - c
                      - extend(0):
                        - a
                  - extra_pulses(6, True):
                    - a a a
                - retract(6):
                  - retract(3, no_recurse_first=False):
                    - retract(0, no_recurse_first=False):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - pull(1):
                      - more_pistons(0):
                        - c
                      - full_extend(1, no_row_2_opt=True):
                        - extend(1, False, no_row_2_opt=True):
                          - b
                          - a
                      - full_row(-1):
                        - row_high(-1):
                          - full_extend(-1, False, no_row_2_opt=True):
                            - extend(-1, False, no_row_2_opt=True):
                              - b
                      - shift_pistons(0):
                        - c b
                    - row_high(2, True):
                      - full_extend(2, True, no_row_2_opt=True):
                        - extend(2, True, no_row_2_opt=True):
                          - more_obs(needs_parity=False):
                            - obs a obs
                          - extend(-1):
                            - b
                        - extra_pulses(2, True):
                          - b
                      - retract(2):
                        - less_obs():
                          - bsto
                          - b bsto
                        - pull(0):
                          - more_pistons(0):
                            - c
                          - full_extend(0, no_row_2_opt=True):
                            - extend(0, False, no_row_2_opt=True):
                              - a
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(1):
                          - d c
                        - row_high(1, True):
                          - full_extend(1, True, no_row_2_opt=True):
                            - extend(1, True, no_row_2_opt=True):
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - pull(4):
                    - more_pistons(2):
                      - d
                      - wait
                      - fold fold
                    - full_extend(4, no_row_2_opt=True):
                      - extend(4, False, no_row_2_opt=True):
                        - b
                        - more_obs(needs_parity=True):
                          - obs obs
                        - more_pistons(0):
                          - c
                        - extend(1):
                          - b
                          - a
                      - extra_pulses(4, False):
                        - a
                    - retract(1):
                      - pull(-1):
                        - b
                      - row_high(0, True):
                        - full_extend(0, True, no_row_2_opt=True):
                          - extend(0, True, no_row_2_opt=True):
                            - a
                        - retract(0):
                          - shift_pistons(0):
                            - c b
                          - row_high(-1, True):
                            - full_extend(-1, True, no_row_2_opt=True):
                              - extend(-1, True, no_row_2_opt=True):
                                - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - full_row(2):
                      - more_pistons(1):
                        - d
                      - row_high(2):
                        - full_extend(2, False, no_row_2_opt=True):
                          - extend(2, False, no_row_2_opt=True):
                            - b
                            - more_obs(needs_parity=True):
                              - obs obs
                            - extend(-1):
                              - b
                          - extra_pulses(2, False):
                            - b
                        - retract(2):
                          - less_obs():
                            - bsto
                            - b bsto
                          - pull(0):
                            - more_pistons(0):
                              - c
                            - full_extend(0, no_row_2_opt=True):
                              - extend(0, False, no_row_2_opt=True):
                                - a
                            - shift_pistons(0):
                              - c b
                          - shift_pistons(1):
                            - d c
                          - row_high(1, True):
                            - full_extend(1, True, no_row_2_opt=True):
                              - extend(1, True, no_row_2_opt=True):
                                - a
                            - retract(1):
                              - pull(-1):
                                - b
                              - row_high(0, True):
                                - full_extend(0, True, no_row_2_opt=True):
                                  - extend(0, True, no_row_2_opt=True):
                                    - a
                                - retract(0):
                                  - shift_pistons(0):
                                    - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True, no_row_2_opt=True):
                                      - extend(-1, True, no_row_2_opt=True):
                                        - b
                    - shift_pistons(2):
                      - wait
                      - fold fold
                    - shift_pistons(1):
                      - d c
                    - shift_pistons(0):
                      - c b
                  - shift_pistons(3):
                    - e d
                    - wait
                    - fold fold
                  - row_high(5, True):
                    - full_extend(5, True, no_row_2_opt=True):
                      - extend(5, True, no_row_2_opt=True):
                        - more_obs(needs_parity=False):
                          - obs obs
                        - more_pistons(1):
                          - d
                        - extend(2):
                          - bsto b
                      - extra_pulses(5, True):
                        - a a
                    - retract(5):
                      - retract(2, no_recurse_first=False):
                        - less_obs():
                          - bsto
                        - pull(0):
                          - more_pistons(0):
                            - c
                          - full_extend(0, no_row_2_opt=True):
                            - extend(0, False, no_row_2_opt=True):
                              - a
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(1):
                          - d c
                        - row_high(1, True):
                          - full_extend(1, True, no_row_2_opt=True):
                            - extend(1, True, no_row_2_opt=True):
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                      - less_obs():
                        - bsto
                        - b bsto
                      - pull(3):
                        - more_pistons(1):
                          - d
                        - full_extend(3, no_row_2_opt=True):
                          - extend(3, False, no_row_2_opt=True):
                            - b
                            - more_obs(needs_parity=True):
                              - obs obs
                            - more_pistons(0):
                              - c
                            - extend(0):
                              - a
                          - extra_pulses(3, False):
                            - a
                        - retract(0):
                          - shift_pistons(0):
                            - c b
                          - row_high(-1, True):
                            - full_extend(-1, True, no_row_2_opt=True):
                              - extend(-1, True, no_row_2_opt=True):
                                - b
                        - less_obs():
                          - bsto
                          - b bsto
                        - full_row(1):
                          - more_pistons(0):
                            - c
                          - row_high(1):
                            - full_extend(1, False, no_row_2_opt=True):
                              - extend(1, False, no_row_2_opt=True):
                                - b
                                - a
                            - retract(1):
                              - pull(-1):
                                - b
                              - row_high(0, True):
                                - full_extend(0, True, no_row_2_opt=True):
                                  - extend(0, True, no_row_2_opt=True):
                                    - a
                                - retract(0):
                                  - shift_pistons(0):
                                    - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True, no_row_2_opt=True):
                                      - extend(-1, True, no_row_2_opt=True):
                                        - b
                        - shift_pistons(1):
                          - d c
                        - shift_pistons(0):
                          - c b
                      - row_high(4, True):
                        - full_extend(4, True, no_row_2_opt=True):
                          - extend(4, True, no_row_2_opt=True):
                            - more_obs(needs_parity=False):
                              - obs obs
                            - more_pistons(0):
                              - c
                            - extend(1):
                              - b
                              - a
                          - extra_pulses(4, True):
                            - a
                        - retract(4):
                          - retract(1, no_recurse_first=False):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                          - less_obs():
                            - bsto
                            - b bsto
                          - pull(2):
                            - more_pistons(1):
                              - d
                            - full_extend(2, no_row_2_opt=True):
                              - extend(2, False, no_row_2_opt=True):
                                - b
                                - more_obs(needs_parity=True):
                                  - obs obs
                                - extend(-1):
                                  - b
                              - extra_pulses(2, False):
                                - b
                            - less_obs():
                              - bsto
                              - b bsto
                            - full_row(0):
                              - more_pistons(0):
                                - c
                              - row_high(0):
                                - full_extend(0, False, no_row_2_opt=True):
                                  - extend(0, False, no_row_2_opt=True):
                                    - a
                                - retract(0):
                                  - shift_pistons(0):
                                    - c b
                                  - row_high(-1, True):
                                    - full_extend(-1, True, no_row_2_opt=True):
                                      - extend(-1, True, no_row_2_opt=True):
                                        - b
                            - shift_pistons(1):
                              - d c
                            - shift_pistons(0):
                              - c b
                          - shift_pistons(2):
                            - wait
                            - fold fold
                          - row_high(3, True):
                            - full_extend(3, True, no_row_2_opt=True):
                              - extend(3, True, no_row_2_opt=True):
                                - more_obs(needs_parity=False):
                                  - obs obs
                                - more_pistons(0):
                                  - c
                                - extend(0):
                                  - a
                              - extra_pulses(3, True):
                                - a
                            - retract(3):
                              - retract(0, no_recurse_first=False):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                              - less_obs():
                                - bsto
                                - b bsto
                              - pull(1):
                                - more_pistons(0):
                                  - c
                                - full_extend(1, no_row_2_opt=True):
                                  - extend(1, False, no_row_2_opt=True):
                                    - b
                                    - a
                                - full_row(-1):
                                  - row_high(-1):
                                    - full_extend(-1, False, no_row_2_opt=True):
                                      - extend(-1, False, no_row_2_opt=True):
                                        - b
                                - shift_pistons(0):
                                  - c b
                              - row_high(2, True):
                                - full_extend(2, True, no_row_2_opt=True):
                                  - extend(2, True, no_row_2_opt=True):
                                    - more_obs(needs_parity=False):
                                      - obs obs
                                    - extend(-1):
                                      - b
                                  - extra_pulses(2, True):
                                    - b
                                - retract(2):
                                  - less_obs():
                                    - bsto
                                    - b bsto
                                  - pull(0):
                                    - more_pistons(0):
                                      - c
                                    - full_extend(0, no_row_2_opt=True):
                                      - extend(0, False, no_row_2_opt=True):
                                        - a
                                    - shift_pistons(0):
                                      - c b
                                  - shift_pistons(1):
                                    - d c
                                  - row_high(1, True):
                                    - full_extend(1, True, no_row_2_opt=True):
                                      - extend(1, True, no_row_2_opt=True):
                                        - a
                                    - retract(1):
                                      - pull(-1):
                                        - b
                                      - row_high(0, True):
                                        - full_extend(0, True, no_row_2_opt=True):
                                          - extend(0, True, no_row_2_opt=True):
                                            - a
                                        - retract(0):
                                          - shift_pistons(0):
                                            - c b
                                          - row_high(-1, True):
                                            - full_extend(-1, True, no_row_2_opt=True):
                                              - extend(-1, True, no_row_2_opt=True):
                                                - b
        - storage_moves(a, b, bsto):
          - -b
          - a b bsto
        - pull(8):
          - more_pistons(4):
            - f
          - full_extend(8, no_row_2_opt=True):
            - extend(8, False, no_row_2_opt=True):
              - b
              - more_obs(needs_parity=True):
                - obs obs
              - more_pistons(2):
                - d
                - wait
                - fold fold
              - extend(5):
                - b
                - more_obs(needs_parity=True):
                  - obs a obs
                - more_pistons(1):
                  - d
                - extend(2):
                  - bsto b
            - extra_pulses(8, False):
              - a a a a a a a a
          - retract(5):
            - retract(2, no_recurse_first=False):
              - less_obs():
                - bsto
              - pull(0):
                - more_pistons(0):
                  - c
                - full_extend(0, no_row_2_opt=True):
                  - extend(0, False, no_row_2_opt=True):
                    - a
                - shift_pistons(0):
                  - c b
              - shift_pistons(1):
                - d c
              - row_high(1, True):
                - full_extend(1, True, no_row_2_opt=True):
                  - extend(1, True, no_row_2_opt=True):
                    - a
                - retract(1):
                  - pull(-1):
                    - b
                  - row_high(0, True):
                    - full_extend(0, True, no_row_2_opt=True):
                      - extend(0, True, no_row_2_opt=True):
                        - a
                    - retract(0):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
            - less_obs():
              - bsto
              - b bsto
            - pull(3):
              - more_pistons(1):
                - d
              - full_extend(3, no_row_2_opt=True):
                - extend(3, False, no_row_2_opt=True):
                  - b
                  - more_obs(needs_parity=True):
                    - obs a obs
                  - more_pistons(0):
                    - c
                  - extend(0):
                    - a
                - extra_pulses(3, False):
                  - a
              - retract(0):
                - shift_pistons(0):
                  - c b
                - row_high(-1, True):
                  - full_extend(-1, True, no_row_2_opt=True):
                    - extend(-1, True, no_row_2_opt=True):
                      - b
              - less_obs():
                - bsto
                - b bsto
              - full_row(1):
                - more_pistons(0):
                  - c
                - row_high(1):
                  - full_extend(1, False, no_row_2_opt=True):
                    - extend(1, False, no_row_2_opt=True):
                      - b
                      - a
                  - retract(1):
                    - pull(-1):
                      - b
                    - row_high(0, True):
                      - full_extend(0, True, no_row_2_opt=True):
                        - extend(0, True, no_row_2_opt=True):
                          - a
                      - retract(0):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
              - shift_pistons(1):
                - d c
              - shift_pistons(0):
                - c b
            - row_high(4, True):
              - full_extend(4, True, no_row_2_opt=True):
                - extend(4, True, no_row_2_opt=True):
                  - more_obs(needs_parity=False):
                    - obs a obs
                  - more_pistons(0):
                    - c
                  - extend(1):
                    - b
                    - a
                - extra_pulses(4, True):
                  - a
              - retract(4):
                - retract(1, no_recurse_first=False):
                  - pull(-1):
                    - b
                  - row_high(0, True):
                    - full_extend(0, True, no_row_2_opt=True):
                      - extend(0, True, no_row_2_opt=True):
                        - a
                    - retract(0):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                - less_obs():
                  - bsto
                  - b bsto
                - pull(2):
                  - more_pistons(1):
                    - d
                  - full_extend(2, no_row_2_opt=True):
                    - extend(2, False, no_row_2_opt=True):
                      - b
                      - more_obs(needs_parity=True):
                        - obs a obs
                      - extend(-1):
                        - b
                    - extra_pulses(2, False):
                      - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - full_row(0):
                    - more_pistons(0):
                      - c
                    - row_high(0):
                      - full_extend(0, False, no_row_2_opt=True):
                        - extend(0, False, no_row_2_opt=True):
                          - a
                      - retract(0):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
                  - shift_pistons(1):
                    - d c
                  - shift_pistons(0):
                    - c b
                - shift_pistons(2):
                  - wait
                  - fold fold
                - row_high(3, True):
                  - full_extend(3, True, no_row_2_opt=True):
                    - extend(3, True, no_row_2_opt=True):
                      - more_obs(needs_parity=False):
                        - obs a obs
                      - more_pistons(0):
                        - c
                      - extend(0):
                        - a
                    - extra_pulses(3, True):
                      - a
                  - retract(3):
                    - retract(0, no_recurse_first=False):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - pull(1):
                      - more_pistons(0):
                        - c
                      - full_extend(1, no_row_2_opt=True):
                        - extend(1, False, no_row_2_opt=True):
                          - b
                          - a
                      - full_row(-1):
                        - row_high(-1):
                          - full_extend(-1, False, no_row_2_opt=True):
                            - extend(-1, False, no_row_2_opt=True):
                              - b
                      - shift_pistons(0):
                        - c b
                    - row_high(2, True):
                      - full_extend(2, True, no_row_2_opt=True):
                        - extend(2, True, no_row_2_opt=True):
                          - more_obs(needs_parity=False):
                            - obs a obs
                          - extend(-1):
                            - b
                        - extra_pulses(2, True):
                          - b
                      - retract(2):
                        - less_obs():
                          - bsto
                          - b bsto
                        - pull(0):
                          - more_pistons(0):
                            - c
                          - full_extend(0, no_row_2_opt=True):
                            - extend(0, False, no_row_2_opt=True):
                              - a
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(1):
                          - d c
                        - row_high(1, True):
                          - full_extend(1, True, no_row_2_opt=True):
                            - extend(1, True, no_row_2_opt=True):
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
          - less_obs():
            - bsto
            - b bsto
          - full_row(6):
            - more_pistons(3):
              - e
            - row_high(6):
              - full_extend(6, False, no_row_2_opt=True):
                - extend(6, False, no_row_2_opt=True):
                  - b
                  - more_obs(needs_parity=True):
                    - obs obs
                  - more_pistons(1):
                    - d
                  - extend(3):
                    - b
                    - more_obs(needs_parity=True):
                      - obs a obs
                    - more_pistons(0):
                      - c
                    - extend(0):
                      - a
                - extra_pulses(6, False):
                  - a a a a a a a
              - retract(6):
                - retract(3, no_recurse_first=False):
                  - retract(0, no_recurse_first=False):
                    - shift_pistons(0):
                      - c b
                    - row_high(-1, True):
                      - full_extend(-1, True, no_row_2_opt=True):
                        - extend(-1, True, no_row_2_opt=True):
                          - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - pull(1):
                    - more_pistons(0):
                      - c
                    - full_extend(1, no_row_2_opt=True):
                      - extend(1, False, no_row_2_opt=True):
                        - b
                        - a
                    - full_row(-1):
                      - row_high(-1):
                        - full_extend(-1, False, no_row_2_opt=True):
                          - extend(-1, False, no_row_2_opt=True):
                            - b
                    - shift_pistons(0):
                      - c b
                  - row_high(2, True):
                    - full_extend(2, True, no_row_2_opt=True):
                      - extend(2, True, no_row_2_opt=True):
                        - more_obs(needs_parity=False):
                          - obs a obs
                        - extend(-1):
                          - b
                      - extra_pulses(2, True):
                        - b
                    - retract(2):
                      - less_obs():
                        - bsto
                        - b bsto
                      - pull(0):
                        - more_pistons(0):
                          - c
                        - full_extend(0, no_row_2_opt=True):
                          - extend(0, False, no_row_2_opt=True):
                            - a
                        - shift_pistons(0):
                          - c b
                      - shift_pistons(1):
                        - d c
                      - row_high(1, True):
                        - full_extend(1, True, no_row_2_opt=True):
                          - extend(1, True, no_row_2_opt=True):
                            - a
                        - retract(1):
                          - pull(-1):
                            - b
                          - row_high(0, True):
                            - full_extend(0, True, no_row_2_opt=True):
                              - extend(0, True, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                - less_obs():
                  - bsto
                  - b bsto
                - pull(4):
                  - more_pistons(2):
                    - d
                    - wait
                    - fold fold
                  - full_extend(4, no_row_2_opt=True):
                    - extend(4, False, no_row_2_opt=True):
                      - b
                      - more_obs(needs_parity=True):
                        - obs obs
                      - more_pistons(0):
                        - c
                      - extend(1):
                        - b
                        - a
                    - extra_pulses(4, False):
                      - a
                  - retract(1):
                    - pull(-1):
                      - b
                    - row_high(0, True):
                      - full_extend(0, True, no_row_2_opt=True):
                        - extend(0, True, no_row_2_opt=True):
                          - a
                      - retract(0):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - full_row(2):
                    - more_pistons(1):
                      - d
                    - row_high(2):
                      - full_extend(2, False, no_row_2_opt=True):
                        - extend(2, False, no_row_2_opt=True):
                          - b
                          - more_obs(needs_parity=True):
                            - obs obs
                          - extend(-1):
                            - b
                        - extra_pulses(2, False):
                          - b
                      - retract(2):
                        - less_obs():
                          - bsto
                          - b bsto
                        - pull(0):
                          - more_pistons(0):
                            - c
                          - full_extend(0, no_row_2_opt=True):
                            - extend(0, False, no_row_2_opt=True):
                              - a
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(1):
                          - d c
                        - row_high(1, True):
                          - full_extend(1, True, no_row_2_opt=True):
                            - extend(1, True, no_row_2_opt=True):
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                  - shift_pistons(2):
                    - wait
                    - fold fold
                  - shift_pistons(1):
                    - d c
                  - shift_pistons(0):
                    - c b
                - shift_pistons(3):
                  - e d
                  - wait
                  - fold fold
                - row_high(5, True):
                  - full_extend(5, True, no_row_2_opt=True):
                    - extend(5, True, no_row_2_opt=True):
                      - more_obs(needs_parity=False):
                        - obs obs
                      - more_pistons(1):
                        - d
                      - extend(2):
                        - bsto b
                    - extra_pulses(5, True):
                      - a a
                  - retract(5):
                    - retract(2, no_recurse_first=False):
                      - less_obs():
                        - bsto
                      - pull(0):
                        - more_pistons(0):
                          - c
                        - full_extend(0, no_row_2_opt=True):
                          - extend(0, False, no_row_2_opt=True):
                            - a
                        - shift_pistons(0):
                          - c b
                      - shift_pistons(1):
                        - d c
                      - row_high(1, True):
                        - full_extend(1, True, no_row_2_opt=True):
                          - extend(1, True, no_row_2_opt=True):
                            - a
                        - retract(1):
                          - pull(-1):
                            - b
                          - row_high(0, True):
                            - full_extend(0, True, no_row_2_opt=True):
                              - extend(0, True, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - pull(3):
                      - more_pistons(1):
                        - d
                      - full_extend(3, no_row_2_opt=True):
                        - extend(3, False, no_row_2_opt=True):
                          - b
                          - more_obs(needs_parity=True):
                            - obs obs
                          - more_pistons(0):
                            - c
                          - extend(0):
                            - a
                        - extra_pulses(3, False):
                          - a
                      - retract(0):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
                      - less_obs():
                        - bsto
                        - b bsto
                      - full_row(1):
                        - more_pistons(0):
                          - c
                        - row_high(1):
                          - full_extend(1, False, no_row_2_opt=True):
                            - extend(1, False, no_row_2_opt=True):
                              - b
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                      - shift_pistons(1):
                        - d c
                      - shift_pistons(0):
                        - c b
                    - row_high(4, True):
                      - full_extend(4, True, no_row_2_opt=True):
                        - extend(4, True, no_row_2_opt=True):
                          - more_obs(needs_parity=False):
                            - obs obs
                          - more_pistons(0):
                            - c
                          - extend(1):
                            - b
                            - a
                        - extra_pulses(4, True):
                          - a
                      - retract(4):
                        - retract(1, no_recurse_first=False):
                          - pull(-1):
                            - b
                          - row_high(0, True):
                            - full_extend(0, True, no_row_2_opt=True):
                              - extend(0, True, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                        - less_obs():
                          - bsto
                          - b bsto
                        - pull(2):
                          - more_pistons(1):
                            - d
                          - full_extend(2, no_row_2_opt=True):
                            - extend(2, False, no_row_2_opt=True):
                              - b
                              - more_obs(needs_parity=True):
                                - obs obs
                              - extend(-1):
                                - b
                            - extra_pulses(2, False):
                              - b
                          - less_obs():
                            - bsto
                            - b bsto
                          - full_row(0):
                            - more_pistons(0):
                              - c
                            - row_high(0):
                              - full_extend(0, False, no_row_2_opt=True):
                                - extend(0, False, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                          - shift_pistons(1):
                            - d c
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(2):
                          - wait
                          - fold fold
                        - row_high(3, True):
                          - full_extend(3, True, no_row_2_opt=True):
                            - extend(3, True, no_row_2_opt=True):
                              - more_obs(needs_parity=False):
                                - obs obs
                              - more_pistons(0):
                                - c
                              - extend(0):
                                - a
                            - extra_pulses(3, True):
                              - a
                          - retract(3):
                            - retract(0, no_recurse_first=False):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                            - less_obs():
                              - bsto
                              - b bsto
                            - pull(1):
                              - more_pistons(0):
                                - c
                              - full_extend(1, no_row_2_opt=True):
                                - extend(1, False, no_row_2_opt=True):
                                  - b
                                  - a
                              - full_row(-1):
                                - row_high(-1):
                                  - full_extend(-1, False, no_row_2_opt=True):
                                    - extend(-1, False, no_row_2_opt=True):
                                      - b
                              - shift_pistons(0):
                                - c b
                            - row_high(2, True):
                              - full_extend(2, True, no_row_2_opt=True):
                                - extend(2, True, no_row_2_opt=True):
                                  - more_obs(needs_parity=False):
                                    - obs obs
                                  - extend(-1):
                                    - b
                                - extra_pulses(2, True):
                                  - b
                              - retract(2):
                                - less_obs():
                                  - bsto
                                  - b bsto
                                - pull(0):
                                  - more_pistons(0):
                                    - c
                                  - full_extend(0, no_row_2_opt=True):
                                    - extend(0, False, no_row_2_opt=True):
                                      - a
                                  - shift_pistons(0):
                                    - c b
                                - shift_pistons(1):
                                  - d c
                                - row_high(1, True):
                                  - full_extend(1, True, no_row_2_opt=True):
                                    - extend(1, True, no_row_2_opt=True):
                                      - a
                                  - retract(1):
                                    - pull(-1):
                                      - b
                                    - row_high(0, True):
                                      - full_extend(0, True, no_row_2_opt=True):
                                        - extend(0, True, no_row_2_opt=True):
                                          - a
                                      - retract(0):
                                        - shift_pistons(0):
                                          - c b
                                        - row_high(-1, True):
                                          - full_extend(-1, True, no_row_2_opt=True):
                                            - extend(-1, True, no_row_2_opt=True):
                                              - b
          - shift_pistons(4):
            - f e
          - shift_pistons(3):
            - e d
            - wait
            - fold fold
          - shift_pistons(2):
            - -fold2
          - shift_pistons(1):
            - d c
          - shift_pistons(0):
            - c b
        - shift_pistons(5):
          - d wait fold d c c b b
        - row_high(9, True):
          - full_extend(9, True, no_row_2_opt=True):
            - extend(9, True, no_row_2_opt=True):
              - more_obs():
                - obs obs
              - more_pistons(3):
                - e
              - bsto b
              - more_obs(True):
                - obs a obs
              - more_pistons(1):
                - d
              - b
              - more_obs():
                - bsto
              - b
            - extra_pulses(9, True):
              - a a a a
          - retract(9):
            - retract(2):
              - less_obs():
                - bsto
              - pull(0):
                - more_pistons(0):
                  - c
                - full_extend(0, no_row_2_opt=True):
                  - extend(0, False, no_row_2_opt=True):
                    - a
                - shift_pistons(0):
                  - c b
              - shift_pistons(1):
                - d c
              - row_high(1, True):
                - full_extend(1, True, no_row_2_opt=True):
                  - extend(1, True, no_row_2_opt=True):
                    - a
                - retract(1):
                  - pull(-1):
                    - b
                  - row_high(0, True):
                    - full_extend(0, True, no_row_2_opt=True):
                      - extend(0, True, no_row_2_opt=True):
                        - a
                    - retract(0):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
            - less_obs():
              - bsto
              - b bsto
            - full_row(3):
              - more_pistons(1):
                - d
              - row_high(3):
                - full_extend(3, False, no_row_2_opt=True):
                  - extend(3, False, no_row_2_opt=True):
                    - b
                    - more_obs(needs_parity=True):
                      - obs a obs
                    - more_pistons(0):
                      - c
                    - extend(0):
                      - a
                  - extra_pulses(3, False):
                    - a
                - retract(3):
                  - retract(0, no_recurse_first=False):
                    - shift_pistons(0):
                      - c b
                    - row_high(-1, True):
                      - full_extend(-1, True, no_row_2_opt=True):
                        - extend(-1, True, no_row_2_opt=True):
                          - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - pull(1):
                    - more_pistons(0):
                      - c
                    - full_extend(1, no_row_2_opt=True):
                      - extend(1, False, no_row_2_opt=True):
                        - b
                        - a
                    - full_row(-1):
                      - row_high(-1):
                        - full_extend(-1, False, no_row_2_opt=True):
                          - extend(-1, False, no_row_2_opt=True):
                            - b
                    - shift_pistons(0):
                      - c b
                  - row_high(2, True):
                    - full_extend(2, True, no_row_2_opt=True):
                      - extend(2, True, no_row_2_opt=True):
                        - more_obs(needs_parity=False):
                          - obs a obs
                        - extend(-1):
                          - b
                      - extra_pulses(2, True):
                        - b
                    - retract(2):
                      - less_obs():
                        - bsto
                        - b bsto
                      - pull(0):
                        - more_pistons(0):
                          - c
                        - full_extend(0, no_row_2_opt=True):
                          - extend(0, False, no_row_2_opt=True):
                            - a
                        - shift_pistons(0):
                          - c b
                      - shift_pistons(1):
                        - d c
                      - row_high(1, True):
                        - full_extend(1, True, no_row_2_opt=True):
                          - extend(1, True, no_row_2_opt=True):
                            - a
                        - retract(1):
                          - pull(-1):
                            - b
                          - row_high(0, True):
                            - full_extend(0, True, no_row_2_opt=True):
                              - extend(0, True, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
            - storage_moves(a, bsto):
              - -b
              - a bsto
            - retract(6, no_recurse_first=True):
              - pull(4):
                - more_pistons(2):
                  - d
                  - fold fold
                - full_extend(4, no_row_2_opt=True):
                  - extend(4, False, no_row_2_opt=True):
                    - b
                    - more_obs(needs_parity=True):
                      - obs a obs
                    - more_pistons(0):
                      - c
                    - extend(1):
                      - b
                      - a
                  - extra_pulses(4, False):
                    - a
                - retract(1):
                  - pull(-1):
                    - b
                  - row_high(0, True):
                    - full_extend(0, True, no_row_2_opt=True):
                      - extend(0, True, no_row_2_opt=True):
                        - a
                    - retract(0):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                - less_obs():
                  - bsto
                  - b bsto
                - full_row(2):
                  - more_pistons(1):
                    - d
                  - row_high(2):
                    - full_extend(2, False, no_row_2_opt=True):
                      - extend(2, False, no_row_2_opt=True):
                        - b
                        - more_obs(needs_parity=True):
                          - obs a obs
                        - extend(-1):
                          - b
                      - extra_pulses(2, False):
                        - b
                    - retract(2):
                      - less_obs():
                        - bsto
                        - b bsto
                      - pull(0):
                        - more_pistons(0):
                          - c
                        - full_extend(0, no_row_2_opt=True):
                          - extend(0, False, no_row_2_opt=True):
                            - a
                        - shift_pistons(0):
                          - c b
                      - shift_pistons(1):
                        - d c
                      - row_high(1, True):
                        - full_extend(1, True, no_row_2_opt=True):
                          - extend(1, True, no_row_2_opt=True):
                            - a
                        - retract(1):
                          - pull(-1):
                            - b
                          - row_high(0, True):
                            - full_extend(0, True, no_row_2_opt=True):
                              - extend(0, True, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                - shift_pistons(2):
                  - fold fold
                - shift_pistons(1):
                  - d c
                - shift_pistons(0):
                  - c b
              - shift_pistons(3):
                - e d
                - fold fold
              - row_high(5, True):
                - full_extend(5, True, no_row_2_opt=True):
                  - extend(5, True, no_row_2_opt=True):
                    - more_obs(needs_parity=False):
                      - obs a obs
                    - more_pistons(1):
                      - d
                    - extend(2):
                      - bsto b
                  - extra_pulses(5, True):
                    - a a
                - retract(5):
                  - retract(2, no_recurse_first=False):
                    - less_obs():
                      - bsto
                    - pull(0):
                      - more_pistons(0):
                        - c
                      - full_extend(0, no_row_2_opt=True):
                        - extend(0, False, no_row_2_opt=True):
                          - a
                      - shift_pistons(0):
                        - c b
                    - shift_pistons(1):
                      - d c
                    - row_high(1, True):
                      - full_extend(1, True, no_row_2_opt=True):
                        - extend(1, True, no_row_2_opt=True):
                          - a
                      - retract(1):
                        - pull(-1):
                          - b
                        - row_high(0, True):
                          - full_extend(0, True, no_row_2_opt=True):
                            - extend(0, True, no_row_2_opt=True):
                              - a
                          - retract(0):
                            - shift_pistons(0):
                              - c b
                            - row_high(-1, True):
                              - full_extend(-1, True, no_row_2_opt=True):
                                - extend(-1, True, no_row_2_opt=True):
                                  - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - pull(3):
                    - more_pistons(1):
                      - d
                    - full_extend(3, no_row_2_opt=True):
                      - extend(3, False, no_row_2_opt=True):
                        - b
                        - more_obs(needs_parity=True):
                          - obs a obs
                        - more_pistons(0):
                          - c
                        - extend(0):
                          - a
                      - extra_pulses(3, False):
                        - a
                    - retract(0):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - full_row(1):
                      - more_pistons(0):
                        - c
                      - row_high(1):
                        - full_extend(1, False, no_row_2_opt=True):
                          - extend(1, False, no_row_2_opt=True):
                            - b
                            - a
                        - retract(1):
                          - pull(-1):
                            - b
                          - row_high(0, True):
                            - full_extend(0, True, no_row_2_opt=True):
                              - extend(0, True, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                    - shift_pistons(1):
                      - d c
                    - shift_pistons(0):
                      - c b
                  - row_high(4, True):
                    - full_extend(4, True, no_row_2_opt=True):
                      - extend(4, True, no_row_2_opt=True):
                        - more_obs(needs_parity=False):
                          - obs a obs
                        - more_pistons(0):
                          - c
                        - extend(1):
                          - b
                          - a
                      - extra_pulses(4, True):
                        - a
                    - retract(4):
                      - retract(1, no_recurse_first=False):
                        - pull(-1):
                          - b
                        - row_high(0, True):
                          - full_extend(0, True, no_row_2_opt=True):
                            - extend(0, True, no_row_2_opt=True):
                              - a
                          - retract(0):
                            - shift_pistons(0):
                              - c b
                            - row_high(-1, True):
                              - full_extend(-1, True, no_row_2_opt=True):
                                - extend(-1, True, no_row_2_opt=True):
                                  - b
                      - less_obs():
                        - bsto
                        - b bsto
                      - pull(2):
                        - more_pistons(1):
                          - d
                        - full_extend(2, no_row_2_opt=True):
                          - extend(2, False, no_row_2_opt=True):
                            - b
                            - more_obs(needs_parity=True):
                              - obs a obs
                            - extend(-1):
                              - b
                          - extra_pulses(2, False):
                            - b
                        - less_obs():
                          - bsto
                          - b bsto
                        - full_row(0):
                          - more_pistons(0):
                            - c
                          - row_high(0):
                            - full_extend(0, False, no_row_2_opt=True):
                              - extend(0, False, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                        - shift_pistons(1):
                          - d c
                        - shift_pistons(0):
                          - c b
                      - shift_pistons(2):
                        - fold fold
                      - row_high(3, True):
                        - full_extend(3, True, no_row_2_opt=True):
                          - extend(3, True, no_row_2_opt=True):
                            - more_obs(needs_parity=False):
                              - obs a obs
                            - more_pistons(0):
                              - c
                            - extend(0):
                              - a
                          - extra_pulses(3, True):
                            - a
                        - retract(3):
                          - retract(0, no_recurse_first=False):
                            - shift_pistons(0):
                              - c b
                            - row_high(-1, True):
                              - full_extend(-1, True, no_row_2_opt=True):
                                - extend(-1, True, no_row_2_opt=True):
                                  - b
                          - less_obs():
                            - bsto
                            - b bsto
                          - pull(1):
                            - more_pistons(0):
                              - c
                            - full_extend(1, no_row_2_opt=True):
                              - extend(1, False, no_row_2_opt=True):
                                - b
                                - a
                            - full_row(-1):
                              - row_high(-1):
                                - full_extend(-1, False, no_row_2_opt=True):
                                  - extend(-1, False, no_row_2_opt=True):
                                    - b
                            - shift_pistons(0):
                              - c b
                          - row_high(2, True):
                            - full_extend(2, True, no_row_2_opt=True):
                              - extend(2, True, no_row_2_opt=True):
                                - more_obs(needs_parity=False):
                                  - obs a obs
                                - extend(-1):
                                  - b
                              - extra_pulses(2, True):
                                - b
                            - retract(2):
                              - less_obs():
                                - bsto
                                - b bsto
                              - pull(0):
                                - more_pistons(0):
                                  - c
                                - full_extend(0, no_row_2_opt=True):
                                  - extend(0, False, no_row_2_opt=True):
                                    - a
                                - shift_pistons(0):
                                  - c b
                              - shift_pistons(1):
                                - d c
                              - row_high(1, True):
                                - full_extend(1, True, no_row_2_opt=True):
                                  - extend(1, True, no_row_2_opt=True):
                                    - a
                                - retract(1):
                                  - pull(-1):
                                    - b
                                  - row_high(0, True):
                                    - full_extend(0, True, no_row_2_opt=True):
                                      - extend(0, True, no_row_2_opt=True):
                                        - a
                                    - retract(0):
                                      - shift_pistons(0):
                                        - c b
                                      - row_high(-1, True):
                                        - full_extend(-1, True, no_row_2_opt=True):
                                          - extend(-1, True, no_row_2_opt=True):
                                            - b
            - less_obs():
              - bsto
              - b bsto
            - pull(7):
              - more_pistons(3):
                - e
              - full_extend(7, no_row_2_opt=True):
                - extend(7, False, no_row_2_opt=True):
                  - b
                  - more_obs(needs_parity=True):
                    - obs obs
                  - more_pistons(2):
                    - d
                    - fold fold
                  - extend(4):
                    - b
                    - more_obs(needs_parity=True):
                      - obs a obs
                    - more_pistons(0):
                      - c
                    - extend(1):
                      - b
                      - a
                - extra_pulses(7, False):
                  - a a a a a a a
              - retract(4):
                - retract(1, no_recurse_first=False):
                  - pull(-1):
                    - b
                  - row_high(0, True):
                    - full_extend(0, True, no_row_2_opt=True):
                      - extend(0, True, no_row_2_opt=True):
                        - a
                    - retract(0):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                - less_obs():
                  - bsto
                  - b bsto
                - pull(2):
                  - more_pistons(1):
                    - d
                  - full_extend(2, no_row_2_opt=True):
                    - extend(2, False, no_row_2_opt=True):
                      - b
                      - more_obs(needs_parity=True):
                        - obs a obs
                      - extend(-1):
                        - b
                    - extra_pulses(2, False):
                      - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - full_row(0):
                    - more_pistons(0):
                      - c
                    - row_high(0):
                      - full_extend(0, False, no_row_2_opt=True):
                        - extend(0, False, no_row_2_opt=True):
                          - a
                      - retract(0):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
                  - shift_pistons(1):
                    - d c
                  - shift_pistons(0):
                    - c b
                - shift_pistons(2):
                  - fold fold
                - row_high(3, True):
                  - full_extend(3, True, no_row_2_opt=True):
                    - extend(3, True, no_row_2_opt=True):
                      - more_obs(needs_parity=False):
                        - obs a obs
                      - more_pistons(0):
                        - c
                      - extend(0):
                        - a
                    - extra_pulses(3, True):
                      - a
                  - retract(3):
                    - retract(0, no_recurse_first=False):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - pull(1):
                      - more_pistons(0):
                        - c
                      - full_extend(1, no_row_2_opt=True):
                        - extend(1, False, no_row_2_opt=True):
                          - b
                          - a
                      - full_row(-1):
                        - row_high(-1):
                          - full_extend(-1, False, no_row_2_opt=True):
                            - extend(-1, False, no_row_2_opt=True):
                              - b
                      - shift_pistons(0):
                        - c b
                    - row_high(2, True):
                      - full_extend(2, True, no_row_2_opt=True):
                        - extend(2, True, no_row_2_opt=True):
                          - more_obs(needs_parity=False):
                            - obs a obs
                          - extend(-1):
                            - b
                        - extra_pulses(2, True):
                          - b
                      - retract(2):
                        - less_obs():
                          - bsto
                          - b bsto
                        - pull(0):
                          - more_pistons(0):
                            - c
                          - full_extend(0, no_row_2_opt=True):
                            - extend(0, False, no_row_2_opt=True):
                              - a
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(1):
                          - d c
                        - row_high(1, True):
                          - full_extend(1, True, no_row_2_opt=True):
                            - extend(1, True, no_row_2_opt=True):
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
              - less_obs():
                - bsto
                - b bsto
              - full_row(5):
                - more_pistons(2):
                  - d
                  - fold fold
                - row_high(5):
                  - full_extend(5, False, no_row_2_opt=True):
                    - extend(5, False, no_row_2_opt=True):
                      - b
                      - more_obs(needs_parity=True):
                        - obs obs
                      - more_pistons(1):
                        - d
                      - extend(2):
                        - bsto b
                    - extra_pulses(5, False):
                      - a a
                  - retract(5):
                    - retract(2, no_recurse_first=False):
                      - less_obs():
                        - bsto
                      - pull(0):
                        - more_pistons(0):
                          - c
                        - full_extend(0, no_row_2_opt=True):
                          - extend(0, False, no_row_2_opt=True):
                            - a
                        - shift_pistons(0):
                          - c b
                      - shift_pistons(1):
                        - d c
                      - row_high(1, True):
                        - full_extend(1, True, no_row_2_opt=True):
                          - extend(1, True, no_row_2_opt=True):
                            - a
                        - retract(1):
                          - pull(-1):
                            - b
                          - row_high(0, True):
                            - full_extend(0, True, no_row_2_opt=True):
                              - extend(0, True, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - pull(3):
                      - more_pistons(1):
                        - d
                      - full_extend(3, no_row_2_opt=True):
                        - extend(3, False, no_row_2_opt=True):
                          - b
                          - more_obs(needs_parity=True):
                            - obs obs
                          - more_pistons(0):
                            - c
                          - extend(0):
                            - a
                        - extra_pulses(3, False):
                          - a
                      - retract(0):
                        - shift_pistons(0):
                          - c b
                        - row_high(-1, True):
                          - full_extend(-1, True, no_row_2_opt=True):
                            - extend(-1, True, no_row_2_opt=True):
                              - b
                      - less_obs():
                        - bsto
                        - b bsto
                      - full_row(1):
                        - more_pistons(0):
                          - c
                        - row_high(1):
                          - full_extend(1, False, no_row_2_opt=True):
                            - extend(1, False, no_row_2_opt=True):
                              - b
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                      - shift_pistons(1):
                        - d c
                      - shift_pistons(0):
                        - c b
                    - row_high(4, True):
                      - full_extend(4, True, no_row_2_opt=True):
                        - extend(4, True, no_row_2_opt=True):
                          - more_obs(needs_parity=False):
                            - obs obs
                          - more_pistons(0):
                            - c
                          - extend(1):
                            - b
                            - a
                        - extra_pulses(4, True):
                          - a
                      - retract(4):
                        - retract(1, no_recurse_first=False):
                          - pull(-1):
                            - b
                          - row_high(0, True):
                            - full_extend(0, True, no_row_2_opt=True):
                              - extend(0, True, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                        - less_obs():
                          - bsto
                          - b bsto
                        - pull(2):
                          - more_pistons(1):
                            - d
                          - full_extend(2, no_row_2_opt=True):
                            - extend(2, False, no_row_2_opt=True):
                              - b
                              - more_obs(needs_parity=True):
                                - obs obs
                              - extend(-1):
                                - b
                            - extra_pulses(2, False):
                              - b
                          - less_obs():
                            - bsto
                            - b bsto
                          - full_row(0):
                            - more_pistons(0):
                              - c
                            - row_high(0):
                              - full_extend(0, False, no_row_2_opt=True):
                                - extend(0, False, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                          - shift_pistons(1):
                            - d c
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(2):
                          - fold fold
                        - row_high(3, True):
                          - full_extend(3, True, no_row_2_opt=True):
                            - extend(3, True, no_row_2_opt=True):
                              - more_obs(needs_parity=False):
                                - obs obs
                              - more_pistons(0):
                                - c
                              - extend(0):
                                - a
                            - extra_pulses(3, True):
                              - a
                          - retract(3):
                            - retract(0, no_recurse_first=False):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                            - less_obs():
                              - bsto
                              - b bsto
                            - pull(1):
                              - more_pistons(0):
                                - c
                              - full_extend(1, no_row_2_opt=True):
                                - extend(1, False, no_row_2_opt=True):
                                  - b
                                  - a
                              - full_row(-1):
                                - row_high(-1):
                                  - full_extend(-1, False, no_row_2_opt=True):
                                    - extend(-1, False, no_row_2_opt=True):
                                      - b
                              - shift_pistons(0):
                                - c b
                            - row_high(2, True):
                              - full_extend(2, True, no_row_2_opt=True):
                                - extend(2, True, no_row_2_opt=True):
                                  - more_obs(needs_parity=False):
                                    - obs obs
                                  - extend(-1):
                                    - b
                                - extra_pulses(2, True):
                                  - b
                              - retract(2):
                                - less_obs():
                                  - bsto
                                  - b bsto
                                - pull(0):
                                  - more_pistons(0):
                                    - c
                                  - full_extend(0, no_row_2_opt=True):
                                    - extend(0, False, no_row_2_opt=True):
                                      - a
                                  - shift_pistons(0):
                                    - c b
                                - shift_pistons(1):
                                  - d c
                                - row_high(1, True):
                                  - full_extend(1, True, no_row_2_opt=True):
                                    - extend(1, True, no_row_2_opt=True):
                                      - a
                                  - retract(1):
                                    - pull(-1):
                                      - b
                                    - row_high(0, True):
                                      - full_extend(0, True, no_row_2_opt=True):
                                        - extend(0, True, no_row_2_opt=True):
                                          - a
                                      - retract(0):
                                        - shift_pistons(0):
                                          - c b
                                        - row_high(-1, True):
                                          - full_extend(-1, True, no_row_2_opt=True):
                                            - extend(-1, True, no_row_2_opt=True):
                                              - b
              - shift_pistons(3):
                - e d
                - fold fold
              - shift_pistons(2):
                - -fold2
              - shift_pistons(1):
                - d c
              - shift_pistons(0):
                - c b
            - row_high(8, True):
              - full_extend(8, True, no_row_2_opt=True):
                - extend(8, True, no_row_2_opt=True):
                  - more_obs(needs_parity=False):
                    - obs obs
                  - more_pistons(2):
                    - d
                    - fold fold
                  - extend(5):
                    - b
                    - more_obs(needs_parity=True):
                      - obs a obs
                    - more_pistons(1):
                      - d
                    - extend(2):
                      - bsto b
                - extra_pulses(8, True):
                  - a a a a
              - retract(8):
                - retract(5, no_recurse_first=False):
                  - retract(2, no_recurse_first=False):
                    - less_obs():
                      - bsto
                    - pull(0):
                      - more_pistons(0):
                        - c
                      - full_extend(0, no_row_2_opt=True):
                        - extend(0, False, no_row_2_opt=True):
                          - a
                      - shift_pistons(0):
                        - c b
                    - shift_pistons(1):
                      - d c
                    - row_high(1, True):
                      - full_extend(1, True, no_row_2_opt=True):
                        - extend(1, True, no_row_2_opt=True):
                          - a
                      - retract(1):
                        - pull(-1):
                          - b
                        - row_high(0, True):
                          - full_extend(0, True, no_row_2_opt=True):
                            - extend(0, True, no_row_2_opt=True):
                              - a
                          - retract(0):
                            - shift_pistons(0):
                              - c b
                            - row_high(-1, True):
                              - full_extend(-1, True, no_row_2_opt=True):
                                - extend(-1, True, no_row_2_opt=True):
                                  - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - pull(3):
                    - more_pistons(1):
                      - d
                    - full_extend(3, no_row_2_opt=True):
                      - extend(3, False, no_row_2_opt=True):
                        - b
                        - more_obs(needs_parity=True):
                          - obs a obs
                        - more_pistons(0):
                          - c
                        - extend(0):
                          - a
                      - extra_pulses(3, False):
                        - a
                    - retract(0):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - full_row(1):
                      - more_pistons(0):
                        - c
                      - row_high(1):
                        - full_extend(1, False, no_row_2_opt=True):
                          - extend(1, False, no_row_2_opt=True):
                            - b
                            - a
                        - retract(1):
                          - pull(-1):
                            - b
                          - row_high(0, True):
                            - full_extend(0, True, no_row_2_opt=True):
                              - extend(0, True, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                    - shift_pistons(1):
                      - d c
                    - shift_pistons(0):
                      - c b
                  - row_high(4, True):
                    - full_extend(4, True, no_row_2_opt=True):
                      - extend(4, True, no_row_2_opt=True):
                        - more_obs(needs_parity=False):
                          - obs a obs
                        - more_pistons(0):
                          - c
                        - extend(1):
                          - b
                          - a
                      - extra_pulses(4, True):
                        - a
                    - retract(4):
                      - retract(1, no_recurse_first=False):
                        - pull(-1):
                          - b
                        - row_high(0, True):
                          - full_extend(0, True, no_row_2_opt=True):
                            - extend(0, True, no_row_2_opt=True):
                              - a
                          - retract(0):
                            - shift_pistons(0):
                              - c b
                            - row_high(-1, True):
                              - full_extend(-1, True, no_row_2_opt=True):
                                - extend(-1, True, no_row_2_opt=True):
                                  - b
                      - less_obs():
                        - bsto
                        - b bsto
                      - pull(2):
                        - more_pistons(1):
                          - d
                        - full_extend(2, no_row_2_opt=True):
                          - extend(2, False, no_row_2_opt=True):
                            - b
                            - more_obs(needs_parity=True):
                              - obs a obs
                            - extend(-1):
                              - b
                          - extra_pulses(2, False):
                            - b
                        - less_obs():
                          - bsto
                          - b bsto
                        - full_row(0):
                          - more_pistons(0):
                            - c
                          - row_high(0):
                            - full_extend(0, False, no_row_2_opt=True):
                              - extend(0, False, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                        - shift_pistons(1):
                          - d c
                        - shift_pistons(0):
                          - c b
                      - shift_pistons(2):
                        - fold fold
                      - row_high(3, True):
                        - full_extend(3, True, no_row_2_opt=True):
                          - extend(3, True, no_row_2_opt=True):
                            - more_obs(needs_parity=False):
                              - obs a obs
                            - more_pistons(0):
                              - c
                            - extend(0):
                              - a
                          - extra_pulses(3, True):
                            - a
                        - retract(3):
                          - retract(0, no_recurse_first=False):
                            - shift_pistons(0):
                              - c b
                            - row_high(-1, True):
                              - full_extend(-1, True, no_row_2_opt=True):
                                - extend(-1, True, no_row_2_opt=True):
                                  - b
                          - less_obs():
                            - bsto
                            - b bsto
                          - pull(1):
                            - more_pistons(0):
                              - c
                            - full_extend(1, no_row_2_opt=True):
                              - extend(1, False, no_row_2_opt=True):
                                - b
                                - a
                            - full_row(-1):
                              - row_high(-1):
                                - full_extend(-1, False, no_row_2_opt=True):
                                  - extend(-1, False, no_row_2_opt=True):
                                    - b
                            - shift_pistons(0):
                              - c b
                          - row_high(2, True):
                            - full_extend(2, True, no_row_2_opt=True):
                              - extend(2, True, no_row_2_opt=True):
                                - more_obs(needs_parity=False):
                                  - obs a obs
                                - extend(-1):
                                  - b
                              - extra_pulses(2, True):
                                - b
                            - retract(2):
                              - less_obs():
                                - bsto
                                - b bsto
                              - pull(0):
                                - more_pistons(0):
                                  - c
                                - full_extend(0, no_row_2_opt=True):
                                  - extend(0, False, no_row_2_opt=True):
                                    - a
                                - shift_pistons(0):
                                  - c b
                              - shift_pistons(1):
                                - d c
                              - row_high(1, True):
                                - full_extend(1, True, no_row_2_opt=True):
                                  - extend(1, True, no_row_2_opt=True):
                                    - a
                                - retract(1):
                                  - pull(-1):
                                    - b
                                  - row_high(0, True):
                                    - full_extend(0, True, no_row_2_opt=True):
                                      - extend(0, True, no_row_2_opt=True):
                                        - a
                                    - retract(0):
                                      - shift_pistons(0):
                                        - c b
                                      - row_high(-1, True):
                                        - full_extend(-1, True, no_row_2_opt=True):
                                          - extend(-1, True, no_row_2_opt=True):
                                            - b
                - less_obs():
                  - bsto
                  - b bsto
                - pull(6):
                  - more_pistons(3):
                    - e
                  - full_extend(6, no_row_2_opt=True):
                    - extend(6, False, no_row_2_opt=True):
                      - b
                      - more_obs(needs_parity=True):
                        - obs obs
                      - more_pistons(1):
                        - d
                      - extend(3):
                        - b
                        - more_obs(needs_parity=True):
                          - obs a obs
                        - more_pistons(0):
                          - c
                        - extend(0):
                          - a
                    - extra_pulses(6, False):
                      - a a a a a a a
                  - retract(3):
                    - retract(0, no_recurse_first=False):
                      - shift_pistons(0):
                        - c b
                      - row_high(-1, True):
                        - full_extend(-1, True, no_row_2_opt=True):
                          - extend(-1, True, no_row_2_opt=True):
                            - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - pull(1):
                      - more_pistons(0):
                        - c
                      - full_extend(1, no_row_2_opt=True):
                        - extend(1, False, no_row_2_opt=True):
                          - b
                          - a
                      - full_row(-1):
                        - row_high(-1):
                          - full_extend(-1, False, no_row_2_opt=True):
                            - extend(-1, False, no_row_2_opt=True):
                              - b
                      - shift_pistons(0):
                        - c b
                    - row_high(2, True):
                      - full_extend(2, True, no_row_2_opt=True):
                        - extend(2, True, no_row_2_opt=True):
                          - more_obs(needs_parity=False):
                            - obs a obs
                          - extend(-1):
                            - b
                        - extra_pulses(2, True):
                          - b
                      - retract(2):
                        - less_obs():
                          - bsto
                          - b bsto
                        - pull(0):
                          - more_pistons(0):
                            - c
                          - full_extend(0, no_row_2_opt=True):
                            - extend(0, False, no_row_2_opt=True):
                              - a
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(1):
                          - d c
                        - row_high(1, True):
                          - full_extend(1, True, no_row_2_opt=True):
                            - extend(1, True, no_row_2_opt=True):
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                  - less_obs():
                    - bsto
                    - b bsto
                  - full_row(4):
                    - more_pistons(2):
                      - d
                      - fold fold
                    - row_high(4):
                      - full_extend(4, False, no_row_2_opt=True):
                        - extend(4, False, no_row_2_opt=True):
                          - b
                          - more_obs(needs_parity=True):
                            - obs obs
                          - more_pistons(0):
                            - c
                          - extend(1):
                            - b
                            - a
                        - extra_pulses(4, False):
                          - a
                      - retract(4):
                        - retract(1, no_recurse_first=False):
                          - pull(-1):
                            - b
                          - row_high(0, True):
                            - full_extend(0, True, no_row_2_opt=True):
                              - extend(0, True, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                        - less_obs():
                          - bsto
                          - b bsto
                        - pull(2):
                          - more_pistons(1):
                            - d
                          - full_extend(2, no_row_2_opt=True):
                            - extend(2, False, no_row_2_opt=True):
                              - b
                              - more_obs(needs_parity=True):
                                - obs obs
                              - extend(-1):
                                - b
                            - extra_pulses(2, False):
                              - b
                          - less_obs():
                            - bsto
                            - b bsto
                          - full_row(0):
                            - more_pistons(0):
                              - c
                            - row_high(0):
                              - full_extend(0, False, no_row_2_opt=True):
                                - extend(0, False, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                          - shift_pistons(1):
                            - d c
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(2):
                          - fold fold
                        - row_high(3, True):
                          - full_extend(3, True, no_row_2_opt=True):
                            - extend(3, True, no_row_2_opt=True):
                              - more_obs(needs_parity=False):
                                - obs obs
                              - more_pistons(0):
                                - c
                              - extend(0):
                                - a
                            - extra_pulses(3, True):
                              - a
                          - retract(3):
                            - retract(0, no_recurse_first=False):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                            - less_obs():
                              - bsto
                              - b bsto
                            - pull(1):
                              - more_pistons(0):
                                - c
                              - full_extend(1, no_row_2_opt=True):
                                - extend(1, False, no_row_2_opt=True):
                                  - b
                                  - a
                              - full_row(-1):
                                - row_high(-1):
                                  - full_extend(-1, False, no_row_2_opt=True):
                                    - extend(-1, False, no_row_2_opt=True):
                                      - b
                              - shift_pistons(0):
                                - c b
                            - row_high(2, True):
                              - full_extend(2, True, no_row_2_opt=True):
                                - extend(2, True, no_row_2_opt=True):
                                  - more_obs(needs_parity=False):
                                    - obs obs
                                  - extend(-1):
                                    - b
                                - extra_pulses(2, True):
                                  - b
                              - retract(2):
                                - less_obs():
                                  - bsto
                                  - b bsto
                                - pull(0):
                                  - more_pistons(0):
                                    - c
                                  - full_extend(0, no_row_2_opt=True):
                                    - extend(0, False, no_row_2_opt=True):
                                      - a
                                  - shift_pistons(0):
                                    - c b
                                - shift_pistons(1):
                                  - d c
                                - row_high(1, True):
                                  - full_extend(1, True, no_row_2_opt=True):
                                    - extend(1, True, no_row_2_opt=True):
                                      - a
                                  - retract(1):
                                    - pull(-1):
                                      - b
                                    - row_high(0, True):
                                      - full_extend(0, True, no_row_2_opt=True):
                                        - extend(0, True, no_row_2_opt=True):
                                          - a
                                      - retract(0):
                                        - shift_pistons(0):
                                          - c b
                                        - row_high(-1, True):
                                          - full_extend(-1, True, no_row_2_opt=True):
                                            - extend(-1, True, no_row_2_opt=True):
                                              - b
                  - shift_pistons(3):
                    - e d
                    - fold fold
                  - shift_pistons(2):
                    - -fold2
                  - shift_pistons(1):
                    - d c
                  - shift_pistons(0):
                    - c b
                - shift_pistons(4):
                  - f e
                - row_high(7, True):
                  - full_extend(7, True, no_row_2_opt=True):
                    - extend(7, True, no_row_2_opt=True):
                      - more_obs(needs_parity=False):
                        - obs obs
                      - more_pistons(2):
                        - d
                        - fold fold
                      - extend(4):
                        - b
                        - more_obs(needs_parity=True):
                          - obs a obs
                        - more_pistons(0):
                          - c
                        - extend(1):
                          - b
                          - a
                    - extra_pulses(7, True):
                      - a a a
                  - retract(7):
                    - retract(4, no_recurse_first=False):
                      - retract(1, no_recurse_first=False):
                        - pull(-1):
                          - b
                        - row_high(0, True):
                          - full_extend(0, True, no_row_2_opt=True):
                            - extend(0, True, no_row_2_opt=True):
                              - a
                          - retract(0):
                            - shift_pistons(0):
                              - c b
                            - row_high(-1, True):
                              - full_extend(-1, True, no_row_2_opt=True):
                                - extend(-1, True, no_row_2_opt=True):
                                  - b
                      - less_obs():
                        - bsto
                        - b bsto
                      - pull(2):
                        - more_pistons(1):
                          - d
                        - full_extend(2, no_row_2_opt=True):
                          - extend(2, False, no_row_2_opt=True):
                            - b
                            - more_obs(needs_parity=True):
                              - obs a obs
                            - extend(-1):
                              - b
                          - extra_pulses(2, False):
                            - b
                        - less_obs():
                          - bsto
                          - b bsto
                        - full_row(0):
                          - more_pistons(0):
                            - c
                          - row_high(0):
                            - full_extend(0, False, no_row_2_opt=True):
                              - extend(0, False, no_row_2_opt=True):
                                - a
                            - retract(0):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                        - shift_pistons(1):
                          - d c
                        - shift_pistons(0):
                          - c b
                      - shift_pistons(2):
                        - fold fold
                      - row_high(3, True):
                        - full_extend(3, True, no_row_2_opt=True):
                          - extend(3, True, no_row_2_opt=True):
                            - more_obs(needs_parity=False):
                              - obs a obs
                            - more_pistons(0):
                              - c
                            - extend(0):
                              - a
                          - extra_pulses(3, True):
                            - a
                        - retract(3):
                          - retract(0, no_recurse_first=False):
                            - shift_pistons(0):
                              - c b
                            - row_high(-1, True):
                              - full_extend(-1, True, no_row_2_opt=True):
                                - extend(-1, True, no_row_2_opt=True):
                                  - b
                          - less_obs():
                            - bsto
                            - b bsto
                          - pull(1):
                            - more_pistons(0):
                              - c
                            - full_extend(1, no_row_2_opt=True):
                              - extend(1, False, no_row_2_opt=True):
                                - b
                                - a
                            - full_row(-1):
                              - row_high(-1):
                                - full_extend(-1, False, no_row_2_opt=True):
                                  - extend(-1, False, no_row_2_opt=True):
                                    - b
                            - shift_pistons(0):
                              - c b
                          - row_high(2, True):
                            - full_extend(2, True, no_row_2_opt=True):
                              - extend(2, True, no_row_2_opt=True):
                                - more_obs(needs_parity=False):
                                  - obs a obs
                                - extend(-1):
                                  - b
                              - extra_pulses(2, True):
                                - b
                            - retract(2):
                              - less_obs():
                                - bsto
                                - b bsto
                              - pull(0):
                                - more_pistons(0):
                                  - c
                                - full_extend(0, no_row_2_opt=True):
                                  - extend(0, False, no_row_2_opt=True):
                                    - a
                                - shift_pistons(0):
                                  - c b
                              - shift_pistons(1):
                                - d c
                              - row_high(1, True):
                                - full_extend(1, True, no_row_2_opt=True):
                                  - extend(1, True, no_row_2_opt=True):
                                    - a
                                - retract(1):
                                  - pull(-1):
                                    - b
                                  - row_high(0, True):
                                    - full_extend(0, True, no_row_2_opt=True):
                                      - extend(0, True, no_row_2_opt=True):
                                        - a
                                    - retract(0):
                                      - shift_pistons(0):
                                        - c b
                                      - row_high(-1, True):
                                        - full_extend(-1, True, no_row_2_opt=True):
                                          - extend(-1, True, no_row_2_opt=True):
                                            - b
                    - less_obs():
                      - bsto
                      - b bsto
                    - pull(5):
                      - more_pistons(2):
                        - d
                        - fold fold
                      - full_extend(5, no_row_2_opt=True):
                        - extend(5, False, no_row_2_opt=True):
                          - b
                          - more_obs(needs_parity=True):
                            - obs obs
                          - more_pistons(1):
                            - d
                          - extend(2):
                            - bsto b
                        - extra_pulses(5, False):
                          - a a
                      - retract(2):
                        - less_obs():
                          - bsto
                        - pull(0):
                          - more_pistons(0):
                            - c
                          - full_extend(0, no_row_2_opt=True):
                            - extend(0, False, no_row_2_opt=True):
                              - a
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(1):
                          - d c
                        - row_high(1, True):
                          - full_extend(1, True, no_row_2_opt=True):
                            - extend(1, True, no_row_2_opt=True):
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                      - less_obs():
                        - bsto
                        - b bsto
                      - full_row(3):
                        - more_pistons(1):
                          - d
                        - row_high(3):
                          - full_extend(3, False, no_row_2_opt=True):
                            - extend(3, False, no_row_2_opt=True):
                              - b
                              - more_obs(needs_parity=True):
                                - obs obs
                              - more_pistons(0):
                                - c
                              - extend(0):
                                - a
                            - extra_pulses(3, False):
                              - a
                          - retract(3):
                            - retract(0, no_recurse_first=False):
                              - shift_pistons(0):
                                - c b
                              - row_high(-1, True):
                                - full_extend(-1, True, no_row_2_opt=True):
                                  - extend(-1, True, no_row_2_opt=True):
                                    - b
                            - less_obs():
                              - bsto
                              - b bsto
                            - pull(1):
                              - more_pistons(0):
                                - c
                              - full_extend(1, no_row_2_opt=True):
                                - extend(1, False, no_row_2_opt=True):
                                  - b
                                  - a
                              - full_row(-1):
                                - row_high(-1):
                                  - full_extend(-1, False, no_row_2_opt=True):
                                    - extend(-1, False, no_row_2_opt=True):
                                      - b
                              - shift_pistons(0):
                                - c b
                            - row_high(2, True):
                              - full_extend(2, True, no_row_2_opt=True):
                                - extend(2, True, no_row_2_opt=True):
                                  - more_obs(needs_parity=False):
                                    - obs obs
                                  - extend(-1):
                                    - b
                                - extra_pulses(2, True):
                                  - b
                              - retract(2):
                                - less_obs():
                                  - bsto
                                  - b bsto
                                - pull(0):
                                  - more_pistons(0):
                                    - c
                                  - full_extend(0, no_row_2_opt=True):
                                    - extend(0, False, no_row_2_opt=True):
                                      - a
                                  - shift_pistons(0):
                                    - c b
                                - shift_pistons(1):
                                  - d c
                                - row_high(1, True):
                                  - full_extend(1, True, no_row_2_opt=True):
                                    - extend(1, True, no_row_2_opt=True):
                                      - a
                                  - retract(1):
                                    - pull(-1):
                                      - b
                                    - row_high(0, True):
                                      - full_extend(0, True, no_row_2_opt=True):
                                        - extend(0, True, no_row_2_opt=True):
                                          - a
                                      - retract(0):
                                        - shift_pistons(0):
                                          - c b
                                        - row_high(-1, True):
                                          - full_extend(-1, True, no_row_2_opt=True):
                                            - extend(-1, True, no_row_2_opt=True):
                                              - b
                      - shift_pistons(2):
                        - fold fold
                      - shift_pistons(1):
                        - d c
                      - shift_pistons(0):
                        - c b
                    - row_high(6, True):
                      - full_extend(6, True, no_row_2_opt=True):
                        - extend(6, True, no_row_2_opt=True):
                          - more_obs(needs_parity=False):
                            - obs obs
                          - more_pistons(1):
                            - d
                          - extend(3):
                            - b
                            - more_obs(needs_parity=True):
                              - obs a obs
                            - more_pistons(0):
                              - c
                            - extend(0):
                              - a
                        - extra_pulses(6, True):
                          - a a a
                      - retract(6):
                        - retract(3, no_recurse_first=False):
                          - retract(0, no_recurse_first=False):
                            - shift_pistons(0):
                              - c b
                            - row_high(-1, True):
                              - full_extend(-1, True, no_row_2_opt=True):
                                - extend(-1, True, no_row_2_opt=True):
                                  - b
                          - less_obs():
                            - bsto
                            - b bsto
                          - pull(1):
                            - more_pistons(0):
                              - c
                            - full_extend(1, no_row_2_opt=True):
                              - extend(1, False, no_row_2_opt=True):
                                - b
                                - a
                            - full_row(-1):
                              - row_high(-1):
                                - full_extend(-1, False, no_row_2_opt=True):
                                  - extend(-1, False, no_row_2_opt=True):
                                    - b
                            - shift_pistons(0):
                              - c b
                          - row_high(2, True):
                            - full_extend(2, True, no_row_2_opt=True):
                              - extend(2, True, no_row_2_opt=True):
                                - more_obs(needs_parity=False):
                                  - obs a obs
                                - extend(-1):
                                  - b
                              - extra_pulses(2, True):
                                - b
                            - retract(2):
                              - less_obs():
                                - bsto
                                - b bsto
                              - pull(0):
                                - more_pistons(0):
                                  - c
                                - full_extend(0, no_row_2_opt=True):
                                  - extend(0, False, no_row_2_opt=True):
                                    - a
                                - shift_pistons(0):
                                  - c b
                              - shift_pistons(1):
                                - d c
                              - row_high(1, True):
                                - full_extend(1, True, no_row_2_opt=True):
                                  - extend(1, True, no_row_2_opt=True):
                                    - a
                                - retract(1):
                                  - pull(-1):
                                    - b
                                  - row_high(0, True):
                                    - full_extend(0, True, no_row_2_opt=True):
                                      - extend(0, True, no_row_2_opt=True):
                                        - a
                                    - retract(0):
                                      - shift_pistons(0):
                                        - c b
                                      - row_high(-1, True):
                                        - full_extend(-1, True, no_row_2_opt=True):
                                          - extend(-1, True, no_row_2_opt=True):
                                            - b
                        - less_obs():
                          - bsto
                          - b bsto
                        - pull(4):
                          - more_pistons(2):
                            - d
                            - fold fold
                          - full_extend(4, no_row_2_opt=True):
                            - extend(4, False, no_row_2_opt=True):
                              - b
                              - more_obs(needs_parity=True):
                                - obs obs
                              - more_pistons(0):
                                - c
                              - extend(1):
                                - b
                                - a
                            - extra_pulses(4, False):
                              - a
                          - retract(1):
                            - pull(-1):
                              - b
                            - row_high(0, True):
                              - full_extend(0, True, no_row_2_opt=True):
                                - extend(0, True, no_row_2_opt=True):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                          - less_obs():
                            - bsto
                            - b bsto
                          - full_row(2):
                            - more_pistons(1):
                              - d
                            - row_high(2):
                              - full_extend(2, False, no_row_2_opt=True):
                                - extend(2, False, no_row_2_opt=True):
                                  - b
                                  - more_obs(needs_parity=True):
                                    - obs obs
                                  - extend(-1):
                                    - b
                                - extra_pulses(2, False):
                                  - b
                              - retract(2):
                                - less_obs():
                                  - bsto
                                  - b bsto
                                - pull(0):
                                  - more_pistons(0):
                                    - c
                                  - full_extend(0, no_row_2_opt=True):
                                    - extend(0, False, no_row_2_opt=True):
                                      - a
                                  - shift_pistons(0):
                                    - c b
                                - shift_pistons(1):
                                  - d c
                                - row_high(1, True):
                                  - full_extend(1, True, no_row_2_opt=True):
                                    - extend(1, True, no_row_2_opt=True):
                                      - a
                                  - retract(1):
                                    - pull(-1):
                                      - b
                                    - row_high(0, True):
                                      - full_extend(0, True, no_row_2_opt=True):
                                        - extend(0, True, no_row_2_opt=True):
                                          - a
                                      - retract(0):
                                        - shift_pistons(0):
                                          - c b
                                        - row_high(-1, True):
                                          - full_extend(-1, True, no_row_2_opt=True):
                                            - extend(-1, True, no_row_2_opt=True):
                                              - b
                          - shift_pistons(2):
                            - fold fold
                          - shift_pistons(1):
                            - d c
                          - shift_pistons(0):
                            - c b
                        - shift_pistons(3):
                          - e d
                          - fold fold
                        - row_high(5, True):
                          - full_extend(5, True, no_row_2_opt=True):
                            - extend(5, True, no_row_2_opt=True):
                              - more_obs(needs_parity=False):
                                - obs obs
                              - more_pistons(1):
                                - d
                              - extend(2):
                                - bsto b
                            - extra_pulses(5, True):
                              - a a
                          - retract(5):
                            - retract(2, no_recurse_first=False):
                              - less_obs():
                                - bsto
                              - pull(0):
                                - more_pistons(0):
                                  - c
                                - full_extend(0, no_row_2_opt=True):
                                  - extend(0, False, no_row_2_opt=True):
                                    - a
                                - shift_pistons(0):
                                  - c b
                              - shift_pistons(1):
                                - d c
                              - row_high(1, True):
                                - full_extend(1, True, no_row_2_opt=True):
                                  - extend(1, True, no_row_2_opt=True):
                                    - a
                                - retract(1):
                                  - pull(-1):
                                    - b
                                  - row_high(0, True):
                                    - full_extend(0, True, no_row_2_opt=True):
                                      - extend(0, True, no_row_2_opt=True):
                                        - a
                                    - retract(0):
                                      - shift_pistons(0):
                                        - c b
                                      - row_high(-1, True):
                                        - full_extend(-1, True, no_row_2_opt=True):
                                          - extend(-1, True, no_row_2_opt=True):
                                            - b
                            - less_obs():
                              - bsto
                              - b bsto
                            - pull(3):
                              - more_pistons(1):
                                - d
                              - full_extend(3, no_row_2_opt=True):
                                - extend(3, False, no_row_2_opt=True):
                                  - b
                                  - more_obs(needs_parity=True):
                                    - obs obs
                                  - more_pistons(0):
                                    - c
                                  - extend(0):
                                    - a
                                - extra_pulses(3, False):
                                  - a
                              - retract(0):
                                - shift_pistons(0):
                                  - c b
                                - row_high(-1, True):
                                  - full_extend(-1, True, no_row_2_opt=True):
                                    - extend(-1, True, no_row_2_opt=True):
                                      - b
                              - less_obs():
                                - bsto
                                - b bsto
                              - full_row(1):
                                - more_pistons(0):
                                  - c
                                - row_high(1):
                                  - full_extend(1, False, no_row_2_opt=True):
                                    - extend(1, False, no_row_2_opt=True):
                                      - b
                                      - a
                                  - retract(1):
                                    - pull(-1):
                                      - b
                                    - row_high(0, True):
                                      - full_extend(0, True, no_row_2_opt=True):
                                        - extend(0, True, no_row_2_opt=True):
                                          - a
                                      - retract(0):
                                        - shift_pistons(0):
                                          - c b
                                        - row_high(-1, True):
                                          - full_extend(-1, True, no_row_2_opt=True):
                                            - extend(-1, True, no_row_2_opt=True):
                                              - b
                              - shift_pistons(1):
                                - d c
                              - shift_pistons(0):
                                - c b
                            - row_high(4, True):
                              - full_extend(4, True, no_row_2_opt=True):
                                - extend(4, True, no_row_2_opt=True):
                                  - more_obs(needs_parity=False):
                                    - obs obs
                                  - more_pistons(0):
                                    - c
                                  - extend(1):
                                    - b
                                    - a
                                - extra_pulses(4, True):
                                  - a
                              - retract(4):
                                - retract(1, no_recurse_first=False):
                                  - pull(-1):
                                    - b
                                  - row_high(0, True):
                                    - full_extend(0, True, no_row_2_opt=True):
                                      - extend(0, True, no_row_2_opt=True):
                                        - a
                                    - retract(0):
                                      - shift_pistons(0):
                                        - c b
                                      - row_high(-1, True):
                                        - full_extend(-1, True, no_row_2_opt=True):
                                          - extend(-1, True, no_row_2_opt=True):
                                            - b
                                - less_obs():
                                  - bsto
                                  - b bsto
                                - pull(2):
                                  - more_pistons(1):
                                    - d
                                  - full_extend(2, no_row_2_opt=True):
                                    - extend(2, False, no_row_2_opt=True):
                                      - b
                                      - more_obs(needs_parity=True):
                                        - obs obs
                                      - extend(-1):
                                        - b
                                    - extra_pulses(2, False):
                                      - b
                                  - less_obs():
                                    - bsto
                                    - b bsto
                                  - full_row(0):
                                    - more_pistons(0):
                                      - c
                                    - row_high(0):
                                      - full_extend(0, False, no_row_2_opt=True):
                                        - extend(0, False, no_row_2_opt=True):
                                          - a
                                      - retract(0):
                                        - shift_pistons(0):
                                          - c b
                                        - row_high(-1, True):
                                          - full_extend(-1, True, no_row_2_opt=True):
                                            - extend(-1, True, no_row_2_opt=True):
                                              - b
                                  - shift_pistons(1):
                                    - d c
                                  - shift_pistons(0):
                                    - c b
                                - shift_pistons(2):
                                  - fold fold
                                - row_high(3, True):
                                  - full_extend(3, True, no_row_2_opt=True):
                                    - extend(3, True, no_row_2_opt=True):
                                      - more_obs(needs_parity=False):
                                        - obs obs
                                      - more_pistons(0):
                                        - c
                                      - extend(0):
                                        - a
                                    - extra_pulses(3, True):
                                      - a
                                  - retract(3):
                                    - retract(0, no_recurse_first=False):
                                      - shift_pistons(0):
                                        - c b
                                      - row_high(-1, True):
                                        - full_extend(-1, True, no_row_2_opt=True):
                                          - extend(-1, True, no_row_2_opt=True):
                                            - b
                                    - less_obs():
                                      - bsto
                                      - b bsto
                                    - pull(1):
                                      - more_pistons(0):
                                        - c
                                      - full_extend(1, no_row_2_opt=True):
                                        - extend(1, False, no_row_2_opt=True):
                                          - b
                                          - a
                                      - full_row(-1):
                                        - row_high(-1):
                                          - full_extend(-1, False, no_row_2_opt=True):
                                            - extend(-1, False, no_row_2_opt=True):
                                              - b
                                      - shift_pistons(0):
                                        - c b
                                    - row_high(2, True):
                                      - full_extend(2, True, no_row_2_opt=True):
                                        - extend(2, True, no_row_2_opt=True):
                                          - more_obs(needs_parity=False):
                                            - obs obs
                                          - extend(-1):
                                            - b
                                        - extra_pulses(2, True):
                                          - b
                                      - retract(2):
                                        - less_obs():
                                          - bsto
                                          - b bsto
                                        - pull(0):
                                          - more_pistons(0):
                                            - c
                                          - full_extend(0, no_row_2_opt=True):
                                            - extend(0, False, no_row_2_opt=True):
                                              - a
                                          - shift_pistons(0):
                                            - c b
                                        - shift_pistons(1):
                                          - d c
                                        - row_high(1, True):
                                          - full_extend(1, True, no_row_2_opt=True):
                                            - extend(1, True, no_row_2_opt=True):
                                              - a
                                          - retract(1):
                                            - pull(-1):
                                              - b
                                            - row_high(0, True):
                                              - full_extend(0, True, no_row_2_opt=True):
                                                - extend(0, True, no_row_2_opt=True):
                                                  - a
                                              - retract(0):
                                                - shift_pistons(0):
                                                  - c b
                                                - row_high(-1, True):
                                                  - full_extend(-1, True, no_row_2_opt=True):
                                                    - extend(-1, True, no_row_2_opt=True):
                                                      - b